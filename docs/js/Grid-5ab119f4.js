import{Q as z,k as K,d as D,i as X,aJ as L,v as N,aQ as w,q as S,aR as q,r as C,D as V,m as H,aS as J,an as I,x as U,p as Y,F as M,ay as W,aT as T,V as Z,aU as x,aH as ee,M as te,h as j}from"./index-a8223b55.js";import{N as se,f as re,e as ie,g as oe}from"./FormItem-8c3b9d06.js";function ne(e){var i;const r=(i=e.dirs)===null||i===void 0?void 0:i.find(({dir:s})=>s===z);return!!(r&&r.value===!1)}const k=1,F=K("n-grid"),A=1,O={span:{type:[Number,String],default:A},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}},ae=q(O),le=D({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:O,setup(){const{isSsrRef:e,xGapRef:i,itemStyleRef:r,overflowRef:s,layoutShiftDisabledRef:n}=X(F),c=L();return{overflow:s,itemStyle:r,layoutShiftDisabled:n,mergedXGap:N(()=>w(i.value||0)),deriveStyle:()=>{e.value;const{privateSpan:f=A,privateShow:u=!0,privateColStart:d=void 0,privateOffset:a=0}=c.vnode.props,{value:b}=i,y=w(b||0);return{display:u?"":"none",gridColumn:`${d??`span ${f}`} / span ${f}`,marginLeft:a?`calc((100% - (${f} - 1) * ${y}) / ${f} * ${a} + ${y} * ${a})`:""}}}},render(){var e,i;if(this.layoutShiftDisabled){const{span:r,offset:s,mergedXGap:n}=this;return S("div",{style:{gridColumn:`span ${r} / span ${r}`,marginLeft:s?`calc((100% - (${r} - 1) * ${n}) / ${r} * ${s} + ${n} * ${s})`:""}},this.$slots)}return S("div",{style:[this.itemStyle,this.deriveStyle()]},(i=(e=this.$slots).default)===null||i===void 0?void 0:i.call(e,{overflow:this.overflow}))}}),fe=Object.assign(Object.assign({},O),re),ce=D({__GRID_ITEM__:!0,name:"FormItemGridItem",alias:["FormItemGi"],props:fe,setup(){const e=C(null);return{formItemInstRef:e,validate:(...s)=>{const{value:n}=e;if(n)return n.validate(...s)},restoreValidation:()=>{const{value:s}=e;s&&s.restoreValidation()}}},render(){return S(le,V(this.$.vnode.props||{},ae),{default:()=>{const e=V(this.$props,ie);return S(se,Object.assign({ref:"formItemInstRef"},e),this.$slots)}})}}),ue={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},Q=24,P="__ssr__",pe={layoutShiftDisabled:Boolean,responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:Q},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}},me=D({name:"Grid",inheritAttrs:!1,props:pe,setup(e){const{mergedClsPrefixRef:i,mergedBreakpointsRef:r}=H(e),s=/^\d+$/,n=C(void 0),c=J((r==null?void 0:r.value)||ue),f=I(()=>!!(e.itemResponsive||!s.test(e.cols.toString())||!s.test(e.xGap.toString())||!s.test(e.yGap.toString()))),u=N(()=>{if(f.value)return e.responsive==="self"?n.value:c.value}),d=I(()=>{var o;return(o=Number(x(e.cols.toString(),u.value)))!==null&&o!==void 0?o:Q}),a=I(()=>x(e.xGap.toString(),u.value)),b=I(()=>x(e.yGap.toString(),u.value)),y=o=>{n.value=o.contentRect.width},v=o=>{ee(y,o)},G=C(!1),R=N(()=>{if(e.responsive==="self")return v}),l=C(!1),m=C();return U(()=>{const{value:o}=m;o&&o.hasAttribute(P)&&(o.removeAttribute(P),l.value=!0)}),Y(F,{layoutShiftDisabledRef:M(e,"layoutShiftDisabled"),isSsrRef:l,itemStyleRef:M(e,"itemStyle"),xGapRef:a,overflowRef:G}),{isSsr:!W,contentEl:m,mergedClsPrefix:i,style:N(()=>e.layoutShiftDisabled?{width:"100%",display:"grid",gridTemplateColumns:`repeat(${e.cols}, minmax(0, 1fr))`,columnGap:w(e.xGap),rowGap:w(e.yGap)}:{width:"100%",display:"grid",gridTemplateColumns:`repeat(${d.value}, minmax(0, 1fr))`,columnGap:w(a.value),rowGap:w(b.value)}),isResponsive:f,responsiveQuery:u,responsiveCols:d,handleResize:R,overflow:G}},render(){if(this.layoutShiftDisabled)return S("div",T({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),this.$slots);const e=()=>{var i,r,s,n,c,f,u;this.overflow=!1;const d=te(oe(this)),a=[],{collapsed:b,collapsedRows:y,responsiveCols:v,responsiveQuery:G}=this;d.forEach(t=>{var $,h,p,g;if((($=t==null?void 0:t.type)===null||$===void 0?void 0:$.__GRID_ITEM__)!==!0)return;if(ne(t)){const _=j(t);_.props?_.props.privateShow=!1:_.props={privateShow:!1},a.push({child:_,rawChildSpan:0});return}t.dirs=((h=t.dirs)===null||h===void 0?void 0:h.filter(({dir:_})=>_!==z))||null;const B=j(t),E=Number((g=x((p=B.props)===null||p===void 0?void 0:p.span,G))!==null&&g!==void 0?g:k);E!==0&&a.push({child:B,rawChildSpan:E})});let R=0;const l=(i=a[a.length-1])===null||i===void 0?void 0:i.child;if(l!=null&&l.props){const t=(r=l.props)===null||r===void 0?void 0:r.suffix;t!==void 0&&t!==!1&&(R=(n=(s=l.props)===null||s===void 0?void 0:s.span)!==null&&n!==void 0?n:k,l.props.privateSpan=R,l.props.privateColStart=v+1-R,l.props.privateShow=(c=l.props.privateShow)!==null&&c!==void 0?c:!0)}let m=0,o=!1;for(const{child:t,rawChildSpan:$}of a){if(o&&(this.overflow=!0),!o){const h=Number((u=x((f=t.props)===null||f===void 0?void 0:f.offset,G))!==null&&u!==void 0?u:0),p=Math.min($+h,v);if(t.props?(t.props.privateSpan=p,t.props.privateOffset=h):t.props={privateSpan:p,privateOffset:h},b){const g=m%v;p+g>v&&(m+=v-g),p+m+R>y*v?o=!0:m+=p}}o&&(t.props?t.props.privateShow!==!0&&(t.props.privateShow=!1):t.props={privateShow:!1})}return S("div",T({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style,[P]:this.isSsr||void 0},this.$attrs),a.map(({child:t})=>t))};return this.isResponsive&&this.responsive==="self"?S(Z,{onResize:this.handleResize},{default:e}):e()}});export{me as N,ce as a};
