import{bX as E,cc as B,bN as T,cl as ie,bR as Q,c9 as L,cm as $,cn as oe,co as se,cp as le,cq as ue,ca as A,ce,cr as _,cs as w,ct as fe,cu as pe,cv as ve,cw as me,cx as ge,c8 as D,c0 as ye,cy as H,c6 as he,cz as z,cA as R,cB as W,bS as de,bV as xe,bT as ke,cC as Ae,bY as De,c5 as Me,cb as be,cd as M,cD as Se,ch as X}from"./index-3ae6663b.js";import{c as Ne,S as Y}from"./installCanvasRenderer-d61ade0d.js";import{i as U}from"./install-5f2cefd9.js";function Ie(r,e){if(!r)return!1;for(var a=E(r)?r:[r],t=0;t<a.length;t++)if(a[t]&&a[t][e])return!0;return!1}function b(r){ue(r,"label",["show"])}var S=B(),ee=function(r){T(e,r);function e(){var a=r!==null&&r.apply(this,arguments)||this;return a.type=e.type,a.createdBySelf=!1,a}return e.prototype.init=function(a,t,n){this.mergeDefaultAndTheme(a,n),this._mergeOption(a,n,!1,!0)},e.prototype.isAnimationEnabled=function(){if(ie.node)return!1;var a=this.__hostSeries;return this.getShallow("animation")&&a&&a.isAnimationEnabled()},e.prototype.mergeOption=function(a,t){this._mergeOption(a,t,!1,!1)},e.prototype._mergeOption=function(a,t,n,i){var l=this.mainType;n||t.eachSeries(function(o){var c=o.get(this.mainType,!0),f=S(o)[l];if(!c||!c.data){S(o)[l]=null;return}f?f._mergeOption(c,t,!0):(i&&b(c),Q(c.data,function(s){s instanceof Array?(b(s[0]),b(s[1])):b(s)}),f=this.createMarkerModelFromSeries(c,this,t),L(f,{mainType:this.mainType,seriesIndex:o.seriesIndex,name:o.name,createdBySelf:!0}),f.__hostSeries=o),S(o)[l]=f},this)},e.prototype.formatTooltip=function(a,t,n){var i=this.getData(),l=this.getRawValue(a),o=i.getName(a);return $("section",{header:this.name,blocks:[$("nameValue",{name:o,value:l,noName:!o,noValue:l==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(a){this._data=a},e.getMarkerModelFromSeries=function(a,t){return S(a)[t]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(oe);se(ee,le.prototype);const C=ee;function P(r){return!(isNaN(parseFloat(r.x))&&isNaN(parseFloat(r.y)))}function Ee(r){return!isNaN(parseFloat(r.x))&&!isNaN(parseFloat(r.y))}function N(r,e,a,t,n,i){var l=[],o=Ne(e,t),c=o?e.getCalculationInfo("stackResultDimension"):t,f=ae(e,c,r),s=e.indicesOfNearest(c,f)[0];l[n]=e.get(a,s),l[i]=e.get(c,s);var p=e.get(t,s),u=fe(e.get(t,s));return u=Math.min(u,20),u>=0&&(l[i]=+l[i].toFixed(u)),[l,p]}var G={min:A(N,"min"),max:A(N,"max"),average:A(N,"average"),median:A(N,"median")};function K(r,e){if(e){var a=r.getData(),t=r.coordinateSystem,n=t&&t.dimensions;if(!Ee(e)&&!E(e.coord)&&E(n)){var i=we(e,a,t,r);if(e=ce(e),e.type&&G[e.type]&&i.baseAxis&&i.valueAxis){var l=_(n,i.baseAxis.dim),o=_(n,i.valueAxis.dim),c=G[e.type](a,i.baseDataDim,i.valueDataDim,l,o);e.coord=c[0],e.value=c[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!E(n))e.coord=[];else for(var f=e.coord,s=0;s<2;s++)G[f[s]]&&(f[s]=ae(a,a.mapDimension(n[s]),f[s]));return e}}function we(r,e,a,t){var n={};return r.valueIndex!=null||r.valueDim!=null?(n.valueDataDim=r.valueIndex!=null?e.getDimension(r.valueIndex):r.valueDim,n.valueAxis=a.getAxis(Ce(t,n.valueDataDim)),n.baseAxis=a.getOtherAxis(n.valueAxis),n.baseDataDim=e.mapDimension(n.baseAxis.dim)):(n.baseAxis=t.getBaseAxis(),n.valueAxis=a.getOtherAxis(n.baseAxis),n.baseDataDim=e.mapDimension(n.baseAxis.dim),n.valueDataDim=e.mapDimension(n.valueAxis.dim)),n}function Ce(r,e){var a=r.getData().getDimensionInfo(e);return a&&a.coordDim}function Z(r,e){return r&&r.containData&&e.coord&&!P(e)?r.containData(e.coord):!0}function Fe(r,e,a){return r&&r.containZone&&e.coord&&a.coord&&!P(e)&&!P(a)?r.containZone(e.coord,a.coord):!0}function We(r,e){return r?function(a,t,n,i){var l=i<2?a.coord&&a.coord[i]:a.value;return w(l,e[i])}:function(a,t,n,i){return w(a.value,e[i])}}function ae(r,e,a){if(a==="average"){var t=0,n=0;return r.each(e,function(i,l){isNaN(i)||(t+=i,n++)}),t/n}else return a==="median"?r.getMedian(e):r.getDataExtent(e)[a==="max"?1:0]}var O=B(),Te=function(r){T(e,r);function e(){var a=r!==null&&r.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.init=function(){this.markerGroupMap=pe()},e.prototype.render=function(a,t,n){var i=this,l=this.markerGroupMap;l.each(function(o){O(o).keep=!1}),t.eachSeries(function(o){var c=C.getMarkerModelFromSeries(o,i.type);c&&i.renderSeries(o,c,t,n)}),l.each(function(o){!O(o).keep&&i.group.remove(o.group)})},e.prototype.markKeep=function(a){O(a).keep=!0},e.prototype.toggleBlurSeries=function(a,t){var n=this;Q(a,function(i){var l=C.getMarkerModelFromSeries(i,n.type);if(l){var o=l.getData();o.eachItemGraphicEl(function(c){c&&(t?ve(c):me(c))})}})},e.type="marker",e}(ge);const Ge=Te;var Oe=function(r){T(e,r);function e(){var a=r!==null&&r.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.createMarkerModelFromSeries=function(a,t,n){return new e(a,t,n)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e}(C);const Le=Oe;var I=B(),Pe=function(r,e,a,t){var n=t[0],i=t[1];if(!(!n||!i)){var l=K(r,n),o=K(r,i),c=l.coord,f=o.coord;c[0]=M(c[0],-1/0),c[1]=M(c[1],-1/0),f[0]=M(f[0],1/0),f[1]=M(f[1],1/0);var s=Se([{},l,o]);return s.coord=[l.coord,o.coord],s.x0=l.x,s.y0=l.y,s.x1=o.x,s.y1=o.y,s}};function F(r){return!isNaN(r)&&!isFinite(r)}function q(r,e,a,t){var n=1-r;return F(e[n])&&F(a[n])}function Be(r,e){var a=e.coord[0],t=e.coord[1],n={coord:a,x:e.x0,y:e.y0},i={coord:t,x:e.x1,y:e.y1};return U(r,"cartesian2d")?a&&t&&(q(1,a,t)||q(0,a,t))?!0:Fe(r,n,i):Z(r,n)||Z(r,i)}function j(r,e,a,t,n){var i=t.coordinateSystem,l=r.getItemModel(e),o,c=X(l.get(a[0]),n.getWidth()),f=X(l.get(a[1]),n.getHeight());if(!isNaN(c)&&!isNaN(f))o=[c,f];else{if(t.getMarkerPosition){var s=r.getValues(["x0","y0"],e),p=r.getValues(["x1","y1"],e),u=i.clampData(s),m=i.clampData(p),v=[];a[0]==="x0"?v[0]=u[0]>m[0]?p[0]:s[0]:v[0]=u[0]>m[0]?s[0]:p[0],a[1]==="y0"?v[1]=u[1]>m[1]?p[1]:s[1]:v[1]=u[1]>m[1]?s[1]:p[1],o=t.getMarkerPosition(v,a,!0)}else{var g=r.get(a[0],e),h=r.get(a[1],e),d=[g,h];i.clampData&&i.clampData(d,d),o=i.dataToPoint(d,!0)}if(U(i,"cartesian2d")){var x=i.getAxis("x"),k=i.getAxis("y"),g=r.get(a[0],e),h=r.get(a[1],e);F(g)?o[0]=x.toGlobalCoord(x.getExtent()[a[0]==="x0"?0:1]):F(h)&&(o[1]=k.toGlobalCoord(k.getExtent()[a[1]==="y0"?0:1]))}isNaN(c)||(o[0]=c),isNaN(f)||(o[1]=f)}return o}var J=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],Ve=function(r){T(e,r);function e(){var a=r!==null&&r.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.updateTransform=function(a,t,n){t.eachSeries(function(i){var l=C.getMarkerModelFromSeries(i,"markArea");if(l){var o=l.getData();o.each(function(c){var f=D(J,function(p){return j(o,c,p,i,n)});o.setItemLayout(c,f);var s=o.getItemGraphicEl(c);s.setShape("points",f)})}},this)},e.prototype.renderSeries=function(a,t,n,i){var l=a.coordinateSystem,o=a.id,c=a.getData(),f=this.markerGroupMap,s=f.get(o)||f.set(o,{group:new ye});this.group.add(s.group),this.markKeep(s);var p=$e(l,a,t);t.setData(p),p.each(function(u){var m=D(J,function(ne){return j(p,u,ne,a,i)}),v=l.getAxis("x").scale,g=l.getAxis("y").scale,h=v.getExtent(),d=g.getExtent(),x=[v.parse(p.get("x0",u)),v.parse(p.get("x1",u))],k=[g.parse(p.get("y0",u)),g.parse(p.get("y1",u))];H(x),H(k);var re=!(h[0]>x[1]||h[1]<x[0]||d[0]>k[1]||d[1]<k[0]),te=!re;p.setItemLayout(u,{points:m,allClipped:te});var y=p.getItemModel(u).getModel("itemStyle").getItemStyle(),V=he(c,"color");y.fill||(y.fill=V,z(y.fill)&&(y.fill=R(y.fill,.4))),y.stroke||(y.stroke=V),p.setItemVisual(u,"style",y)}),p.diff(I(s).data).add(function(u){var m=p.getItemLayout(u);if(!m.allClipped){var v=new W({shape:{points:m.points}});p.setItemGraphicEl(u,v),s.group.add(v)}}).update(function(u,m){var v=I(s).data.getItemGraphicEl(m),g=p.getItemLayout(u);g.allClipped?v&&s.group.remove(v):(v?de(v,{shape:{points:g.points}},t,u):v=new W({shape:{points:g.points}}),p.setItemGraphicEl(u,v),s.group.add(v))}).remove(function(u){var m=I(s).data.getItemGraphicEl(u);s.group.remove(m)}).execute(),p.eachItemGraphicEl(function(u,m){var v=p.getItemModel(m),g=p.getItemVisual(m,"style");u.useStyle(p.getItemVisual(m,"style")),xe(u,ke(v),{labelFetcher:t,labelDataIndex:m,defaultText:p.getName(m)||"",inheritColor:z(g.fill)?R(g.fill,1):"#000"}),Ae(u,v),De(u,null,null,v.get(["emphasis","disabled"])),Me(u).dataModel=t}),I(s).data=p,s.group.silent=t.get("silent")||a.get("silent")},e.type="markArea",e}(Ge);function $e(r,e,a){var t,n,i=["x0","y0","x1","y1"];if(r){var l=D(r&&r.dimensions,function(f){var s=e.getData(),p=s.getDimensionInfo(s.mapDimension(f))||{};return L(L({},p),{name:f,ordinalMeta:null})});n=D(i,function(f,s){return{name:f,type:l[s%2].type}}),t=new Y(n,a)}else n=[{name:"value",type:"float"}],t=new Y(n,a);var o=D(a.get("data"),A(Pe,e,r,a));r&&(o=be(o,A(Be,r)));var c=r?function(f,s,p,u){var m=f.coord[Math.floor(u/2)][u%2];return w(m,n[u])}:function(f,s,p,u){return w(f.value,n[u])};return t.initData(o,null,c),t.hasItemOption=!0,t}const _e=Ve;function Xe(r){r.registerComponentModel(Le),r.registerComponentView(_e),r.registerPreprocessor(function(e){Ie(e.series,"markArea")&&(e.markArea=e.markArea||{})})}export{C as M,Ge as a,Z as b,We as c,K as d,Ie as e,we as g,Xe as i,ae as n};
