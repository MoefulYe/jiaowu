import{L as Ke,B as ze,f as D,n as we,P as Ce,i as Te,g as Y,h as Be,j as ke,S as pe,s as De,k as Re,m as E,p as Fe,q as Ge,v as Ue,x as Ye,G as Ne,y as je,z as Pe,A as He,C as Je,D as ye,E as Xe,F as R,H as B,I as Z,J as fe,K as qe,M as We,N as Qe,O as Ze,Q as et,R as ve,T as de,d as te,r as j,U as O,V as ae,o as V,e as K,W as N,a as L,u as A,l as P,w as z,b as G,X as Me,Y as oe,Z as ie,$ as tt,a0 as at,t as ot}from"./index-96b04baa.js";import{M as Oe,a as it,S as H,g as rt,b as st,n as nt,d as he,c as ge,i as lt,e as ut,f as ct,u as re,h as se,j as ne,k as le,l as mt,m as ue,o as ce,p as $e,q as me,r as pt,s as yt,t as ft,v as vt}from"./installCanvasRenderer-f8ee7a25.js";var be=Ke.prototype,J=ze.prototype,Ee=function(){function i(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return i}();(function(i){D(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e})(Ee);function X(i){return isNaN(+i.cpx1)||isNaN(+i.cpy1)}var dt=function(i){D(e,i);function e(a){var o=i.call(this,a)||this;return o.type="ec-line",o}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Ee},e.prototype.buildPath=function(a,o){X(o)?be.buildPath.call(this,a,o):J.buildPath.call(this,a,o)},e.prototype.pointAt=function(a){return X(this.shape)?be.pointAt.call(this,a):J.pointAt.call(this,a)},e.prototype.tangentAt=function(a){var o=this.shape,n=X(o)?[o.x2-o.x1,o.y2-o.y1]:J.tangentAt.call(this,a);return we(n,n)},e}(Ce);const ht=dt;var q=["fromSymbol","toSymbol"];function Se(i){return"_"+i+"Type"}function xe(i,e,a){var o=e.getItemVisual(a,i);if(!o||o==="none")return o;var n=e.getItemVisual(a,i+"Size"),r=e.getItemVisual(a,i+"Rotate"),l=e.getItemVisual(a,i+"Offset"),s=e.getItemVisual(a,i+"KeepAspect"),t=je(n),u=Pe(l||0,t);return o+t+u+(r||"")+(s||"")}function Le(i,e,a){var o=e.getItemVisual(a,i);if(!(!o||o==="none")){var n=e.getItemVisual(a,i+"Size"),r=e.getItemVisual(a,i+"Rotate"),l=e.getItemVisual(a,i+"Offset"),s=e.getItemVisual(a,i+"KeepAspect"),t=je(n),u=Pe(l||0,t),m=He(o,-t[0]/2+u[0],-t[1]/2+u[1],t[0],t[1],null,s);return m.__specifiedRotation=r==null||isNaN(r)?void 0:+r*Math.PI/180||0,m.name=i,m}}function gt(i){var e=new ht({name:"line",subPixelOptimize:!0});return ee(e.shape,i),e}function ee(i,e){i.x1=e[0][0],i.y1=e[0][1],i.x2=e[1][0],i.y2=e[1][1],i.percent=1;var a=e[2];a?(i.cpx1=a[0],i.cpy1=a[1]):(i.cpx1=NaN,i.cpy1=NaN)}var bt=function(i){D(e,i);function e(a,o,n){var r=i.call(this)||this;return r._createLine(a,o,n),r}return e.prototype._createLine=function(a,o,n){var r=a.hostModel,l=a.getItemLayout(o),s=gt(l);s.shape.percent=0,Te(s,{shape:{percent:1}},r,o),this.add(s),Y(q,function(t){var u=Le(t,a,o);this.add(u),this[Se(t)]=xe(t,a,o)},this),this._updateCommonStl(a,o,n)},e.prototype.updateData=function(a,o,n){var r=a.hostModel,l=this.childOfName("line"),s=a.getItemLayout(o),t={shape:{}};ee(t.shape,s),Be(l,t,r,o),Y(q,function(u){var m=xe(u,a,o),c=Se(u);if(this[c]!==m){this.remove(this.childOfName(u));var p=Le(u,a,o);this.add(p)}this[c]=m},this),this._updateCommonStl(a,o,n)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(a,o,n){var r=a.hostModel,l=this.childOfName("line"),s=n&&n.emphasisLineStyle,t=n&&n.blurLineStyle,u=n&&n.selectLineStyle,m=n&&n.labelStatesModels,c=n&&n.emphasisDisabled,p=n&&n.focus,f=n&&n.blurScope;if(!n||a.hasItemOption){var v=a.getItemModel(o),g=v.getModel("emphasis");s=g.getModel("lineStyle").getLineStyle(),t=v.getModel(["blur","lineStyle"]).getLineStyle(),u=v.getModel(["select","lineStyle"]).getLineStyle(),c=g.get("disabled"),p=g.get("focus"),f=g.get("blurScope"),m=ke(v)}var d=a.getItemVisual(o,"style"),S=d.stroke;l.useStyle(d),l.style.fill=null,l.style.strokeNoScale=!0,l.ensureState("emphasis").style=s,l.ensureState("blur").style=t,l.ensureState("select").style=u,Y(q,function(_){var b=this.childOfName(_);if(b){b.setColor(S),b.style.opacity=d.opacity;for(var k=0;k<pe.length;k++){var w=pe[k],$=l.getState(w);if($){var M=$.style||{},C=b.ensureState(w),T=C.style||(C.style={});M.stroke!=null&&(T[b.__isEmptyBrush?"stroke":"fill"]=M.stroke),M.opacity!=null&&(T.opacity=M.opacity)}}b.markRedraw()}},this);var x=r.getRawValue(o);De(this,m,{labelDataIndex:o,labelFetcher:{getFormattedLabel:function(_,b){return r.getFormattedLabel(_,b,a.dataType)}},inheritColor:S||"#000",defaultOpacity:d.opacity,defaultText:(x==null?a.getName(o):isFinite(x)?Re(x):x)+""});var I=this.getTextContent();if(I){var y=m.normal;I.__align=I.style.align,I.__verticalAlign=I.style.verticalAlign,I.__position=y.get("position")||"middle";var h=y.get("distance");E(h)||(h=[h,h]),I.__labelDistance=h}this.setTextConfig({position:null,local:!0,inside:!1}),Fe(this,p,f,c)},e.prototype.highlight=function(){Ge(this)},e.prototype.downplay=function(){Ue(this)},e.prototype.updateLayout=function(a,o){this.setLinePoints(a.getItemLayout(o))},e.prototype.setLinePoints=function(a){var o=this.childOfName("line");ee(o.shape,a),o.dirty()},e.prototype.beforeUpdate=function(){var a=this,o=a.childOfName("fromSymbol"),n=a.childOfName("toSymbol"),r=a.getTextContent();if(!o&&!n&&(!r||r.ignore))return;for(var l=1,s=this.parent;s;)s.scaleX&&(l/=s.scaleX),s=s.parent;var t=a.childOfName("line");if(!this.__dirty&&!t.__dirty)return;var u=t.shape.percent,m=t.pointAt(0),c=t.pointAt(u),p=Ye([],c,m);we(p,p);function f($,M){var C=$.__specifiedRotation;if(C==null){var T=t.tangentAt(M);$.attr("rotation",(M===1?-1:1)*Math.PI/2-Math.atan2(T[1],T[0]))}else $.attr("rotation",C)}if(o&&(o.setPosition(m),f(o,0),o.scaleX=o.scaleY=l*u,o.markRedraw()),n&&(n.setPosition(c),f(n,1),n.scaleX=n.scaleY=l*u,n.markRedraw()),r&&!r.ignore){r.x=r.y=0,r.originX=r.originY=0;var v=void 0,g=void 0,d=r.__labelDistance,S=d[0]*l,x=d[1]*l,I=u/2,y=t.tangentAt(I),h=[y[1],-y[0]],_=t.pointAt(I);h[1]>0&&(h[0]=-h[0],h[1]=-h[1]);var b=y[0]<0?-1:1;if(r.__position!=="start"&&r.__position!=="end"){var k=-Math.atan2(y[1],y[0]);c[0]<m[0]&&(k=Math.PI+k),r.rotation=k}var w=void 0;switch(r.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":w=-x,g="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":w=x,g="top";break;default:w=0,g="middle"}switch(r.__position){case"end":r.x=p[0]*S+c[0],r.y=p[1]*x+c[1],v=p[0]>.8?"left":p[0]<-.8?"right":"center",g=p[1]>.8?"top":p[1]<-.8?"bottom":"middle";break;case"start":r.x=-p[0]*S+m[0],r.y=-p[1]*x+m[1],v=p[0]>.8?"right":p[0]<-.8?"left":"center",g=p[1]>.8?"bottom":p[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":r.x=S*b+m[0],r.y=m[1]+w,v=y[0]<0?"right":"left",r.originX=-S*b,r.originY=-w;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":r.x=_[0],r.y=_[1]+w,v="center",r.originY=-w;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":r.x=-S*b+c[0],r.y=c[1]+w,v=y[0]>=0?"right":"left",r.originX=S*b,r.originY=-w;break}r.scaleX=r.scaleY=l,r.setStyle({verticalAlign:r.__verticalAlign||g,align:r.__align||v})}},e}(Ne);const St=bt;var xt=function(){function i(e){this.group=new Ne,this._LineCtor=e||St}return i.prototype.updateData=function(e){var a=this;this._progressiveEls=null;var o=this,n=o.group,r=o._lineData;o._lineData=e,r||n.removeAll();var l=Ie(e);e.diff(r).add(function(s){a._doAdd(e,s,l)}).update(function(s,t){a._doUpdate(r,e,t,s,l)}).remove(function(s){n.remove(r.getItemGraphicEl(s))}).execute()},i.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(a,o){a.updateLayout(e,o)},this)},i.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Ie(e),this._lineData=null,this.group.removeAll()},i.prototype.incrementalUpdate=function(e,a){this._progressiveEls=[];function o(s){!s.isGroup&&!Lt(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var n=e.start;n<e.end;n++){var r=a.getItemLayout(n);if(W(r)){var l=new this._LineCtor(a,n,this._seriesScope);l.traverse(o),this.group.add(l),a.setItemGraphicEl(n,l),this._progressiveEls.push(l)}}},i.prototype.remove=function(){this.group.removeAll()},i.prototype.eachRendered=function(e){Je(this._progressiveEls||this.group,e)},i.prototype._doAdd=function(e,a,o){var n=e.getItemLayout(a);if(W(n)){var r=new this._LineCtor(e,a,o);e.setItemGraphicEl(a,r),this.group.add(r)}},i.prototype._doUpdate=function(e,a,o,n,r){var l=e.getItemGraphicEl(o);if(!W(a.getItemLayout(n))){this.group.remove(l);return}l?l.updateData(a,n,r):l=new this._LineCtor(a,n,r),a.setItemGraphicEl(n,l),this.group.add(l)},i}();function Lt(i){return i.animators&&i.animators.length>0}function Ie(i){var e=i.hostModel,a=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:a.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:a.get("disabled"),blurScope:a.get("blurScope"),focus:a.get("focus"),labelStatesModels:ke(e)}}function Ae(i){return isNaN(i[0])||isNaN(i[1])}function W(i){return i&&!Ae(i[0])&&!Ae(i[1])}const It=xt;var At=function(i){D(e,i);function e(){var a=i!==null&&i.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.createMarkerModelFromSeries=function(a,o,n){return new e(a,o,n)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(Oe);const _t=At;var F=We(),wt=function(i,e,a,o){var n=i.getData(),r;if(E(o))r=o;else{var l=o.type;if(l==="min"||l==="max"||l==="average"||l==="median"||o.xAxis!=null||o.yAxis!=null){var s=void 0,t=void 0;if(o.yAxis!=null||o.xAxis!=null)s=e.getAxis(o.yAxis!=null?"y":"x"),t=Qe(o.yAxis,o.xAxis);else{var u=rt(o,n,e,i);s=u.valueAxis;var m=st(n,u.valueDataDim);t=nt(n,m,l)}var c=s.dim==="x"?0:1,p=1-c,f=Ze(o),v={coord:[]};f.type=null,f.coord=[],f.coord[p]=-1/0,v.coord[p]=1/0;var g=a.get("precision");g>=0&&et(t)&&(t=+t.toFixed(Math.min(g,20))),f.coord[c]=v.coord[c]=t,r=[f,v,{type:l,valueIndex:o.valueIndex,value:t}]}else r=[]}var d=[he(i,r[0]),he(i,r[1]),Z({},r[2])];return d[2].type=d[2].type||null,ve(d[2],d[0]),ve(d[2],d[1]),d};function U(i){return!isNaN(i)&&!isFinite(i)}function _e(i,e,a,o){var n=1-i,r=o.dimensions[i];return U(e[n])&&U(a[n])&&e[i]===a[i]&&o.getAxis(r).containData(e[i])}function kt(i,e){if(i.type==="cartesian2d"){var a=e[0].coord,o=e[1].coord;if(a&&o&&(_e(1,a,o,i)||_e(0,a,o,i)))return!0}return ge(i,e[0])&&ge(i,e[1])}function Q(i,e,a,o,n){var r=o.coordinateSystem,l=i.getItemModel(e),s,t=de(l.get("x"),n.getWidth()),u=de(l.get("y"),n.getHeight());if(!isNaN(t)&&!isNaN(u))s=[t,u];else{if(o.getMarkerPosition)s=o.getMarkerPosition(i.getValues(i.dimensions,e));else{var m=r.dimensions,c=i.get(m[0],e),p=i.get(m[1],e);s=r.dataToPoint([c,p])}if(lt(r,"cartesian2d")){var f=r.getAxis("x"),v=r.getAxis("y"),m=r.dimensions;U(i.get(m[0],e))?s[0]=f.toGlobalCoord(f.getExtent()[a?0:1]):U(i.get(m[1],e))&&(s[1]=v.toGlobalCoord(v.getExtent()[a?0:1]))}isNaN(t)||(s[0]=t),isNaN(u)||(s[1]=u)}i.setItemLayout(e,s)}var Nt=function(i){D(e,i);function e(){var a=i!==null&&i.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.updateTransform=function(a,o,n){o.eachSeries(function(r){var l=Oe.getMarkerModelFromSeries(r,"markLine");if(l){var s=l.getData(),t=F(l).from,u=F(l).to;t.each(function(m){Q(t,m,!0,r,n),Q(u,m,!1,r,n)}),s.each(function(m){s.setItemLayout(m,[t.getItemLayout(m),u.getItemLayout(m)])}),this.markerGroupMap.get(r.id).updateLayout()}},this)},e.prototype.renderSeries=function(a,o,n,r){var l=a.coordinateSystem,s=a.id,t=a.getData(),u=this.markerGroupMap,m=u.get(s)||u.set(s,new It);this.group.add(m.group);var c=jt(l,a,o),p=c.from,f=c.to,v=c.line;F(o).from=p,F(o).to=f,o.setData(v);var g=o.get("symbol"),d=o.get("symbolSize"),S=o.get("symbolRotate"),x=o.get("symbolOffset");E(g)||(g=[g,g]),E(d)||(d=[d,d]),E(S)||(S=[S,S]),E(x)||(x=[x,x]),c.from.each(function(y){I(p,y,!0),I(f,y,!1)}),v.each(function(y){var h=v.getItemModel(y).getModel("lineStyle").getLineStyle();v.setItemLayout(y,[p.getItemLayout(y),f.getItemLayout(y)]),h.stroke==null&&(h.stroke=p.getItemVisual(y,"style").fill),v.setItemVisual(y,{fromSymbolKeepAspect:p.getItemVisual(y,"symbolKeepAspect"),fromSymbolOffset:p.getItemVisual(y,"symbolOffset"),fromSymbolRotate:p.getItemVisual(y,"symbolRotate"),fromSymbolSize:p.getItemVisual(y,"symbolSize"),fromSymbol:p.getItemVisual(y,"symbol"),toSymbolKeepAspect:f.getItemVisual(y,"symbolKeepAspect"),toSymbolOffset:f.getItemVisual(y,"symbolOffset"),toSymbolRotate:f.getItemVisual(y,"symbolRotate"),toSymbolSize:f.getItemVisual(y,"symbolSize"),toSymbol:f.getItemVisual(y,"symbol"),style:h})}),m.updateData(v),c.line.eachItemGraphicEl(function(y){ye(y).dataModel=o,y.traverse(function(h){ye(h).dataModel=o})});function I(y,h,_){var b=y.getItemModel(h);Q(y,h,_,a,r);var k=b.getModel("itemStyle").getItemStyle();k.fill==null&&(k.fill=Xe(t,"color")),y.setItemVisual(h,{symbolKeepAspect:b.get("symbolKeepAspect"),symbolOffset:R(b.get("symbolOffset",!0),x[_?0:1]),symbolRotate:R(b.get("symbolRotate",!0),S[_?0:1]),symbolSize:R(b.get("symbolSize"),d[_?0:1]),symbol:R(b.get("symbol",!0),g[_?0:1]),style:k})}this.markKeep(m),m.group.silent=o.get("silent")||a.get("silent")},e.type="markLine",e}(it);function jt(i,e,a){var o;i?o=B(i&&i.dimensions,function(u){var m=e.getData().getDimensionInfo(e.getData().mapDimension(u))||{};return Z(Z({},m),{name:u,ordinalMeta:null})}):o=[{name:"value",type:"float"}];var n=new H(o,a),r=new H(o,a),l=new H([],a),s=B(a.get("data"),fe(wt,e,i,a));i&&(s=qe(s,fe(kt,i)));var t=ut(!!i,o);return n.initData(B(s,function(u){return u[0]}),null,t),r.initData(B(s,function(u){return u[1]}),null,t),l.initData(B(s,function(u){return u[2]})),l.hasItemOption=!0,{from:n,to:r,line:l}}const Pt=Nt;function Ve(i){i.registerComponentModel(_t),i.registerComponentView(Pt),i.registerPreprocessor(function(e){ct(e.series,"markLine")&&(e.markLine=e.markLine||{})})}const Mt=N("h2",{class:"text-xl font-bold"},"同一城市不同岗位对比",-1),Ot={class:"flex mb-4"},$t=te({__name:"same-city-diff-jobs-salary",props:{job:{},jobs:{},city:{},cities:{},data:{}},setup(i){const e=i;re([se,ne,le,mt,ue,ce,Ve,$e]);const a=j([]),o=j([]),n=O(()=>e.jobs.filter(s=>s!==e.job).map(s=>({value:s,label:s}))),r=async()=>{e.city!==void 0&&e.job!==void 0?o.value=await Promise.all(a.value.map(s=>me({city:e.city,jobName:s}))):window.$message.warning("未选择职位和城市")},l=O(()=>{const s=e.data?[e.data,...o.value]:[];return{grid:[{left:"7%",top:"11%",width:"38%",height:"30%"},{right:"7%",top:"11%",width:"38%",height:"30%"},{left:"7%",bottom:"7%",width:"38%",height:"30%"},{right:"7%",bottom:"7%",width:"38%",height:"30%"}],xAxis:[{gridIndex:0,axisLabel:{formatter:"{value}K"}},{gridIndex:1,axisLabel:{formatter:"{value}K"}},{gridIndex:2,axisLabel:{formatter:"{value}K"}},{gridIndex:3}],yAxis:[{gridIndex:0,type:"category",name:"平均薪资"},{gridIndex:1,type:"category",name:"最少薪资"},{gridIndex:2,type:"category",name:"最多薪资"},{gridIndex:3,type:"category",name:"岗位数量"}],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},series:[{type:"bar",name:"平均薪资",data:s.map(t=>[t.avgSalary,t.jobName]).sort(([t],[u])=>t-u),xAxisIndex:0,yAxisIndex:0,colorBy:"data",label:{show:!0,formatter:({value:t})=>`${t[0]}K`,color:"#4c566a",position:"right"},markArea:{itemStyle:{color:"#e5e9f07f"},data:[[{yAxis:e.job},{yAxis:e.job}]]},tooltip:{valueFormatter:t=>`${t}K`},markLine:{symbol:"none",label:{show:!0,position:"end",formatter:({name:t})=>t,color:"#4c566a"},lineStyle:{color:"#4c566a"},data:[{type:"average",name:"平均"}]}},{type:"bar",name:"最少薪资",data:s.map(t=>[t.minSalary,t.jobName]).sort(([t],[u])=>t-u),xAxisIndex:1,yAxisIndex:1,colorBy:"data",label:{show:!0,formatter:({value:t})=>`${t[0]}K`,color:"#4c566a",position:"right"},markArea:{itemStyle:{color:"#e5e9f07f"},data:[[{yAxis:e.job},{yAxis:e.job}]]},tooltip:{valueFormatter:t=>`${t}K`},markLine:{symbol:"none",label:{show:!0,position:"end",formatter:({name:t})=>t,color:"#4c566a"},lineStyle:{color:"#4c566a"},data:[{type:"average",name:"平均"}]}},{type:"bar",name:"最多薪资",data:s.map(t=>[t.maxSalary,t.jobName]).sort(([t],[u])=>t-u),xAxisIndex:2,yAxisIndex:2,colorBy:"data",label:{show:!0,formatter:({value:t})=>`${t[0]}K`,color:"#4c566a",position:"right"},markArea:{itemStyle:{color:"#e5e9f07f"},data:[[{yAxis:e.job},{yAxis:e.job}]]},tooltip:{valueFormatter:t=>`${t}K`},markLine:{symbol:"none",label:{show:!0,position:"end",formatter:({name:t})=>t,color:"#4c566a"},lineStyle:{color:"#4c566a"},data:[{type:"average",name:"平均"}]}},{type:"bar",name:"岗位数量",data:s.map(t=>[t.jobNum,t.jobName]).sort(([t],[u])=>t-u),xAxisIndex:3,yAxisIndex:3,colorBy:"data",label:{show:!0,color:"#4c566a",position:"right"},markArea:{itemStyle:{color:"#e5e9f07f"},data:[[{yAxis:e.job},{yAxis:e.job}]]},markLine:{symbol:"none",label:{show:!0,position:"end",formatter:({name:t})=>t,color:"#4c566a"},lineStyle:{color:"#4c566a"},data:[{type:"average",name:"平均"}]}}]}});return ae(()=>r()),(s,t)=>(V(),K(ie,null,[Mt,N("div",Ot,[L(A(P.NSelect),{value:a.value,"onUpdate:value":t[0]||(t[0]=u=>a.value=u),options:n.value,class:"w-96 m-2",placeholder:"对比岗位",multiple:""},null,8,["value","options"]),L(A(P.NButton),{class:"inline m-2",onClick:r},{default:z(()=>[G("确认")]),_:1})]),L(A(oe),{option:l.value,style:Me(`height: ${a.value.length*3+18}rem`),autoresize:""},null,8,["option","style"])],64))}}),Et=N("h2",{class:"text-xl font-bold"},"相同职位不同城市对比",-1),Vt={class:"flex mb-4"},Kt=te({__name:"same-job-diff-cities-salary",props:{job:{},jobs:{},city:{},cities:{},data:{}},setup(i){const e=i;re([se,ne,le,ue,ce,$e,Ve]);const a=j([]),o=j([]),n=O(()=>e.cities.filter(s=>s!==e.city).map(s=>({value:s,label:s}))),r=async()=>{e.city!==void 0&&e.job!==void 0?o.value=await Promise.all([pt({jobName:e.job})].concat(a.value.map(s=>me({jobName:e.job,city:s})))):window.$message.warning("未选择职位和城市")},l=O(()=>{const s=e.data?[e.data,...o.value]:[];return{grid:[{left:"7%",top:"11%",width:"38%",height:"30%"},{right:"7%",top:"11%",width:"38%",height:"30%"},{left:"7%",bottom:"7%",width:"38%",height:"30%"},{right:"7%",bottom:"7%",width:"38%",height:"30%"}],xAxis:[{gridIndex:0,axisLabel:{formatter:"{value}K"}},{gridIndex:1,axisLabel:{formatter:"{value}K"}},{gridIndex:2,axisLabel:{formatter:"{value}K"}},{gridIndex:3}],yAxis:[{gridIndex:0,type:"category",name:"平均薪资"},{gridIndex:1,type:"category",name:"最少薪资"},{gridIndex:2,type:"category",name:"最多薪资"},{gridIndex:3,type:"category",name:"岗位数量"}],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},series:[{type:"bar",name:"平均薪资",data:s.map(t=>[t.avgSalary,t.region]).sort(([t],[u])=>t-u),xAxisIndex:0,yAxisIndex:0,colorBy:"data",label:{show:!0,formatter:({value:t})=>`${t[0]}K`,color:"#4c566a",position:"right"},markArea:{itemStyle:{color:"#e5e9f07f"},data:[[{yAxis:e.city},{yAxis:e.city}]]},tooltip:{valueFormatter:t=>`${t}K`},markLine:{symbol:"none",label:{show:!0,position:"end",formatter:({name:t})=>t,color:"#4c566a"},lineStyle:{color:"#4c566a"},data:[{type:"average",name:"平均"}]}},{type:"bar",name:"最少薪资",data:s.map(t=>[t.minSalary,t.region]).sort(([t],[u])=>t-u),xAxisIndex:1,yAxisIndex:1,colorBy:"data",label:{show:!0,formatter:({value:t})=>`${t[0]}K`,color:"#4c566a",position:"right"},markArea:{itemStyle:{color:"#e5e9f07f"},data:[[{yAxis:e.city},{yAxis:e.city}]]},tooltip:{valueFormatter:t=>`${t}K`},markLine:{symbol:"none",label:{show:!0,position:"end",formatter:({name:t})=>t,color:"#4c566a"},lineStyle:{color:"#4c566a"},data:[{type:"average",name:"平均"}]}},{type:"bar",name:"最多薪资",data:s.map(t=>[t.maxSalary,t.region]).sort(([t],[u])=>t-u),xAxisIndex:2,yAxisIndex:2,colorBy:"data",label:{show:!0,formatter:({value:t})=>`${t[0]}K`,color:"#4c566a",position:"right"},markArea:{itemStyle:{color:"#e5e9f07f"},data:[[{yAxis:e.city},{yAxis:e.city}]]},tooltip:{valueFormatter:t=>`${t}K`},markLine:{symbol:"none",label:{show:!0,position:"end",formatter:({name:t})=>t,color:"#4c566a"},lineStyle:{color:"#4c566a"},data:[{type:"average",name:"平均"}]}},{type:"bar",name:"岗位数量",data:s.map(t=>[t.jobNum,t.region]).sort(([t],[u])=>t-u),xAxisIndex:3,yAxisIndex:3,colorBy:"data",label:{show:!0,color:"#4c566a",position:"right"},markArea:{itemStyle:{color:"#e5e9f07f"},data:[[{yAxis:e.city},{yAxis:e.city}]]},markLine:{symbol:"none",label:{show:!0,position:"end",formatter:({name:t})=>t,color:"#4c566a"},lineStyle:{color:"#4c566a"},data:[{type:"average",name:"平均"}]}}]}});return ae(()=>{r()}),(s,t)=>(V(),K(ie,null,[Et,N("div",Vt,[L(A(P.NSelect),{value:a.value,"onUpdate:value":t[0]||(t[0]=u=>a.value=u),options:n.value,class:"w-96 m-2",placeholder:"对比城市",multiple:""},null,8,["value","options"]),L(A(P.NButton),{class:"inline m-2",onClick:r},{default:z(()=>[G("确认")]),_:1})]),L(A(oe),{option:l.value,style:Me(`height: ${a.value.length*3+18}rem`),autoresize:""},null,8,["option","style"])],64))}}),zt={class:"w-full h-full flex flex-col"},Ct=N("h2",{class:"text-2xl font-bold"},"职位行情",-1),Tt=N("span",{class:"text-lg pb-1"},"筛选",-1),Bt={class:"flex"},Dt={key:0,class:"p-2"},Rt=N("h2",{class:"text-xl font-bold"},"比较",-1),Ft=N("h2",{class:"text-2xl font-bold"},"相关企业",-1),Gt=["href"],Ht=te({__name:"job-market-view",setup(i){re([se,ne,le,ue,ce]);const e=j(),a=j([]),o=j(),n=j([]),r=j([]),l=j();ae(()=>{yt().then(c=>n.value=c),ft().then(c=>a.value=c),vt().then(c=>r.value=c)});const s=async()=>{e.value!==void 0&&o.value!==void 0?l.value=await me({city:o.value,jobName:e.value}):window.$message.warning("请选择职位和城市!")},t=O(()=>a.value.map(c=>({label:c,value:c}))),u=O(()=>n.value.map(c=>({label:c,value:c}))),m=O(()=>({grid:[{bottom:"71%",top:"8%"},{top:"29%",bottom:"8%"}],xAxis:[{name:"岗位数量",position:"top",gridIndex:0,splitLine:{show:!1},axisLine:{show:!0},axisTick:{show:!0}},{name:"岗位薪资",axisLabel:{formatter:"{value}K"},position:"bottom",gridIndex:1,splitLine:{show:!1},axisLine:{show:!0},axisTick:{show:!0}}],yAxis:[{type:"category",data:["岗位数量"],gridIndex:0},{type:"category",data:["最少薪资","平均薪资","最多薪资"],gridIndex:1}],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},series:[{type:"bar",data:l.value?[l.value.jobNum]:void 0,xAxisIndex:0,yAxisIndex:0,color:"#d08770",label:{show:!0,formatter:({value:c})=>`${c}`,color:"#F7FAFF"}},{type:"bar",data:l.value?[l.value.minSalary,l.value.avgSalary,l.value.maxSalary]:[],xAxisIndex:1,yAxisIndex:1,colorBy:"data",tooltip:{valueFormatter:c=>`${c}K`},label:{show:!0,formatter:({value:c})=>`${c}K`,color:"#F7FAFF"}}]}));return(c,p)=>(V(),K("div",zt,[Ct,Tt,N("div",Bt,[L(A(P.NSelect),{value:e.value,"onUpdate:value":p[0]||(p[0]=f=>e.value=f),options:t.value,class:"inline w-24 p-2",placeholder:"职位"},null,8,["value","options"]),L(A(P.NSelect),{value:o.value,"onUpdate:value":p[1]||(p[1]=f=>o.value=f),options:u.value,class:"inline w-24 p-2",placeholder:"城市"},null,8,["value","options"]),L(A(P.NButton),{class:"inline m-2",onClick:s},{default:z(()=>[G("确认")]),_:1})]),l.value!==void 0?(V(),K("div",Dt,[L(A(oe),{option:m.value,style:{height:"16rem"},autoresize:""},null,8,["option"])])):tt("",!0),Rt,L(A(P.NTabs),{"default-value":""},{default:z(()=>[L(A(P.NTabPane),{name:"相同职位不同城市"},{default:z(()=>[L(Kt,{job:e.value,jobs:a.value,city:o.value,cities:n.value,data:l.value},null,8,["job","jobs","city","cities","data"])]),_:1}),L(A(P.NTabPane),{name:"相同城市不同职位"},{default:z(()=>[L($t,{job:e.value,jobs:a.value,city:o.value,cities:n.value,data:l.value},null,8,["job","jobs","city","cities","data"])]),_:1})]),_:1}),Ft,N("div",null,[(V(!0),K(ie,null,at(r.value,({name:f,url:v})=>(V(),K("span",null,[N("a",{class:"text-slate-800 hover:text-sky-900 underline",href:v},ot(f),9,Gt),G("， ")]))),256))])]))}});export{Ht as default};
