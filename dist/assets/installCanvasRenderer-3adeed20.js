import{a5 as Q,C as w,a6 as Oi,a7 as H,H as F,a8 as Z,a1 as Lt,m as ir,a9 as na,aa as z,E as $t,ab as ki,ac as aa,ad as oa,ae as gr,af as sa,ag as la,ah as be,z as N,V as q,ai as ge,aj as ht,ak as ua,al as W,am as ha,an as Yt,ao as nr,ap as Ri,aq as ca,ar as mr,q as tt,as as fa,at as va,au as ct,W as $,av as da,aw as pa,ax as ga,ay as ma,az as Ei,aA as V,aB as ar,aC as ya,G as R,aD as xa,aE as _a,A as xt,aF as Bi,aG as yr,aH as ba,aI as Nt,aJ as Sa,aK as rt,aL as Ge,aM as Ni,aN as Gi,aO as se,aP as xr,aQ as wa,aR as he,aS as Ca,aT as zi,aU as Fi,aV as Wi,aW as Hi,aX as Vi,aY as $i,aZ as Aa,a_ as Da,a$ as Ta,b0 as Ma,b1 as La,b2 as Ia,b3 as Pa,b4 as Oa,b5 as _r,b6 as ka,b7 as ze,b8 as Fe,b9 as ft,ba as dt,bb as Ra,bc as Ea,bd as Ba,be as Na,bf as Ga,bg as za,bh as Fa,bi as Wa,bj as Ha,bk as Va,bl as $a,bm as Ya,bn as Xa,bo as Ua,bp as at,bq as pt,a0 as ce,U as We,br as Za,bs as Yi,bt as Ka,x as br,bu as He,bv as Sr,bw as it,I as Dt,R as or,bx as Xi,by as Ui,bz as wr,bA as qa,J as bt,K as ja,bB as Ja,T as Cr,bC as St,bD as K,O as Qa,N as Zi,bE as to,M as eo,L as ro,bF as io,bG as no,bH as J,bI as ao,bJ as Ki,bK as qi,bL as oo,bM as Tt,bN as Ft,y as Wt,bO as fe,bP as ve,bQ as so,bR as ji,Z as ot,bS as Mt,bT as Ji,bU as lo,bV as Qi,bW as Ar,bX as tn,bY as de,bZ as uo,b_ as ho,b$ as en,c0 as co,c1 as rn,c2 as Ve,c3 as fo,c4 as vo,c5 as sr,c6 as po,c7 as U,c8 as go,c9 as nn,ca as mo,cb as pe,cc as yo,cd as an,ce as xo,cf as _o,cg as bo,ch as So,ci as Dr,cj as wo,ck as Tr,cl as Mr,cm as Co,cn as Ao,co as Do,cp as Se,cq as Lr,cr as Ir,cs as To,ct as Mo,cu as Lo,cv as Pr,cw as Gt,cx as Io,cy as on,cz as $e,cA as Po,cB as Oo,cC as sn,cD as ko,cE as Ro,cF as Eo,cG as Bo,cH as Zt,cI as Kt,cJ as No,cK as Go,cL as zo}from"./index-a7e509d8.js";function Pt(i){return i==null?0:i.length||1}function Or(i){return i}var Fo=function(){function i(t,e,r,n,a,o){this._old=t,this._new=e,this._oldKeyGetter=r||Or,this._newKeyGetter=n||Or,this.context=a,this._diffModeMultiple=o==="multiple"}return i.prototype.add=function(t){return this._add=t,this},i.prototype.update=function(t){return this._update=t,this},i.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},i.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},i.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},i.prototype.remove=function(t){return this._remove=t,this},i.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},i.prototype._executeOneToOne=function(){var t=this._old,e=this._new,r={},n=new Array(t.length),a=new Array(e.length);this._initIndexMap(t,null,n,"_oldKeyGetter"),this._initIndexMap(e,r,a,"_newKeyGetter");for(var o=0;o<t.length;o++){var s=n[o],l=r[s],u=Pt(l);if(u>1){var h=l.shift();l.length===1&&(r[s]=l[0]),this._update&&this._update(h,o)}else u===1?(r[s]=null,this._update&&this._update(l,o)):this._remove&&this._remove(o)}this._performRestAdd(a,r)},i.prototype._executeMultiple=function(){var t=this._old,e=this._new,r={},n={},a=[],o=[];this._initIndexMap(t,r,a,"_oldKeyGetter"),this._initIndexMap(e,n,o,"_newKeyGetter");for(var s=0;s<a.length;s++){var l=a[s],u=r[l],h=n[l],c=Pt(u),f=Pt(h);if(c>1&&f===1)this._updateManyToOne&&this._updateManyToOne(h,u),n[l]=null;else if(c===1&&f>1)this._updateOneToMany&&this._updateOneToMany(h,u),n[l]=null;else if(c===1&&f===1)this._update&&this._update(h,u),n[l]=null;else if(c>1&&f>1)this._updateManyToMany&&this._updateManyToMany(h,u),n[l]=null;else if(c>1)for(var v=0;v<c;v++)this._remove&&this._remove(u[v]);else this._remove&&this._remove(u)}this._performRestAdd(o,n)},i.prototype._performRestAdd=function(t,e){for(var r=0;r<t.length;r++){var n=t[r],a=e[n],o=Pt(a);if(o>1)for(var s=0;s<o;s++)this._add&&this._add(a[s]);else o===1&&this._add&&this._add(a);e[n]=null}},i.prototype._initIndexMap=function(t,e,r,n){for(var a=this._diffModeMultiple,o=0;o<t.length;o++){var s="_ec_"+this[n](t[o],o);if(a||(r[o]=s),!!e){var l=e[s],u=Pt(l);u===0?(e[s]=o,a&&r.push(s)):u===1?e[s]=[l,o]:l.push(o)}}},i}();const Wo=Fo;var Ho=function(){function i(t,e){this._encode=t,this._schema=e}return i.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},i.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},i}();function Vo(i,t){var e={},r=e.encode={},n=Q(),a=[],o=[],s={};w(i.dimensions,function(f){var v=i.getDimensionInfo(f),d=v.coordDim;if(d){var p=v.coordDimIndex;we(r,d)[p]=f,v.isExtraCoord||(n.set(d,1),Yo(v.type)&&(a[0]=f),we(s,d)[p]=i.getDimensionIndex(v.name)),v.defaultTooltip&&o.push(f)}Oi.each(function(m,g){var y=we(r,g),x=v.otherDims[g];x!=null&&x!==!1&&(y[x]=v.name)})});var l=[],u={};n.each(function(f,v){var d=r[v];u[v]=d[0],l=l.concat(d)}),e.dataDimsOnCoord=l,e.dataDimIndicesOnCoord=H(l,function(f){return i.getDimensionInfo(f).storeDimIndex}),e.encodeFirstDimNotExtra=u;var h=r.label;h&&h.length&&(a=h.slice());var c=r.tooltip;return c&&c.length?o=c.slice():o.length||(o=a.slice()),r.defaultedLabel=a,r.defaultedTooltip=o,e.userOutput=new Ho(s,t),e}function we(i,t){return i.hasOwnProperty(t)||(i[t]=[]),i[t]}function $o(i){return i==="category"?"ordinal":i==="time"?"time":"float"}function Yo(i){return!(i==="ordinal"||i==="time")}var Xo=function(){function i(t){this.otherDims={},t!=null&&F(this,t)}return i}();const le=Xo;var Uo=Lt(),Zo={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},ln=function(){function i(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return i.prototype.isDimensionOmitted=function(){return this._dimOmitted},i.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=cn(this.source)))},i.prototype.getSourceDimensionIndex=function(t){return ir(this._dimNameMap.get(t),-1)},i.prototype.getSourceDimension=function(t){var e=this.source.dimensionsDefine;if(e)return e[t]},i.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,e=na(this.source),r=!fn(t),n="",a=[],o=0,s=0;o<t;o++){var l=void 0,u=void 0,h=void 0,c=this.dimensions[s];if(c&&c.storeDimIndex===o)l=e?c.name:null,u=c.type,h=c.ordinalMeta,s++;else{var f=this.getSourceDimension(o);f&&(l=e?f.name:null,u=f.type)}a.push({property:l,type:u,ordinalMeta:h}),e&&l!=null&&(!c||!c.isCalculationCoord)&&(n+=r?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),n+="$",n+=Zo[u]||"f",h&&(n+=h.uid),n+="$"}var v=this.source,d=[v.seriesLayoutBy,v.startIndex,n].join("$$");return{dimensions:a,hash:d}},i.prototype.makeOutputDimensionNames=function(){for(var t=[],e=0,r=0;e<this._fullDimCount;e++){var n=void 0,a=this.dimensions[r];if(a&&a.storeDimIndex===e)a.isCalculationCoord||(n=a.name),r++;else{var o=this.getSourceDimension(e);o&&(n=o.name)}t.push(n)}return t},i.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},i}();function un(i){return i instanceof ln}function hn(i){for(var t=Q(),e=0;e<(i||[]).length;e++){var r=i[e],n=Z(r)?r.name:r;n!=null&&t.get(n)==null&&t.set(n,e)}return t}function cn(i){var t=Uo(i);return t.dimNameMap||(t.dimNameMap=hn(i.dimensionsDefine))}function fn(i){return i>30}var Ot=Z,lt=H,Ko=typeof Int32Array>"u"?Array:Int32Array,qo="e\0\0",kr=-1,jo=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Jo=["_approximateExtent"],Rr,qt,kt,Rt,Ce,jt,Ae,Qo=function(){function i(t,e){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var r,n=!1;un(t)?(r=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(n=!0,r=t),r=r||["x","y"];for(var a={},o=[],s={},l=!1,u={},h=0;h<r.length;h++){var c=r[h],f=z(c)?new le({name:c}):c instanceof le?c:new le(c),v=f.name;f.type=f.type||"float",f.coordDim||(f.coordDim=v,f.coordDimIndex=0);var d=f.otherDims=f.otherDims||{};o.push(v),a[v]=f,u[v]!=null&&(l=!0),f.createInvertedIndices&&(s[v]=[]),d.itemName===0&&(this._nameDimIdx=h),d.itemId===0&&(this._idDimIdx=h),n&&(f.storeDimIndex=h)}if(this.dimensions=o,this._dimInfos=a,this._initGetDimensionInfo(l),this.hostModel=e,this._invertedIndicesMap=s,this._dimOmitted){var p=this._dimIdxToName=Q();w(o,function(m){p.set(a[m].storeDimIndex,m)})}}return i.prototype.getDimension=function(t){var e=this._recognizeDimIndex(t);if(e==null)return t;if(e=t,!this._dimOmitted)return this.dimensions[e];var r=this._dimIdxToName.get(e);if(r!=null)return r;var n=this._schema.getSourceDimension(e);if(n)return n.name},i.prototype.getDimensionIndex=function(t){var e=this._recognizeDimIndex(t);if(e!=null)return e;if(t==null)return-1;var r=this._getDimInfo(t);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},i.prototype._recognizeDimIndex=function(t){if($t(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},i.prototype._getStoreDimIndex=function(t){var e=this.getDimensionIndex(t);return e},i.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},i.prototype._initGetDimensionInfo=function(t){var e=this._dimInfos;this._getDimInfo=t?function(r){return e.hasOwnProperty(r)?e[r]:void 0}:function(r){return e[r]}},i.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},i.prototype.mapDimension=function(t,e){var r=this._dimSummary;if(e==null)return r.encodeFirstDimNotExtra[t];var n=r.encode[t];return n?n[e]:null},i.prototype.mapDimensionsAll=function(t){var e=this._dimSummary,r=e.encode[t];return(r||[]).slice()},i.prototype.getStore=function(){return this._store},i.prototype.initData=function(t,e,r){var n=this,a;if(t instanceof gr&&(a=t),!a){var o=this.dimensions,s=ki(t)||aa(t)?new oa(t,o.length):t;a=new gr;var l=lt(o,function(u){return{type:n._dimInfos[u].type,property:u}});a.initData(s,l,r)}this._store=a,this._nameList=(e||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=Vo(this,this._schema),this.userOutput=this._dimSummary.userOutput},i.prototype.appendData=function(t){var e=this._store.appendData(t);this._doInit(e[0],e[1])},i.prototype.appendValues=function(t,e){var r=this._store.appendValues(t,e.length),n=r.start,a=r.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),e)for(var s=n;s<a;s++){var l=s-n;this._nameList[s]=e[l],o&&Ae(this,s)}},i.prototype._updateOrdinalMeta=function(){for(var t=this._store,e=this.dimensions,r=0;r<e.length;r++){var n=this._dimInfos[e[r]];n.ordinalMeta&&t.collectOrdinalMeta(n.storeDimIndex,n.ordinalMeta)}},i.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==sa&&!t.fillStorage},i.prototype._doInit=function(t,e){if(!(t>=e)){var r=this._store,n=r.getProvider();this._updateOrdinalMeta();var a=this._nameList,o=this._idList,s=n.getSource().sourceFormat,l=s===nr;if(l&&!n.pure)for(var u=[],h=t;h<e;h++){var c=n.getItem(h,u);if(!this.hasItemOption&&la(c)&&(this.hasItemOption=!0),c){var f=c.name;a[h]==null&&f!=null&&(a[h]=be(f,null));var v=c.id;o[h]==null&&v!=null&&(o[h]=be(v,null))}}if(this._shouldMakeIdFromName())for(var h=t;h<e;h++)Ae(this,h);Rr(this)}},i.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},i.prototype.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},i.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},i.prototype.setCalculationInfo=function(t,e){Ot(t)?F(this._calculationInfo,t):this._calculationInfo[t]=e},i.prototype.getName=function(t){var e=this.getRawIndex(t),r=this._nameList[e];return r==null&&this._nameDimIdx!=null&&(r=kt(this,this._nameDimIdx,e)),r==null&&(r=""),r},i.prototype._getCategory=function(t,e){var r=this._store.get(t,e),n=this._store.getOrdinalMeta(t);return n?n.categories[r]:r},i.prototype.getId=function(t){return qt(this,this.getRawIndex(t))},i.prototype.count=function(){return this._store.count()},i.prototype.get=function(t,e){var r=this._store,n=this._dimInfos[t];if(n)return r.get(n.storeDimIndex,e)},i.prototype.getByRawIndex=function(t,e){var r=this._store,n=this._dimInfos[t];if(n)return r.getByRawIndex(n.storeDimIndex,e)},i.prototype.getIndices=function(){return this._store.getIndices()},i.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},i.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},i.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},i.prototype.getValues=function(t,e){var r=this,n=this._store;return N(t)?n.getValues(lt(t,function(a){return r._getStoreDimIndex(a)}),e):n.getValues(t)},i.prototype.hasValue=function(t){for(var e=this._dimSummary.dataDimIndicesOnCoord,r=0,n=e.length;r<n;r++)if(isNaN(this._store.get(e[r],t)))return!1;return!0},i.prototype.indexOfName=function(t){for(var e=0,r=this._store.count();e<r;e++)if(this.getName(e)===t)return e;return-1},i.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},i.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},i.prototype.rawIndexOf=function(t,e){var r=t&&this._invertedIndicesMap[t],n=r[e];return n==null||isNaN(n)?kr:n},i.prototype.indicesOfNearest=function(t,e,r){return this._store.indicesOfNearest(this._getStoreDimIndex(t),e,r)},i.prototype.each=function(t,e,r){W(t)&&(r=e,e=t,t=[]);var n=r||this,a=lt(Rt(t),this._getStoreDimIndex,this);this._store.each(a,n?q(e,n):e)},i.prototype.filterSelf=function(t,e,r){W(t)&&(r=e,e=t,t=[]);var n=r||this,a=lt(Rt(t),this._getStoreDimIndex,this);return this._store=this._store.filter(a,n?q(e,n):e),this},i.prototype.selectRange=function(t){var e=this,r={},n=ge(t);return w(n,function(a){var o=e._getStoreDimIndex(a);r[o]=t[a]}),this._store=this._store.selectRange(r),this},i.prototype.mapArray=function(t,e,r){W(t)&&(r=e,e=t,t=[]),r=r||this;var n=[];return this.each(t,function(){n.push(e&&e.apply(this,arguments))},r),n},i.prototype.map=function(t,e,r,n){var a=r||n||this,o=lt(Rt(t),this._getStoreDimIndex,this),s=jt(this);return s._store=this._store.map(o,a?q(e,a):e),s},i.prototype.modify=function(t,e,r,n){var a=r||n||this,o=lt(Rt(t),this._getStoreDimIndex,this);this._store.modify(o,a?q(e,a):e)},i.prototype.downSample=function(t,e,r,n){var a=jt(this);return a._store=this._store.downSample(this._getStoreDimIndex(t),e,r,n),a},i.prototype.lttbDownSample=function(t,e){var r=jt(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(t),e),r},i.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},i.prototype.getItemModel=function(t){var e=this.hostModel,r=this.getRawDataItem(t);return new ht(r,e,e&&e.ecModel)},i.prototype.diff=function(t){var e=this;return new Wo(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(r){return qt(t,r)},function(r){return qt(e,r)})},i.prototype.getVisual=function(t){var e=this._visual;return e&&e[t]},i.prototype.setVisual=function(t,e){this._visual=this._visual||{},Ot(t)?F(this._visual,t):this._visual[t]=e},i.prototype.getItemVisual=function(t,e){var r=this._itemVisuals[t],n=r&&r[e];return n??this.getVisual(e)},i.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},i.prototype.ensureUniqueItemVisual=function(t,e){var r=this._itemVisuals,n=r[t];n||(n=r[t]={});var a=n[e];return a==null&&(a=this.getVisual(e),N(a)?a=a.slice():Ot(a)&&(a=F({},a)),n[e]=a),a},i.prototype.setItemVisual=function(t,e,r){var n=this._itemVisuals[t]||{};this._itemVisuals[t]=n,Ot(e)?F(n,e):n[e]=r},i.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},i.prototype.setLayout=function(t,e){Ot(t)?F(this._layout,t):this._layout[t]=e},i.prototype.getLayout=function(t){return this._layout[t]},i.prototype.getItemLayout=function(t){return this._itemLayouts[t]},i.prototype.setItemLayout=function(t,e,r){this._itemLayouts[t]=r?F(this._itemLayouts[t]||{},e):e},i.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},i.prototype.setItemGraphicEl=function(t,e){var r=this.hostModel&&this.hostModel.seriesIndex;ua(r,this.dataType,t,e),this._graphicEls[t]=e},i.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},i.prototype.eachItemGraphicEl=function(t,e){w(this._graphicEls,function(r,n){r&&t&&t.call(e,r,n)})},i.prototype.cloneShallow=function(t){return t||(t=new i(this._schema?this._schema:lt(this.dimensions,this._getDimInfo,this),this.hostModel)),Ce(t,this),t._store=this._store,t},i.prototype.wrapMethod=function(t,e){var r=this[t];W(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var n=r.apply(this,arguments);return e.apply(this,[n].concat(ha(arguments)))})},i.internalField=function(){Rr=function(t){var e=t._invertedIndicesMap;w(e,function(r,n){var a=t._dimInfos[n],o=a.ordinalMeta,s=t._store;if(o){r=e[n]=new Ko(o.categories.length);for(var l=0;l<r.length;l++)r[l]=kr;for(var l=0;l<s.count();l++)r[s.get(a.storeDimIndex,l)]=l}})},kt=function(t,e,r){return be(t._getCategory(e,r),null)},qt=function(t,e){var r=t._idList[e];return r==null&&t._idDimIdx!=null&&(r=kt(t,t._idDimIdx,e)),r==null&&(r=qo+e),r},Rt=function(t){return N(t)||(t=t!=null?[t]:[]),t},jt=function(t){var e=new i(t._schema?t._schema:lt(t.dimensions,t._getDimInfo,t),t.hostModel);return Ce(e,t),e},Ce=function(t,e){w(jo.concat(e.__wrappedMethods||[]),function(r){e.hasOwnProperty(r)&&(t[r]=e[r])}),t.__wrappedMethods=e.__wrappedMethods,w(Jo,function(r){t[r]=Yt(e[r])}),t._calculationInfo=F({},e._calculationInfo)},Ae=function(t,e){var r=t._nameList,n=t._idList,a=t._nameDimIdx,o=t._idDimIdx,s=r[e],l=n[e];if(s==null&&a!=null&&(r[e]=s=kt(t,a,e)),l==null&&o!=null&&(n[e]=l=kt(t,o,e)),l==null&&s!=null){var u=t._nameRepeatCount,h=u[s]=(u[s]||0)+1;l=s,h>1&&(l+="__ec__"+h),n[e]=l}}}(),i}();const ts=Qo;function es(i,t){ki(i)||(i=Ri(i)),t=t||{};var e=t.coordDimensions||[],r=t.dimensionsDefine||i.dimensionsDefine||[],n=Q(),a=[],o=is(i,e,r,t.dimensionsCount),s=t.canOmitUnusedDimensions&&fn(o),l=r===i.dimensionsDefine,u=l?cn(i):hn(r),h=t.encodeDefine;!h&&t.encodeDefaulter&&(h=t.encodeDefaulter(i,o));for(var c=Q(h),f=new ca(o),v=0;v<f.length;v++)f[v]=-1;function d(I){var M=f[I];if(M<0){var b=r[I],L=Z(b)?b:{name:b},T=new le,k=L.name;k!=null&&u.get(k)!=null&&(T.name=T.displayName=k),L.type!=null&&(T.type=L.type),L.displayName!=null&&(T.displayName=L.displayName);var P=a.length;return f[I]=P,T.storeDimIndex=I,a.push(T),T}return a[M]}if(!s)for(var v=0;v<o;v++)d(v);c.each(function(I,M){var b=mr(I).slice();if(b.length===1&&!z(b[0])&&b[0]<0){c.set(M,!1);return}var L=c.set(M,[]);w(b,function(T,k){var P=z(T)?u.get(T):T;P!=null&&P<o&&(L[k]=P,m(d(P),M,k))})});var p=0;w(e,function(I){var M,b,L,T;if(z(I))M=I,T={};else{T=I,M=T.name;var k=T.ordinalMeta;T.ordinalMeta=null,T=F({},T),T.ordinalMeta=k,b=T.dimsDef,L=T.otherDims,T.name=T.coordDim=T.coordDimIndex=T.dimsDef=T.otherDims=null}var P=c.get(M);if(P!==!1){if(P=mr(P),!P.length)for(var G=0;G<(b&&b.length||1);G++){for(;p<o&&d(p).coordDim!=null;)p++;p<o&&P.push(p++)}w(P,function(Y,O){var E=d(Y);if(l&&T.type!=null&&(E.type=T.type),m(tt(E,T),M,O),E.name==null&&b){var B=b[O];!Z(B)&&(B={name:B}),E.name=E.displayName=B.name,E.defaultTooltip=B.defaultTooltip}L&&tt(E.otherDims,L)})}});function m(I,M,b){Oi.get(M)!=null?I.otherDims[M]=b:(I.coordDim=M,I.coordDimIndex=b,n.set(M,!0))}var g=t.generateCoord,y=t.generateCoordCount,x=y!=null;y=g?y||1:0;var _=g||"value";function S(I){I.name==null&&(I.name=I.coordDim)}if(s)w(a,function(I){S(I)}),a.sort(function(I,M){return I.storeDimIndex-M.storeDimIndex});else for(var A=0;A<o;A++){var C=d(A),D=C.coordDim;D==null&&(C.coordDim=ns(_,n,x),C.coordDimIndex=0,(!g||y<=0)&&(C.isExtraCoord=!0),y--),S(C),C.type==null&&(fa(i,A)===va.Must||C.isExtraCoord&&(C.otherDims.itemName!=null||C.otherDims.seriesName!=null))&&(C.type="ordinal")}return rs(a),new ln({source:i,dimensions:a,fullDimensionCount:o,dimensionOmitted:s})}function rs(i){for(var t=Q(),e=0;e<i.length;e++){var r=i[e],n=r.name,a=t.get(n)||0;a>0&&(r.name=n+(a-1)),a++,t.set(n,a)}}function is(i,t,e,r){var n=Math.max(i.dimensionsDetectedCount||1,t.length,e.length,r||0);return w(t,function(a){var o;Z(a)&&(o=a.dimsDef)&&(n=Math.max(n,o.length))}),n}function ns(i,t,e){if(e||t.hasKey(i)){for(var r=0;t.hasKey(i+r);)r++;i+=r}return t.set(i,!0),i}var as=function(){function i(t){this.coordSysDims=[],this.axisMap=Q(),this.categoryAxisMap=Q(),this.coordSysName=t}return i}();function os(i){var t=i.get("coordinateSystem"),e=new as(t),r=ss[t];if(r)return r(i,e,e.axisMap,e.categoryAxisMap),e}var ss={cartesian2d:function(i,t,e,r){var n=i.getReferringComponents("xAxis",ct).models[0],a=i.getReferringComponents("yAxis",ct).models[0];t.coordSysDims=["x","y"],e.set("x",n),e.set("y",a),Ct(n)&&(r.set("x",n),t.firstCategoryDimIndex=0),Ct(a)&&(r.set("y",a),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(i,t,e,r){var n=i.getReferringComponents("singleAxis",ct).models[0];t.coordSysDims=["single"],e.set("single",n),Ct(n)&&(r.set("single",n),t.firstCategoryDimIndex=0)},polar:function(i,t,e,r){var n=i.getReferringComponents("polar",ct).models[0],a=n.findAxisModel("radiusAxis"),o=n.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],e.set("radius",a),e.set("angle",o),Ct(a)&&(r.set("radius",a),t.firstCategoryDimIndex=0),Ct(o)&&(r.set("angle",o),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(i,t,e,r){t.coordSysDims=["lng","lat"]},parallel:function(i,t,e,r){var n=i.ecModel,a=n.getComponent("parallel",i.get("parallelIndex")),o=t.coordSysDims=a.dimensions.slice();w(a.parallelAxisIndex,function(s,l){var u=n.getComponent("parallelAxis",s),h=o[l];e.set(h,u),Ct(u)&&(r.set(h,u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function Ct(i){return i.get("type")==="category"}function ls(i,t,e){e=e||{};var r=e.byIndex,n=e.stackedCoordDimension,a,o,s;us(t)?a=t:(o=t.schema,a=o.dimensions,s=t.store);var l=!!(i&&i.get("stack")),u,h,c,f;if(w(a,function(y,x){z(y)&&(a[x]=y={name:y}),l&&!y.isExtraCoord&&(!r&&!u&&y.ordinalMeta&&(u=y),!h&&y.type!=="ordinal"&&y.type!=="time"&&(!n||n===y.coordDim)&&(h=y))}),h&&!r&&!u&&(r=!0),h){c="__\0ecstackresult_"+i.id,f="__\0ecstackedover_"+i.id,u&&(u.createInvertedIndices=!0);var v=h.coordDim,d=h.type,p=0;w(a,function(y){y.coordDim===v&&p++});var m={name:c,coordDim:v,coordDimIndex:p,type:d,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length},g={name:f,coordDim:f,coordDimIndex:p+1,type:d,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length+1};o?(s&&(m.storeDimIndex=s.ensureCalculationDimension(f,d),g.storeDimIndex=s.ensureCalculationDimension(c,d)),o.appendCalculationDimension(m),o.appendCalculationDimension(g)):(a.push(m),a.push(g))}return{stackedDimension:h&&h.name,stackedByDimension:u&&u.name,isStackedByIndex:r,stackedOverDimension:f,stackResultDimension:c}}function us(i){return!un(i.schema)}function vn(i,t){return!!t&&t===i.getCalculationInfo("stackedDimension")}function hs(i,t){return vn(i,t)?i.getCalculationInfo("stackResultDimension"):t}function cs(i,t){var e=i.get("coordinateSystem"),r=ga.get(e),n;return t&&t.coordSysDims&&(n=H(t.coordSysDims,function(a){var o={name:a},s=t.axisMap.get(a);if(s){var l=s.get("type");o.type=$o(l)}return o})),n||(n=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),n}function fs(i,t,e){var r,n;return e&&w(i,function(a,o){var s=a.coordDim,l=e.categoryAxisMap.get(s);l&&(r==null&&(r=o),a.ordinalMeta=l.getOrdinalMeta(),t&&(a.createInvertedIndices=!0)),a.otherDims.itemName!=null&&(n=!0)}),!n&&r!=null&&(i[r].otherDims.itemName=0),r}function dn(i,t,e){e=e||{};var r=t.getSourceManager(),n,a=!1;i?(a=!0,n=Ri(i)):(n=r.getSource(),a=n.sourceFormat===nr);var o=os(t),s=cs(t,o),l=e.useEncodeDefaulter,u=W(l)?l:l?$(da,s,t):null,h={coordDimensions:s,generateCoord:e.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!a},c=es(n,h),f=fs(c.dimensions,e.createInvertedIndices,o),v=a?null:r.getSharedDataStore(c),d=ls(t,{schema:c,store:v}),p=new ts(c,t);p.setCalculationInfo(d);var m=f!=null&&vs(n)?function(g,y,x,_){return _===f?x:this.defaultDimValueGetter(g,y,x,_)}:null;return p.hasItemOption=!1,p.initData(a?n:v,null,m),p}function vs(i){if(i.sourceFormat===nr){var t=ds(i.data||[]);return!N(pa(t))}}function ds(i){for(var t=0;t<i.length&&i[t]==null;)t++;return i[t]}var pn=function(){function i(t){this._setting=t||{},this._extent=[1/0,-1/0]}return i.prototype.getSetting=function(t){return this._setting[t]},i.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},i.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},i.prototype.getExtent=function(){return this._extent.slice()},i.prototype.setExtent=function(t,e){var r=this._extent;isNaN(t)||(r[0]=t),isNaN(e)||(r[1]=e)},i.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},i.prototype.isBlank=function(){return this._isBlank},i.prototype.setBlank=function(t){this._isBlank=t},i}();ma(pn);const st=pn;var ps=0,gs=function(){function i(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++ps}return i.createByAxisModel=function(t){var e=t.option,r=e.data,n=r&&H(r,ms);return new i({categories:n,needCollect:!n,deduplication:e.dedplication!==!1})},i.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},i.prototype.parseAndCollect=function(t){var e,r=this._needCollect;if(!z(t)&&!r)return t;if(r&&!this._deduplication)return e=this.categories.length,this.categories[e]=t,e;var n=this._getOrCreateMap();return e=n.get(t),e==null&&(r?(e=this.categories.length,this.categories[e]=t,n.set(t,e)):e=NaN),e},i.prototype._getOrCreateMap=function(){return this._map||(this._map=Q(this.categories))},i}();function ms(i){return Z(i)&&i.value!=null?i.value:i+""}const Ye=gs;function Xe(i){return i.type==="interval"||i.type==="log"}function ys(i,t,e,r){var n={},a=i[1]-i[0],o=n.interval=Ei(a/t,!0);e!=null&&o<e&&(o=n.interval=e),r!=null&&o>r&&(o=n.interval=r);var s=n.intervalPrecision=gn(o),l=n.niceTickExtent=[V(Math.ceil(i[0]/o)*o,s),V(Math.floor(i[1]/o)*o,s)];return xs(l,i),n}function De(i){var t=Math.pow(10,ya(i)),e=i/t;return e?e===2?e=3:e===3?e=5:e*=2:e=1,V(e*t)}function gn(i){return ar(i)+2}function Er(i,t,e){i[t]=Math.max(Math.min(i[t],e[1]),e[0])}function xs(i,t){!isFinite(i[0])&&(i[0]=t[0]),!isFinite(i[1])&&(i[1]=t[1]),Er(i,0,t),Er(i,1,t),i[0]>i[1]&&(i[0]=i[1])}function me(i,t){return i>=t[0]&&i<=t[1]}function ye(i,t){return t[1]===t[0]?.5:(i-t[0])/(t[1]-t[0])}function xe(i,t){return i*(t[1]-t[0])+t[0]}var mn=function(i){R(t,i);function t(e){var r=i.call(this,e)||this;r.type="ordinal";var n=r.getSetting("ordinalMeta");return n||(n=new Ye({})),N(n)&&(n=new Ye({categories:H(n,function(a){return Z(a)?a.value:a})})),r._ordinalMeta=n,r._extent=r.getSetting("extent")||[0,n.categories.length-1],r}return t.prototype.parse=function(e){return e==null?NaN:z(e)?this._ordinalMeta.getOrdinal(e):Math.round(e)},t.prototype.contain=function(e){return e=this.parse(e),me(e,this._extent)&&this._ordinalMeta.categories[e]!=null},t.prototype.normalize=function(e){return e=this._getTickNumber(this.parse(e)),ye(e,this._extent)},t.prototype.scale=function(e){return e=Math.round(xe(e,this._extent)),this.getRawOrdinalNumber(e)},t.prototype.getTicks=function(){for(var e=[],r=this._extent,n=r[0];n<=r[1];)e.push({value:n}),n++;return e},t.prototype.getMinorTicks=function(e){},t.prototype.setSortInfo=function(e){if(e==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var r=e.ordinalNumbers,n=this._ordinalNumbersByTick=[],a=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,l=Math.min(s,r.length);o<l;++o){var u=r[o];n[o]=u,a[u]=o}for(var h=0;o<s;++o){for(;a[h]!=null;)h++;n.push(h),a[h]=o}},t.prototype._getTickNumber=function(e){var r=this._ticksByOrdinalNumber;return r&&e>=0&&e<r.length?r[e]:e},t.prototype.getRawOrdinalNumber=function(e){var r=this._ordinalNumbersByTick;return r&&e>=0&&e<r.length?r[e]:e},t.prototype.getLabel=function(e){if(!this.isBlank()){var r=this.getRawOrdinalNumber(e.value),n=this._ordinalMeta.categories[r];return n==null?"":n+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(e,r){this.unionExtent(e.getApproximateExtent(r))},t.prototype.isInExtentRange=function(e){return e=this._getTickNumber(e),this._extent[0]<=e&&this._extent[1]>=e},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(st);st.registerClass(mn);const yn=mn;var gt=V,xn=function(i){R(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type="interval",e._interval=0,e._intervalPrecision=2,e}return t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return me(e,this._extent)},t.prototype.normalize=function(e){return ye(e,this._extent)},t.prototype.scale=function(e){return xe(e,this._extent)},t.prototype.setExtent=function(e,r){var n=this._extent;isNaN(e)||(n[0]=parseFloat(e)),isNaN(r)||(n[1]=parseFloat(r))},t.prototype.unionExtent=function(e){var r=this._extent;e[0]<r[0]&&(r[0]=e[0]),e[1]>r[1]&&(r[1]=e[1]),this.setExtent(r[0],r[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=gn(e)},t.prototype.getTicks=function(e){var r=this._interval,n=this._extent,a=this._niceExtent,o=this._intervalPrecision,s=[];if(!r)return s;var l=1e4;n[0]<a[0]&&(e?s.push({value:gt(a[0]-r,o)}):s.push({value:n[0]}));for(var u=a[0];u<=a[1]&&(s.push({value:u}),u=gt(u+r,o),u!==s[s.length-1].value);)if(s.length>l)return[];var h=s.length?s[s.length-1].value:a[1];return n[1]>h&&(e?s.push({value:gt(h+r,o)}):s.push({value:n[1]})),s},t.prototype.getMinorTicks=function(e){for(var r=this.getTicks(!0),n=[],a=this.getExtent(),o=1;o<r.length;o++){for(var s=r[o],l=r[o-1],u=0,h=[],c=s.value-l.value,f=c/e;u<e-1;){var v=gt(l.value+(u+1)*f);v>a[0]&&v<a[1]&&h.push(v),u++}n.push(h)}return n},t.prototype.getLabel=function(e,r){if(e==null)return"";var n=r&&r.precision;n==null?n=ar(e.value)||0:n==="auto"&&(n=this._intervalPrecision);var a=gt(e.value,n,!0);return xa(a)},t.prototype.calcNiceTicks=function(e,r,n){e=e||5;var a=this._extent,o=a[1]-a[0];if(isFinite(o)){o<0&&(o=-o,a.reverse());var s=ys(a,e,r,n);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},t.prototype.calcNiceExtent=function(e){var r=this._extent;if(r[0]===r[1])if(r[0]!==0){var n=Math.abs(r[0]);e.fixMax||(r[1]+=n/2),r[0]-=n/2}else r[1]=1;var a=r[1]-r[0];isFinite(a)||(r[0]=0,r[1]=1),this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval);var o=this._interval;e.fixMin||(r[0]=gt(Math.floor(r[0]/o)*o)),e.fixMax||(r[1]=gt(Math.ceil(r[1]/o)*o))},t.prototype.setNiceExtent=function(e,r){this._niceExtent=[e,r]},t.type="interval",t}(st);st.registerClass(xn);const Xt=xn;var _n=typeof Float32Array<"u",_s=_n?Float32Array:Array;function Te(i){return N(i)?_n?new Float32Array(i):i:new _s(i)}var bs="__ec_stack_";function lr(i){return i.get("stack")||bs+i.seriesIndex}function ur(i){return i.dim+i.index}function bn(i,t){var e=[];return t.eachSeriesByType(i,function(r){wn(r)&&e.push(r)}),e}function Ss(i){var t={};w(i,function(l){var u=l.coordinateSystem,h=u.getBaseAxis();if(!(h.type!=="time"&&h.type!=="value"))for(var c=l.getData(),f=h.dim+"_"+h.index,v=c.getDimensionIndex(c.mapDimension(h.dim)),d=c.getStore(),p=0,m=d.count();p<m;++p){var g=d.get(v,p);t[f]?t[f].push(g):t[f]=[g]}});var e={};for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];if(n){n.sort(function(l,u){return l-u});for(var a=null,o=1;o<n.length;++o){var s=n[o]-n[o-1];s>0&&(a=a===null?s:Math.min(a,s))}e[r]=a}}return e}function Sn(i){var t=Ss(i),e=[];return w(i,function(r){var n=r.coordinateSystem,a=n.getBaseAxis(),o=a.getExtent(),s;if(a.type==="category")s=a.getBandWidth();else if(a.type==="value"||a.type==="time"){var l=a.dim+"_"+a.index,u=t[l],h=Math.abs(o[1]-o[0]),c=a.scale.getExtent(),f=Math.abs(c[1]-c[0]);s=u?h/f*u:h}else{var v=r.getData();s=Math.abs(o[1]-o[0])/v.count()}var d=xt(r.get("barWidth"),s),p=xt(r.get("barMaxWidth"),s),m=xt(r.get("barMinWidth")||(Cn(r)?.5:1),s),g=r.get("barGap"),y=r.get("barCategoryGap");e.push({bandWidth:s,barWidth:d,barMaxWidth:p,barMinWidth:m,barGap:g,barCategoryGap:y,axisKey:ur(a),stackId:lr(r)})}),ws(e)}function ws(i){var t={};w(i,function(r,n){var a=r.axisKey,o=r.bandWidth,s=t[a]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;t[a]=s;var u=r.stackId;l[u]||s.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var h=r.barWidth;h&&!l[u].width&&(l[u].width=h,h=Math.min(s.remainedWidth,h),s.remainedWidth-=h);var c=r.barMaxWidth;c&&(l[u].maxWidth=c);var f=r.barMinWidth;f&&(l[u].minWidth=f);var v=r.barGap;v!=null&&(s.gap=v);var d=r.barCategoryGap;d!=null&&(s.categoryGap=d)});var e={};return w(t,function(r,n){e[n]={};var a=r.stacks,o=r.bandWidth,s=r.categoryGap;if(s==null){var l=ge(a).length;s=Math.max(35-l*4,15)+"%"}var u=xt(s,o),h=xt(r.gap,1),c=r.remainedWidth,f=r.autoWidthCount,v=(c-u)/(f+(f-1)*h);v=Math.max(v,0),w(a,function(g){var y=g.maxWidth,x=g.minWidth;if(g.width){var _=g.width;y&&(_=Math.min(_,y)),x&&(_=Math.max(_,x)),g.width=_,c-=_+h*_,f--}else{var _=v;y&&y<_&&(_=Math.min(y,c)),x&&x>_&&(_=x),_!==v&&(g.width=_,c-=_+h*_,f--)}}),v=(c-u)/(f+(f-1)*h),v=Math.max(v,0);var d=0,p;w(a,function(g,y){g.width||(g.width=v),p=g,d+=g.width*(1+h)}),p&&(d-=p.width*h);var m=-d/2;w(a,function(g,y){e[n][y]=e[n][y]||{bandWidth:o,offset:m,width:g.width},m+=g.width*(1+h)})}),e}function Cs(i,t,e){if(i&&t){var r=i[ur(t)];return r!=null&&e!=null?r[lr(e)]:r}}function As(i,t){var e=bn(i,t),r=Sn(e);w(e,function(n){var a=n.getData(),o=n.coordinateSystem,s=o.getBaseAxis(),l=lr(n),u=r[ur(s)][l],h=u.offset,c=u.width;a.setLayout({bandWidth:u.bandWidth,offset:h,size:c})})}function Ds(i){return{seriesType:i,plan:_a(),reset:function(t){if(wn(t)){var e=t.getData(),r=t.coordinateSystem,n=r.getBaseAxis(),a=r.getOtherAxis(n),o=e.getDimensionIndex(e.mapDimension(a.dim)),s=e.getDimensionIndex(e.mapDimension(n.dim)),l=t.get("showBackground",!0),u=e.mapDimension(a.dim),h=e.getCalculationInfo("stackResultDimension"),c=vn(e,u)&&!!e.getCalculationInfo("stackedOnSeries"),f=a.isHorizontal(),v=Ts(n,a),d=Cn(t),p=t.get("barMinHeight")||0,m=h&&e.getDimensionIndex(h),g=e.getLayout("size"),y=e.getLayout("offset");return{progress:function(x,_){for(var S=x.count,A=d&&Te(S*3),C=d&&l&&Te(S*3),D=d&&Te(S),I=r.master.getRect(),M=f?I.width:I.height,b,L=_.getStore(),T=0;(b=x.next())!=null;){var k=L.get(c?m:o,b),P=L.get(s,b),G=v,Y=void 0;c&&(Y=+k-L.get(o,b));var O=void 0,E=void 0,B=void 0,X=void 0;if(f){var It=r.dataToPoint([k,P]);if(c){var _e=r.dataToPoint([Y,P]);G=_e[0]}O=G,E=It[1]+y,B=It[0]-G,X=g,Math.abs(B)<p&&(B=(B<0?-1:1)*p)}else{var It=r.dataToPoint([P,k]);if(c){var _e=r.dataToPoint([P,Y]);G=_e[1]}O=It[0]+y,E=G,B=g,X=It[1]-G,Math.abs(X)<p&&(X=(X<=0?-1:1)*p)}d?(A[T]=O,A[T+1]=E,A[T+2]=f?B:X,C&&(C[T]=f?I.x:O,C[T+1]=f?E:I.y,C[T+2]=M),D[b]=b):_.setItemLayout(b,{x:O,y:E,width:B,height:X}),T+=3}d&&_.setLayout({largePoints:A,largeDataIndices:D,largeBackgroundPoints:C,valueAxisHorizontal:f})}}}}}}function wn(i){return i.coordinateSystem&&i.coordinateSystem.type==="cartesian2d"}function Cn(i){return i.pipelineContext&&i.pipelineContext.large}function Ts(i,t){return t.toGlobalCoord(t.dataToCoord(t.type==="log"?1:0))}var Ms=function(i,t,e,r){for(;e<r;){var n=e+r>>>1;i[n][1]<t?e=n+1:r=n}return e},An=function(i){R(t,i);function t(e){var r=i.call(this,e)||this;return r.type="time",r}return t.prototype.getLabel=function(e){var r=this.getSetting("useUTC");return Bi(e.value,yr[ba(Nt(this._minLevelUnit))]||yr.second,r,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(e,r,n){var a=this.getSetting("useUTC"),o=this.getSetting("locale");return Sa(e,r,n,o,a)},t.prototype.getTicks=function(){var e=this._interval,r=this._extent,n=[];if(!e)return n;n.push({value:r[0],level:0});var a=this.getSetting("useUTC"),o=Es(this._minLevelUnit,this._approxInterval,a,r);return n=n.concat(o),n.push({value:r[1],level:0}),n},t.prototype.calcNiceExtent=function(e){var r=this._extent;if(r[0]===r[1]&&(r[0]-=rt,r[1]+=rt),r[1]===-1/0&&r[0]===1/0){var n=new Date;r[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),r[0]=r[1]-rt}this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval)},t.prototype.calcNiceTicks=function(e,r,n){e=e||10;var a=this._extent,o=a[1]-a[0];this._approxInterval=o/e,r!=null&&this._approxInterval<r&&(this._approxInterval=r),n!=null&&this._approxInterval>n&&(this._approxInterval=n);var s=Jt.length,l=Math.min(Ms(Jt,this._approxInterval,0,s),s-1);this._interval=Jt[l][1],this._minLevelUnit=Jt[Math.max(l-1,0)][0]},t.prototype.parse=function(e){return $t(e)?e:+Ge(e)},t.prototype.contain=function(e){return me(this.parse(e),this._extent)},t.prototype.normalize=function(e){return ye(this.parse(e),this._extent)},t.prototype.scale=function(e){return xe(e,this._extent)},t.type="time",t}(Xt),Jt=[["second",Ni],["minute",Gi],["hour",se],["quarter-day",se*6],["half-day",se*12],["day",rt*1.2],["half-week",rt*3.5],["week",rt*7],["month",rt*31],["quarter",rt*95],["half-year",xr/2],["year",xr]];function Ls(i,t,e,r){var n=Ge(t),a=Ge(e),o=function(d){return _r(n,d,r)===_r(a,d,r)},s=function(){return o("year")},l=function(){return s()&&o("month")},u=function(){return l()&&o("day")},h=function(){return u()&&o("hour")},c=function(){return h()&&o("minute")},f=function(){return c()&&o("second")},v=function(){return f()&&o("millisecond")};switch(i){case"year":return s();case"month":return l();case"day":return u();case"hour":return h();case"minute":return c();case"second":return f();case"millisecond":return v()}}function Is(i,t){return i/=rt,i>16?16:i>7.5?7:i>3.5?4:i>1.5?2:1}function Ps(i){var t=30*rt;return i/=t,i>6?6:i>3?3:i>2?2:1}function Os(i){return i/=se,i>12?12:i>6?6:i>3.5?4:i>2?2:1}function Br(i,t){return i/=t?Gi:Ni,i>30?30:i>20?20:i>15?15:i>10?10:i>5?5:i>2?2:1}function ks(i){return Ei(i,!0)}function Rs(i,t,e){var r=new Date(i);switch(Nt(t)){case"year":case"month":r[$i(e)](0);case"day":r[Vi(e)](1);case"hour":r[Hi(e)](0);case"minute":r[Wi(e)](0);case"second":r[zi(e)](0),r[Fi(e)](0)}return r.getTime()}function Es(i,t,e,r){var n=1e4,a=Ca,o=0;function s(M,b,L,T,k,P,G){for(var Y=new Date(b),O=b,E=Y[T]();O<L&&O<=r[1];)G.push({value:O}),E+=M,Y[k](E),O=Y.getTime();G.push({value:O,notAdd:!0})}function l(M,b,L){var T=[],k=!b.length;if(!Ls(Nt(M),r[0],r[1],e)){k&&(b=[{value:Rs(new Date(r[0]),M,e)},{value:r[1]}]);for(var P=0;P<b.length-1;P++){var G=b[P].value,Y=b[P+1].value;if(G!==Y){var O=void 0,E=void 0,B=void 0,X=!1;switch(M){case"year":O=Math.max(1,Math.round(t/rt/365)),E=Pa(e),B=Oa(e);break;case"half-year":case"quarter":case"month":O=Ps(t),E=Ia(e),B=$i(e);break;case"week":case"half-week":case"day":O=Is(t),E=La(e),B=Vi(e),X=!0;break;case"half-day":case"quarter-day":case"hour":O=Os(t),E=Ma(e),B=Hi(e);break;case"minute":O=Br(t,!0),E=Ta(e),B=Wi(e);break;case"second":O=Br(t,!1),E=Da(e),B=zi(e);break;case"millisecond":O=ks(t),E=Aa(e),B=Fi(e);break}s(O,G,Y,E,B,X,T),M==="year"&&L.length>1&&P===0&&L.unshift({value:L[0].value-O})}}for(var P=0;P<T.length;P++)L.push(T[P]);return T}}for(var u=[],h=[],c=0,f=0,v=0;v<a.length&&o++<n;++v){var d=Nt(a[v]);if(wa(a[v])){l(a[v],u[u.length-1]||[],h);var p=a[v+1]?Nt(a[v+1]):null;if(d!==p){if(h.length){f=c,h.sort(function(M,b){return M.value-b.value});for(var m=[],g=0;g<h.length;++g){var y=h[g].value;(g===0||h[g-1].value!==y)&&(m.push(h[g]),y>=r[0]&&y<=r[1]&&c++)}var x=(r[1]-r[0])/t;if(c>x*1.5&&f>x/1.5||(u.push(m),c>x||i===a[v]))break}h=[]}}}for(var _=he(H(u,function(M){return he(M,function(b){return b.value>=r[0]&&b.value<=r[1]&&!b.notAdd})}),function(M){return M.length>0}),S=[],A=_.length-1,v=0;v<_.length;++v)for(var C=_[v],D=0;D<C.length;++D)S.push({value:C[D].value,level:A-v});S.sort(function(M,b){return M.value-b.value});for(var I=[],v=0;v<S.length;++v)(v===0||S[v].value!==S[v-1].value)&&I.push(S[v]);return I}st.registerClass(An);const Bs=An;var Nr=st.prototype,zt=Xt.prototype,Ns=V,Gs=Math.floor,zs=Math.ceil,Qt=Math.pow,et=Math.log,hr=function(i){R(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type="log",e.base=10,e._originalScale=new Xt,e._interval=0,e}return t.prototype.getTicks=function(e){var r=this._originalScale,n=this._extent,a=r.getExtent(),o=zt.getTicks.call(this,e);return H(o,function(s){var l=s.value,u=V(Qt(this.base,l));return u=l===n[0]&&this._fixMin?te(u,a[0]):u,u=l===n[1]&&this._fixMax?te(u,a[1]):u,{value:u}},this)},t.prototype.setExtent=function(e,r){var n=et(this.base);e=et(Math.max(0,e))/n,r=et(Math.max(0,r))/n,zt.setExtent.call(this,e,r)},t.prototype.getExtent=function(){var e=this.base,r=Nr.getExtent.call(this);r[0]=Qt(e,r[0]),r[1]=Qt(e,r[1]);var n=this._originalScale,a=n.getExtent();return this._fixMin&&(r[0]=te(r[0],a[0])),this._fixMax&&(r[1]=te(r[1],a[1])),r},t.prototype.unionExtent=function(e){this._originalScale.unionExtent(e);var r=this.base;e[0]=et(e[0])/et(r),e[1]=et(e[1])/et(r),Nr.unionExtent.call(this,e)},t.prototype.unionExtentFromData=function(e,r){this.unionExtent(e.getApproximateExtent(r))},t.prototype.calcNiceTicks=function(e){e=e||10;var r=this._extent,n=r[1]-r[0];if(!(n===1/0||n<=0)){var a=ka(n),o=e/n*a;for(o<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var s=[V(zs(r[0]/a)*a),V(Gs(r[1]/a)*a)];this._interval=a,this._niceExtent=s}},t.prototype.calcNiceExtent=function(e){zt.calcNiceExtent.call(this,e),this._fixMin=e.fixMin,this._fixMax=e.fixMax},t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return e=et(e)/et(this.base),me(e,this._extent)},t.prototype.normalize=function(e){return e=et(e)/et(this.base),ye(e,this._extent)},t.prototype.scale=function(e){return e=xe(e,this._extent),Qt(this.base,e)},t.type="log",t}(st),Dn=hr.prototype;Dn.getMinorTicks=zt.getMinorTicks;Dn.getLabel=zt.getLabel;function te(i,t){return Ns(i,ar(t))}st.registerClass(hr);const Fs=hr;var Ws=function(){function i(t,e,r){this._prepareParams(t,e,r)}return i.prototype._prepareParams=function(t,e,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var n=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&e.getNeedCrossZero&&e.getNeedCrossZero();var a=this._modelMinRaw=e.get("min",!0);W(a)?this._modelMinNum=ee(t,a({min:r[0],max:r[1]})):a!=="dataMin"&&(this._modelMinNum=ee(t,a));var o=this._modelMaxRaw=e.get("max",!0);if(W(o)?this._modelMaxNum=ee(t,o({min:r[0],max:r[1]})):o!=="dataMax"&&(this._modelMaxNum=ee(t,o)),n)this._axisDataLen=e.getCategories().length;else{var s=e.get("boundaryGap"),l=N(s)?s:[s||0,s||0];typeof l[0]=="boolean"||typeof l[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[ze(l[0],1),ze(l[1],1)]}},i.prototype.calculate=function(){var t=this._isOrdinal,e=this._dataMin,r=this._dataMax,n=this._axisDataLen,a=this._boundaryGapInner,o=t?null:r-e||Math.abs(e),s=this._modelMinRaw==="dataMin"?e:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?r:this._modelMaxNum,u=s!=null,h=l!=null;s==null&&(s=t?n?0:NaN:e-a[0]*o),l==null&&(l=t?n?n-1:NaN:r+a[1]*o),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var c=Fe(s)||Fe(l)||t&&!n;this._needCrossZero&&(s>0&&l>0&&!u&&(s=0),s<0&&l<0&&!h&&(l=0));var f=this._determinedMin,v=this._determinedMax;return f!=null&&(s=f,u=!0),v!=null&&(l=v,h=!0),{min:s,max:l,minFixed:u,maxFixed:h,isBlank:c}},i.prototype.modifyDataMinMax=function(t,e){this[Vs[t]]=e},i.prototype.setDeterminedMinMax=function(t,e){var r=Hs[t];this[r]=e},i.prototype.freeze=function(){this.frozen=!0},i}(),Hs={min:"_determinedMin",max:"_determinedMax"},Vs={min:"_dataMin",max:"_dataMax"};function $s(i,t,e){var r=i.rawExtentInfo;return r||(r=new Ws(i,t,e),i.rawExtentInfo=r,r)}function ee(i,t){return t==null?null:Fe(t)?NaN:i.parse(t)}function Tn(i,t){var e=i.type,r=$s(i,t,i.getExtent()).calculate();i.setBlank(r.isBlank);var n=r.min,a=r.max,o=t.ecModel;if(o&&e==="time"){var s=bn("bar",o),l=!1;if(w(s,function(c){l=l||c.getBaseAxis()===t.axis}),l){var u=Sn(s),h=Ys(n,a,t,u);n=h.min,a=h.max}}return{extent:[n,a],fixMin:r.minFixed,fixMax:r.maxFixed}}function Ys(i,t,e,r){var n=e.axis.getExtent(),a=n[1]-n[0],o=Cs(r,e.axis);if(o===void 0)return{min:i,max:t};var s=1/0;w(o,function(v){s=Math.min(v.offset,s)});var l=-1/0;w(o,function(v){l=Math.max(v.offset+v.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,h=t-i,c=1-(s+l)/a,f=h/c-h;return t+=f*(l/u),i-=f*(s/u),{min:i,max:t}}function Gr(i,t){var e=t,r=Tn(i,e),n=r.extent,a=e.get("splitNumber");i instanceof Fs&&(i.base=e.get("logBase"));var o=i.type,s=e.get("interval"),l=o==="interval"||o==="time";i.setExtent(n[0],n[1]),i.calcNiceExtent({splitNumber:a,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:l?e.get("minInterval"):null,maxInterval:l?e.get("maxInterval"):null}),s!=null&&i.setInterval&&i.setInterval(s)}function Xs(i,t){if(t=t||i.get("type"),t)switch(t){case"category":return new yn({ordinalMeta:i.getOrdinalMeta?i.getOrdinalMeta():i.getCategories(),extent:[1/0,-1/0]});case"time":return new Bs({locale:i.ecModel.getLocaleModel(),useUTC:i.ecModel.get("useUTC")});default:return new(st.getClass(t)||Xt)}}function Us(i){var t=i.scale.getExtent(),e=t[0],r=t[1];return!(e>0&&r>0||e<0&&r<0)}function Ut(i){var t=i.getLabelModel().get("formatter"),e=i.type==="category"?i.scale.getExtent()[0]:null;return i.scale.type==="time"?function(r){return function(n,a){return i.scale.getFormattedLabel(n,a,r)}}(t):z(t)?function(r){return function(n){var a=i.scale.getLabel(n),o=r.replace("{value}",a??"");return o}}(t):W(t)?function(r){return function(n,a){return e!=null&&(a=n.value-e),r(cr(i,n),a,n.level!=null?{level:n.level}:null)}}(t):function(r){return i.scale.getLabel(r)}}function cr(i,t){return i.type==="category"?i.scale.getLabel(t):t.value}function Zs(i){var t=i.model,e=i.scale;if(!(!t.get(["axisLabel","show"])||e.isBlank())){var r,n,a=e.getExtent();e instanceof yn?n=e.count():(r=e.getTicks(),n=r.length);var o=i.getLabelModel(),s=Ut(i),l,u=1;n>40&&(u=Math.ceil(n/40));for(var h=0;h<n;h+=u){var c=r?r[h]:{value:a[0]+h},f=s(c,h),v=o.getTextRect(f),d=Ks(v,o.get("rotate")||0);l?l.union(d):l=d}return l}}function Ks(i,t){var e=t*Math.PI/180,r=i.width,n=i.height,a=r*Math.abs(Math.cos(e))+Math.abs(n*Math.sin(e)),o=r*Math.abs(Math.sin(e))+Math.abs(n*Math.cos(e)),s=new ft(i.x,i.y,a,o);return s}function fr(i){var t=i.get("interval");return t??"auto"}function Mn(i){return i.type==="category"&&fr(i.getLabelModel())===0}function qs(i,t){var e={};return w(i.mapDimensionsAll(t),function(r){e[hs(i,r)]=!0}),ge(e)}var js=function(){function i(){}return i.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},i.prototype.getCoordSysModel=function(){},i}(),zr=[],Js={registerPreprocessor:Ra,registerProcessor:Ea,registerPostInit:Ba,registerPostUpdate:Na,registerUpdateLifecycle:Ga,registerAction:za,registerCoordinateSystem:Fa,registerLayout:Wa,registerVisual:Ha,registerTransform:Va,registerLoading:$a,registerMap:Ya,registerImpl:Xa,PRIORITY:Ua,ComponentModel:at,ComponentView:pt,SeriesModel:ce,ChartView:We,registerComponentModel:function(i){at.registerClass(i)},registerComponentView:function(i){pt.registerClass(i)},registerSeriesModel:function(i){ce.registerClass(i)},registerChartView:function(i){We.registerClass(i)},registerSubTypeDefaulter:function(i,t){at.registerSubTypeDefaulter(i,t)},registerPainter:function(i,t){Za(i,t)}};function wt(i){if(N(i)){w(i,function(t){wt(t)});return}dt(zr,i)>=0||(zr.push(i),W(i)&&(i={install:i}),i.install(Js))}var Ht=Lt();function Qs(i){return i.type==="category"?el(i):il(i)}function tl(i,t){return i.type==="category"?rl(i,t):{ticks:H(i.scale.getTicks(),function(e){return e.value})}}function el(i){var t=i.getLabelModel(),e=Ln(i,t);return!t.get("show")||i.scale.isBlank()?{labels:[],labelCategoryInterval:e.labelCategoryInterval}:e}function Ln(i,t){var e=In(i,"labels"),r=fr(t),n=Pn(e,r);if(n)return n;var a,o;return W(r)?a=Rn(i,r):(o=r==="auto"?nl(i):r,a=kn(i,o)),On(e,r,{labels:a,labelCategoryInterval:o})}function rl(i,t){var e=In(i,"ticks"),r=fr(t),n=Pn(e,r);if(n)return n;var a,o;if((!t.get("show")||i.scale.isBlank())&&(a=[]),W(r))a=Rn(i,r,!0);else if(r==="auto"){var s=Ln(i,i.getLabelModel());o=s.labelCategoryInterval,a=H(s.labels,function(l){return l.tickValue})}else o=r,a=kn(i,o,!0);return On(e,r,{ticks:a,tickCategoryInterval:o})}function il(i){var t=i.scale.getTicks(),e=Ut(i);return{labels:H(t,function(r,n){return{level:r.level,formattedLabel:e(r,n),rawLabel:i.scale.getLabel(r),tickValue:r.value}})}}function In(i,t){return Ht(i)[t]||(Ht(i)[t]=[])}function Pn(i,t){for(var e=0;e<i.length;e++)if(i[e].key===t)return i[e].value}function On(i,t,e){return i.push({key:t,value:e}),e}function nl(i){var t=Ht(i).autoInterval;return t??(Ht(i).autoInterval=i.calculateCategoryInterval())}function al(i){var t=ol(i),e=Ut(i),r=(t.axisRotate-t.labelRotate)/180*Math.PI,n=i.scale,a=n.getExtent(),o=n.count();if(a[1]-a[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var l=a[0],u=i.dataToCoord(l+1)-i.dataToCoord(l),h=Math.abs(u*Math.cos(r)),c=Math.abs(u*Math.sin(r)),f=0,v=0;l<=a[1];l+=s){var d=0,p=0,m=Yi(e({value:l}),t.font,"center","top");d=m.width*1.3,p=m.height*1.3,f=Math.max(f,d,7),v=Math.max(v,p,7)}var g=f/h,y=v/c;isNaN(g)&&(g=1/0),isNaN(y)&&(y=1/0);var x=Math.max(0,Math.floor(Math.min(g,y))),_=Ht(i.model),S=i.getExtent(),A=_.lastAutoInterval,C=_.lastTickCount;return A!=null&&C!=null&&Math.abs(A-x)<=1&&Math.abs(C-o)<=1&&A>x&&_.axisExtent0===S[0]&&_.axisExtent1===S[1]?x=A:(_.lastTickCount=o,_.lastAutoInterval=x,_.axisExtent0=S[0],_.axisExtent1=S[1]),x}function ol(i){var t=i.getLabelModel();return{axisRotate:i.getRotate?i.getRotate():i.isHorizontal&&!i.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function kn(i,t,e){var r=Ut(i),n=i.scale,a=n.getExtent(),o=i.getLabelModel(),s=[],l=Math.max((t||0)+1,1),u=a[0],h=n.count();u!==0&&l>1&&h/l>2&&(u=Math.round(Math.ceil(u/l)*l));var c=Mn(i),f=o.get("showMinLabel")||c,v=o.get("showMaxLabel")||c;f&&u!==a[0]&&p(a[0]);for(var d=u;d<=a[1];d+=l)p(d);v&&d-l!==a[1]&&p(a[1]);function p(m){var g={value:m};s.push(e?m:{formattedLabel:r(g),rawLabel:n.getLabel(g),tickValue:m})}return s}function Rn(i,t,e){var r=i.scale,n=Ut(i),a=[];return w(r.getTicks(),function(o){var s=r.getLabel(o),l=o.value;t(o.value,s)&&a.push(e?l:{formattedLabel:n(o),rawLabel:s,tickValue:l})}),a}var Fr=[0,1],sl=function(){function i(t,e,r){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=e,this._extent=r||[0,0]}return i.prototype.contain=function(t){var e=this._extent,r=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]);return t>=r&&t<=n},i.prototype.containData=function(t){return this.scale.contain(t)},i.prototype.getExtent=function(){return this._extent.slice()},i.prototype.getPixelPrecision=function(t){return Ka(t||this.scale.getExtent(),this._extent)},i.prototype.setExtent=function(t,e){var r=this._extent;r[0]=t,r[1]=e},i.prototype.dataToCoord=function(t,e){var r=this._extent,n=this.scale;return t=n.normalize(t),this.onBand&&n.type==="ordinal"&&(r=r.slice(),Wr(r,n.count())),br(t,Fr,r,e)},i.prototype.coordToData=function(t,e){var r=this._extent,n=this.scale;this.onBand&&n.type==="ordinal"&&(r=r.slice(),Wr(r,n.count()));var a=br(t,r,Fr,e);return this.scale.scale(a)},i.prototype.pointToData=function(t,e){},i.prototype.getTicksCoords=function(t){t=t||{};var e=t.tickModel||this.getTickModel(),r=tl(this,e),n=r.ticks,a=H(n,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),o=e.get("alignWithLabel");return ll(this,a,o,t.clamp),a},i.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),e=t.get("splitNumber");e>0&&e<100||(e=5);var r=this.scale.getMinorTicks(e),n=H(r,function(a){return H(a,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return n},i.prototype.getViewLabels=function(){return Qs(this).labels},i.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},i.prototype.getTickModel=function(){return this.model.getModel("axisTick")},i.prototype.getBandWidth=function(){var t=this._extent,e=this.scale.getExtent(),r=e[1]-e[0]+(this.onBand?1:0);r===0&&(r=1);var n=Math.abs(t[1]-t[0]);return Math.abs(n)/r},i.prototype.calculateCategoryInterval=function(){return al(this)},i}();function Wr(i,t){var e=i[1]-i[0],r=t,n=e/r/2;i[0]+=n,i[1]-=n}function ll(i,t,e,r){var n=t.length;if(!i.onBand||e||!n)return;var a=i.getExtent(),o,s;if(n===1)t[0].coord=a[0],o=t[1]={coord:a[1]};else{var l=t[n-1].tickValue-t[0].tickValue,u=(t[n-1].coord-t[0].coord)/l;w(t,function(v){v.coord-=u/2});var h=i.scale.getExtent();s=1+h[1]-t[n-1].tickValue,o={coord:t[n-1].coord+u*s},t.push(o)}var c=a[0]>a[1];f(t[0].coord,a[0])&&(r?t[0].coord=a[0]:t.shift()),r&&f(a[0],t[0].coord)&&t.unshift({coord:a[0]}),f(a[1],o.coord)&&(r?o.coord=a[1]:t.pop()),r&&f(o.coord,a[1])&&t.push({coord:a[1]});function f(v,d){return v=V(v),d=V(d),c?v>d:v<d}}const ul=sl;function hl(i){for(var t=[],e=0;e<i.length;e++){var r=i[e];if(!r.defaultAttr.ignore){var n=r.label,a=n.getComputedTransform(),o=n.getBoundingRect(),s=!a||a[1]<1e-5&&a[2]<1e-5,l=n.style.margin||0,u=o.clone();u.applyTransform(a),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var h=s?new He(o,a):null;t.push({label:n,labelLine:r.labelLine,rect:u,localRect:o,obb:h,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:s,transform:a})}}return t}function cl(i,t,e,r,n,a){var o=i.length;if(o<2)return;i.sort(function(D,I){return D.rect[t]-I.rect[t]});for(var s=0,l,u=!1,h=0,c=0;c<o;c++){var f=i[c],v=f.rect;l=v[t]-s,l<0&&(v[t]-=l,f.label[t]-=l,u=!0);var d=Math.max(-l,0);h+=d,s=v[t]+v[e]}h>0&&a&&S(-h/o,0,o);var p=i[0],m=i[o-1],g,y;x(),g<0&&A(-g,.8),y<0&&A(y,.8),x(),_(g,y,1),_(y,g,-1),x(),g<0&&C(-g),y<0&&C(y);function x(){g=p.rect[t]-r,y=n-m.rect[t]-m.rect[e]}function _(D,I,M){if(D<0){var b=Math.min(I,-D);if(b>0){S(b*M,0,o);var L=b+D;L<0&&A(-L*M,1)}else A(-D*M,1)}}function S(D,I,M){D!==0&&(u=!0);for(var b=I;b<M;b++){var L=i[b],T=L.rect;T[t]+=D,L.label[t]+=D}}function A(D,I){for(var M=[],b=0,L=1;L<o;L++){var T=i[L-1].rect,k=Math.max(i[L].rect[t]-T[t]-T[e],0);M.push(k),b+=k}if(b){var P=Math.min(Math.abs(D)/b,I);if(D>0)for(var L=0;L<o-1;L++){var G=M[L]*P;S(G,0,L+1)}else for(var L=o-1;L>0;L--){var G=M[L-1]*P;S(-G,L,o)}}}function C(D){var I=D<0?-1:1;D=Math.abs(D);for(var M=Math.ceil(D/(o-1)),b=0;b<o-1;b++)if(I>0?S(M,0,b+1):S(-M,o-b-1,o),D-=M,D<=0)return}return u}function Wh(i,t,e,r){return cl(i,"y","height",t,e,r)}function fl(i){var t=[];i.sort(function(p,m){return m.priority-p.priority});var e=new ft(0,0,0,0);function r(p){if(!p.ignore){var m=p.ensureState("emphasis");m.ignore==null&&(m.ignore=!1)}p.ignore=!0}for(var n=0;n<i.length;n++){var a=i[n],o=a.axisAligned,s=a.localRect,l=a.transform,u=a.label,h=a.labelLine;e.copy(a.rect),e.width-=.1,e.height-=.1,e.x+=.05,e.y+=.05;for(var c=a.obb,f=!1,v=0;v<t.length;v++){var d=t[v];if(e.intersect(d.rect)){if(o&&d.axisAligned){f=!0;break}if(d.obb||(d.obb=new He(d.localRect,d.transform)),c||(c=new He(s,l)),c.intersect(d.obb)){f=!0;break}}}f?(r(u),h&&r(h)):(u.attr("ignore",a.defaultAttr.ignore),h&&h.attr("ignore",a.defaultAttr.labelGuideIgnore),t.push(a))}}function vl(i,t){var e=i.mapDimensionsAll("defaultedLabel"),r=e.length;if(r===1){var n=Sr(i,t,e[0]);return n!=null?n+"":null}else if(r){for(var a=[],o=0;o<e.length;o++)a.push(Sr(i,t,e[o]));return a.join(" ")}}function dl(i,t){var e=i.mapDimensionsAll("defaultedLabel");if(!N(t))return t+"";for(var r=[],n=0;n<e.length;n++){var a=i.getDimensionIndex(e[n]);a>=0&&r.push(t[a])}return r.join(" ")}function pl(i,t,e,r,n){var a=i.getArea(),o=a.x,s=a.y,l=a.width,u=a.height,h=e.get(["lineStyle","width"])||2;o-=h/2,s-=h/2,l+=h,u+=h,o=Math.floor(o),l=Math.round(l);var c=new it({shape:{x:o,y:s,width:l,height:u}});if(t){var f=i.getBaseAxis(),v=f.isHorizontal(),d=f.inverse;v?(d&&(c.shape.x+=l),c.shape.width=0):(d||(c.shape.y+=u),c.shape.height=0);var p=W(n)?function(m){n(m,c)}:null;Dt(c,{shape:{width:l,height:u,x:o,y:s}},e,null,r,p)}return c}function gl(i,t,e){var r=i.getArea(),n=V(r.r0,1),a=V(r.r,1),o=new or({shape:{cx:V(i.cx,1),cy:V(i.cy,1),r0:n,r:a,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});if(t){var s=i.getBaseAxis().dim==="angle";s?o.shape.endAngle=r.startAngle:o.shape.r=n,Dt(o,{shape:{endAngle:r.endAngle,r:a}},e)}return o}function ml(i,t,e,r,n){if(i){if(i.type==="polar")return gl(i,t,e);if(i.type==="cartesian2d")return pl(i,t,e,r,n)}else return null;return null}function En(i,t){return i.type===t}var yl={average:function(i){for(var t=0,e=0,r=0;r<i.length;r++)isNaN(i[r])||(t+=i[r],e++);return e===0?NaN:t/e},sum:function(i){for(var t=0,e=0;e<i.length;e++)t+=i[e]||0;return t},max:function(i){for(var t=-1/0,e=0;e<i.length;e++)i[e]>t&&(t=i[e]);return isFinite(t)?t:NaN},min:function(i){for(var t=1/0,e=0;e<i.length;e++)i[e]<t&&(t=i[e]);return isFinite(t)?t:NaN},nearest:function(i){return i[0]}},xl=function(i){return Math.round(i.length/2)};function _l(i){return{seriesType:i,reset:function(t,e,r){var n=t.getData(),a=t.get("sampling"),o=t.coordinateSystem,s=n.count();if(s>10&&o.type==="cartesian2d"&&a){var l=o.getBaseAxis(),u=o.getOtherAxis(l),h=l.getExtent(),c=r.getDevicePixelRatio(),f=Math.abs(h[1]-h[0])*(c||1),v=Math.round(s/f);if(isFinite(v)&&v>1){a==="lttb"&&t.setData(n.lttbDownSample(n.mapDimension(u.dim),1/v));var d=void 0;z(a)?d=yl[a]:W(a)&&(d=a),d&&t.setData(n.downSample(n.mapDimension(u.dim),1/v,d,xl))}}}}}var Bn=function(i){R(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(e,r){return dn(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e,r,n){var a=this.coordinateSystem;if(a&&a.clampData){var o=a.clampData(e),s=a.dataToPoint(o);if(n)w(a.getAxes(),function(f,v){if(f.type==="category"&&r!=null){var d=f.getTicksCoords(),p=o[v],m=r[v]==="x1"||r[v]==="y1";if(m&&(p+=1),d.length<2)return;if(d.length===2){s[v]=f.toGlobalCoord(f.getExtent()[m?1:0]);return}for(var g=void 0,y=void 0,x=1,_=0;_<d.length;_++){var S=d[_].coord,A=_===d.length-1?d[_-1].tickValue+x:d[_].tickValue;if(A===p){y=S;break}else if(A<p)g=S;else if(g!=null&&A>p){y=(S+g)/2;break}_===1&&(x=A-d[0].tickValue)}y==null&&(g?g&&(y=d[d.length-1].coord):y=d[0].coord),s[v]=f.toGlobalCoord(y)}});else{var l=this.getData(),u=l.getLayout("offset"),h=l.getLayout("size"),c=a.getBaseAxis().isHorizontal()?0:1;s[c]+=u+h/2}return s}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(ce);ce.registerClass(Bn);const Hr=Bn;var bl=function(i){R(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(){return dn(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>e&&(e=r),e},t.prototype.brushSelector=function(e,r,n){return n.rect(r.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=Xi(Hr.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(Hr);const Sl=bl;var wl=function(){function i(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return i}(),Cl=function(i){R(t,i);function t(e){var r=i.call(this,e)||this;return r.type="sausage",r}return t.prototype.getDefaultShape=function(){return new wl},t.prototype.buildPath=function(e,r){var n=r.cx,a=r.cy,o=Math.max(r.r0||0,0),s=Math.max(r.r,0),l=(s-o)*.5,u=o+l,h=r.startAngle,c=r.endAngle,f=r.clockwise,v=Math.PI*2,d=f?c-h<v:h-c<v;d||(h=c-(f?v:-v));var p=Math.cos(h),m=Math.sin(h),g=Math.cos(c),y=Math.sin(c);d?(e.moveTo(p*o+n,m*o+a),e.arc(p*u+n,m*u+a,l,-Math.PI+h,h,!f)):e.moveTo(p*s+n,m*s+a),e.arc(n,a,s,h,c,!f),e.arc(g*u+n,y*u+a,l,c-Math.PI*2,c-Math.PI,!f),o!==0&&e.arc(n,a,o,c,h,f)},t}(Ui);const Vr=Cl;function Al(i,t){t=t||{};var e=t.isRoundCap;return function(r,n,a){var o=n.position;if(!o||o instanceof Array)return wr(r,n,a);var s=i(o),l=n.distance!=null?n.distance:5,u=this.shape,h=u.cx,c=u.cy,f=u.r,v=u.r0,d=(f+v)/2,p=u.startAngle,m=u.endAngle,g=(p+m)/2,y=e?Math.abs(f-v)/2:0,x=Math.cos,_=Math.sin,S=h+f*x(p),A=c+f*_(p),C="left",D="top";switch(s){case"startArc":S=h+(v-l)*x(g),A=c+(v-l)*_(g),C="center",D="top";break;case"insideStartArc":S=h+(v+l)*x(g),A=c+(v+l)*_(g),C="center",D="bottom";break;case"startAngle":S=h+d*x(p)+re(p,l+y,!1),A=c+d*_(p)+ie(p,l+y,!1),C="right",D="middle";break;case"insideStartAngle":S=h+d*x(p)+re(p,-l+y,!1),A=c+d*_(p)+ie(p,-l+y,!1),C="left",D="middle";break;case"middle":S=h+d*x(g),A=c+d*_(g),C="center",D="middle";break;case"endArc":S=h+(f+l)*x(g),A=c+(f+l)*_(g),C="center",D="bottom";break;case"insideEndArc":S=h+(f-l)*x(g),A=c+(f-l)*_(g),C="center",D="top";break;case"endAngle":S=h+d*x(m)+re(m,l+y,!0),A=c+d*_(m)+ie(m,l+y,!0),C="left",D="middle";break;case"insideEndAngle":S=h+d*x(m)+re(m,-l+y,!0),A=c+d*_(m)+ie(m,-l+y,!0),C="right",D="middle";break;default:return wr(r,n,a)}return r=r||{},r.x=S,r.y=A,r.align=C,r.verticalAlign=D,r}}function Dl(i,t,e,r){if($t(r)){i.setTextConfig({rotation:r});return}else if(N(t)){i.setTextConfig({rotation:0});return}var n=i.shape,a=n.clockwise?n.startAngle:n.endAngle,o=n.clockwise?n.endAngle:n.startAngle,s=(a+o)/2,l,u=e(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=a;break;case"endAngle":case"insideEndAngle":l=o;break;default:i.setTextConfig({rotation:0});return}var h=Math.PI*1.5-l;u==="middle"&&h>Math.PI/2&&h<Math.PI*1.5&&(h-=Math.PI),i.setTextConfig({rotation:h})}function re(i,t,e){return t*Math.sin(i)*(e?-1:1)}function ie(i,t,e){return t*Math.cos(i)*(e?1:-1)}function Tl(i,t,e){var r=i.get("borderRadius");if(r==null)return e?{cornerRadius:0}:null;N(r)||(r=[r,r,r,r]);var n=Math.abs(t.r||0-t.r0||0);return{cornerRadius:H(r,function(a){return ze(a,n)})}}var Me=Math.max,Le=Math.min;function Ml(i,t){var e=i.getArea&&i.getArea();if(En(i,"cartesian2d")){var r=i.getBaseAxis();if(r.type!=="category"||!r.onBand){var n=t.getLayout("bandWidth");r.isHorizontal()?(e.x-=n,e.width+=n*2):(e.y-=n,e.height+=n*2)}}return e}var Ll=function(i){R(t,i);function t(){var e=i.call(this)||this;return e.type=t.type,e._isFirstFrame=!0,e}return t.prototype.render=function(e,r,n,a){this._model=e,this._removeOnRenderedListener(n),this._updateDrawMode(e);var o=e.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,r,n):this._renderNormal(e,r,n,a))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,r){this._progressiveEls=[],this._incrementalRenderLarge(e,r)},t.prototype.eachRendered=function(e){qa(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var r=e.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},t.prototype._renderNormal=function(e,r,n,a){var o=this.group,s=e.getData(),l=this._data,u=e.coordinateSystem,h=u.getBaseAxis(),c;u.type==="cartesian2d"?c=h.isHorizontal():u.type==="polar"&&(c=h.dim==="angle");var f=e.isAnimationEnabled()?e:null,v=Il(e,u);v&&this._enableRealtimeSort(v,s,n);var d=e.get("clip",!0)||v,p=Ml(u,s);o.removeClipPath();var m=e.get("roundCap",!0),g=e.get("showBackground",!0),y=e.getModel("backgroundStyle"),x=y.get("borderRadius")||0,_=[],S=this._backgroundEls,A=a&&a.isInitSort,C=a&&a.type==="changeAxisOrder";function D(b){var L=ne[u.type](s,b),T=Nl(u,c,L);return T.useStyle(y.getItemStyle()),u.type==="cartesian2d"?T.setShape("r",x):T.setShape("cornerRadius",x),_[b]=T,T}s.diff(l).add(function(b){var L=s.getItemModel(b),T=ne[u.type](s,b,L);if(g&&D(b),!(!s.hasValue(b)||!Zr[u.type](T))){var k=!1;d&&(k=$r[u.type](p,T));var P=Yr[u.type](e,s,b,T,c,f,h.model,!1,m);v&&(P.forceLabelAnimation=!0),Kr(P,s,b,L,T,e,c,u.type==="polar"),A?P.attr({shape:T}):v?Xr(v,f,P,T,b,c,!1,!1):Dt(P,{shape:T},e,b),s.setItemGraphicEl(b,P),o.add(P),P.ignore=k}}).update(function(b,L){var T=s.getItemModel(b),k=ne[u.type](s,b,T);if(g){var P=void 0;S.length===0?P=D(L):(P=S[L],P.useStyle(y.getItemStyle()),u.type==="cartesian2d"?P.setShape("r",x):P.setShape("cornerRadius",x),_[b]=P);var G=ne[u.type](s,b),Y=Gn(c,G,u);bt(P,{shape:Y},f,b)}var O=l.getItemGraphicEl(L);if(!s.hasValue(b)||!Zr[u.type](k)){o.remove(O);return}var E=!1;if(d&&(E=$r[u.type](p,k),E&&o.remove(O)),O?ja(O):O=Yr[u.type](e,s,b,k,c,f,h.model,!!O,m),v&&(O.forceLabelAnimation=!0),C){var B=O.getTextContent();if(B){var X=Ja(B);X.prevValue!=null&&(X.prevValue=X.value)}}else Kr(O,s,b,T,k,e,c,u.type==="polar");A?O.attr({shape:k}):v?Xr(v,f,O,k,b,c,!0,C):bt(O,{shape:k},e,b,null),s.setItemGraphicEl(b,O),O.ignore=E,o.add(O)}).remove(function(b){var L=l.getItemGraphicEl(b);L&&Cr(L,e,b)}).execute();var I=this._backgroundGroup||(this._backgroundGroup=new St);I.removeAll();for(var M=0;M<_.length;++M)I.add(_[M]);o.add(I),this._backgroundEls=_,this._data=s},t.prototype._renderLarge=function(e,r,n){this._clear(),jr(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,r){this._removeBackground(),jr(r,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var r=e.get("clip",!0)&&ml(e.coordinateSystem,!1,e),n=this.group;r?n.setClipPath(r):n.removeClipPath()},t.prototype._enableRealtimeSort=function(e,r,n){var a=this;if(r.count()){var o=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,e,n),this._isFirstFrame=!1;else{var s=function(l){var u=r.getItemGraphicEl(l),h=u&&u.shape;return h&&Math.abs(o.isHorizontal()?h.height:h.width)||0};this._onRendered=function(){a._updateSortWithinSameData(r,s,o,n)},n.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,r,n){var a=[];return e.each(e.mapDimension(r.dim),function(o,s){var l=n(s);l=l??NaN,a.push({dataIndex:s,mappedValue:l,ordinalNumber:o})}),a.sort(function(o,s){return s.mappedValue-o.mappedValue}),{ordinalNumbers:H(a,function(o){return o.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(e,r,n){for(var a=n.scale,o=e.mapDimension(n.dim),s=Number.MAX_VALUE,l=0,u=a.getOrdinalMeta().categories.length;l<u;++l){var h=e.rawIndexOf(o,a.getRawOrdinalNumber(l)),c=h<0?Number.MIN_VALUE:r(e.indexOfRawIndex(h));if(c>s)return!0;s=c}return!1},t.prototype._isOrderDifferentInView=function(e,r){for(var n=r.scale,a=n.getExtent(),o=Math.max(0,a[0]),s=Math.min(a[1],n.getOrdinalMeta().categories.length-1);o<=s;++o)if(e.ordinalNumbers[o]!==n.getRawOrdinalNumber(o))return!0},t.prototype._updateSortWithinSameData=function(e,r,n,a){if(this._isOrderChangedWithinSameData(e,r,n)){var o=this._dataSort(e,n,r);this._isOrderDifferentInView(o,n)&&(this._removeOnRenderedListener(a),a.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:o}))}},t.prototype._dispatchInitSort=function(e,r,n){var a=r.baseAxis,o=this._dataSort(e,a,function(s){return e.get(e.mapDimension(r.otherAxis.dim),s)});n.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",isInitSort:!0,axisId:a.index,sortInfo:o})},t.prototype.remove=function(e,r){this._clear(this._model),this._removeOnRenderedListener(r)},t.prototype.dispose=function(e,r){this._removeOnRenderedListener(r)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var r=this.group,n=this._data;e&&e.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(a){Cr(a,e,K(a).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(We),$r={cartesian2d:function(i,t){var e=t.width<0?-1:1,r=t.height<0?-1:1;e<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height);var n=i.x+i.width,a=i.y+i.height,o=Me(t.x,i.x),s=Le(t.x+t.width,n),l=Me(t.y,i.y),u=Le(t.y+t.height,a),h=s<o,c=u<l;return t.x=h&&o>n?s:o,t.y=c&&l>a?u:l,t.width=h?0:s-o,t.height=c?0:u-l,e<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height),h||c},polar:function(i,t){var e=t.r0<=t.r?1:-1;if(e<0){var r=t.r;t.r=t.r0,t.r0=r}var n=Le(t.r,i.r),a=Me(t.r0,i.r0);t.r=n,t.r0=a;var o=n-a<0;if(e<0){var r=t.r;t.r=t.r0,t.r0=r}return o}},Yr={cartesian2d:function(i,t,e,r,n,a,o,s,l){var u=new it({shape:F({},r),z2:1});if(u.__dataIndex=e,u.name="item",a){var h=u.shape,c=n?"height":"width";h[c]=0}return u},polar:function(i,t,e,r,n,a,o,s,l){var u=!n&&l?Vr:or,h=new u({shape:r,z2:1});h.name="item";var c=Nn(n);if(h.calculateTextPosition=Al(c,{isRoundCap:u===Vr}),a){var f=h.shape,v=n?"r":"endAngle",d={};f[v]=n?r.r0:r.startAngle,d[v]=r[v],(s?bt:Dt)(h,{shape:d},a)}return h}};function Il(i,t){var e=i.get("realtimeSort",!0),r=t.getBaseAxis();if(e&&r.type==="category"&&t.type==="cartesian2d")return{baseAxis:r,otherAxis:t.getOtherAxis(r)}}function Xr(i,t,e,r,n,a,o,s){var l,u;a?(u={x:r.x,width:r.width},l={y:r.y,height:r.height}):(u={y:r.y,height:r.height},l={x:r.x,width:r.width}),s||(o?bt:Dt)(e,{shape:l},t,n,null);var h=t?i.baseAxis.model:null;(o?bt:Dt)(e,{shape:u},h,n)}function Ur(i,t){for(var e=0;e<t.length;e++)if(!isFinite(i[t[e]]))return!0;return!1}var Pl=["x","y","width","height"],Ol=["cx","cy","r","startAngle","endAngle"],Zr={cartesian2d:function(i){return!Ur(i,Pl)},polar:function(i){return!Ur(i,Ol)}},ne={cartesian2d:function(i,t,e){var r=i.getItemLayout(t),n=e?Rl(e,r):0,a=r.width>0?1:-1,o=r.height>0?1:-1;return{x:r.x+a*n/2,y:r.y+o*n/2,width:r.width-a*n,height:r.height-o*n}},polar:function(i,t,e){var r=i.getItemLayout(t);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function kl(i){return i.startAngle!=null&&i.endAngle!=null&&i.startAngle===i.endAngle}function Nn(i){return function(t){var e=t?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+e;default:return r}}}(i)}function Kr(i,t,e,r,n,a,o,s){var l=t.getItemVisual(e,"style");if(s){if(!a.get("roundCap")){var h=i.shape,c=Tl(r.getModel("itemStyle"),h,!0);F(h,c),i.setShape(h)}}else{var u=r.get(["itemStyle","borderRadius"])||0;i.setShape("r",u)}i.useStyle(l);var f=r.getShallow("cursor");f&&i.attr("cursor",f);var v=s?o?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":o?n.height>=0?"bottom":"top":n.width>=0?"right":"left",d=Qa(r);Zi(i,d,{labelFetcher:a,labelDataIndex:e,defaultText:vl(a.getData(),e),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:v});var p=i.getTextContent();if(s&&p){var m=r.get(["label","position"]);i.textConfig.inside=m==="middle"?!0:null,Dl(i,m==="outside"?v:m,Nn(o),r.get(["label","rotate"]))}to(p,d,a.getRawValue(e),function(y){return dl(t,y)});var g=r.getModel(["emphasis"]);eo(i,g.get("focus"),g.get("blurScope"),g.get("disabled")),ro(i,r),kl(n)&&(i.style.fill="none",i.style.stroke="none",w(i.states,function(y){y.style&&(y.style.fill=y.style.stroke="none")}))}function Rl(i,t){var e=i.get(["itemStyle","borderColor"]);if(!e||e==="none")return 0;var r=i.get(["itemStyle","borderWidth"])||0,n=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),a=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(r,n,a)}var El=function(){function i(){}return i}(),qr=function(i){R(t,i);function t(e){var r=i.call(this,e)||this;return r.type="largeBar",r}return t.prototype.getDefaultShape=function(){return new El},t.prototype.buildPath=function(e,r){for(var n=r.points,a=this.baseDimIdx,o=1-this.baseDimIdx,s=[],l=[],u=this.barWidth,h=0;h<n.length;h+=3)l[a]=u,l[o]=n[h+2],s[a]=n[h+a],s[o]=n[h+o],e.rect(s[0],s[1],l[0],l[1])},t}(Ui);function jr(i,t,e,r){var n=i.getData(),a=n.getLayout("valueAxisHorizontal")?1:0,o=n.getLayout("largeDataIndices"),s=n.getLayout("size"),l=i.getModel("backgroundStyle"),u=n.getLayout("largeBackgroundPoints");if(u){var h=new qr({shape:{points:u},incremental:!!r,silent:!0,z2:0});h.baseDimIdx=a,h.largeDataIndices=o,h.barWidth=s,h.useStyle(l.getItemStyle()),t.add(h),e&&e.push(h)}var c=new qr({shape:{points:n.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});c.baseDimIdx=a,c.largeDataIndices=o,c.barWidth=s,t.add(c),c.useStyle(n.getVisual("style")),K(c).seriesIndex=i.seriesIndex,i.get("silent")||(c.on("mousedown",Jr),c.on("mousemove",Jr)),e&&e.push(c)}var Jr=io(function(i){var t=this,e=Bl(t,i.offsetX,i.offsetY);K(t).dataIndex=e>=0?e:null},30,!1);function Bl(i,t,e){for(var r=i.baseDimIdx,n=1-r,a=i.shape.points,o=i.largeDataIndices,s=[],l=[],u=i.barWidth,h=0,c=a.length/3;h<c;h++){var f=h*3;if(l[r]=u,l[n]=a[f+2],s[r]=a[f+r],s[n]=a[f+n],l[n]<0&&(s[n]+=l[n],l[n]=-l[n]),t>=s[0]&&t<=s[0]+l[0]&&e>=s[1]&&e<=s[1]+l[1])return o[h]}return-1}function Gn(i,t,e){if(En(e,"cartesian2d")){var r=t,n=e.getArea();return{x:i?r.x:n.x,y:i?n.y:r.y,width:i?r.width:n.width,height:i?n.height:r.height}}else{var n=e.getArea(),a=t;return{cx:n.cx,cy:n.cy,r0:i?n.r0:a.r0,r:i?n.r:a.r,startAngle:i?a.startAngle:0,endAngle:i?a.endAngle:Math.PI*2}}}function Nl(i,t,e){var r=i.type==="polar"?or:it;return new r({shape:Gn(t,e,i),silent:!0,z2:0})}const Gl=Ll;function Hh(i){i.registerChartView(Gl),i.registerSeriesModel(Sl),i.registerLayout(i.PRIORITY.VISUAL.LAYOUT,$(As,"bar")),i.registerLayout(i.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Ds("bar")),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,_l("bar")),i.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,e){var r=t.componentType||"series";e.eachComponent({mainType:r,query:t},function(n){t.sortInfo&&n.axis.setCategorySortInfo(t.sortInfo)})})}var zl=function(i){R(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(at);const Fl=zl;var Ue=function(i){R(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",ct).models[0]},t.type="cartesian2dAxis",t}(at);no(Ue,js);var zn={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},Wl=J({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},zn),vr=J({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},zn),Hl=J({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},vr),Vl=tt({logBase:10},vr);const $l={category:Wl,value:vr,time:Hl,log:Vl};var Yl={value:1,category:1,time:1,log:1};function Qr(i,t,e,r){w(Yl,function(n,a){var o=J(J({},$l[a],!0),r,!0),s=function(l){R(u,l);function u(){var h=l!==null&&l.apply(this,arguments)||this;return h.type=t+"Axis."+a,h}return u.prototype.mergeDefaultAndTheme=function(h,c){var f=ao(this),v=f?Ki(h):{},d=c.getTheme();J(h,d.get(a+"Axis")),J(h,this.getDefaultOption()),h.type=ti(h),f&&qi(h,v,f)},u.prototype.optionUpdated=function(){var h=this.option;h.type==="category"&&(this.__ordinalMeta=Ye.createByAxisModel(this))},u.prototype.getCategories=function(h){var c=this.option;if(c.type==="category")return h?c.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=t+"Axis."+a,u.defaultOption=o,u}(e);i.registerComponentModel(s)}),i.registerSubTypeDefaulter(t+"Axis",ti)}function ti(i){return i.type||(i.data?"category":"value")}var Xl=function(){function i(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return i.prototype.getAxis=function(t){return this._axes[t]},i.prototype.getAxes=function(){return H(this._dimList,function(t){return this._axes[t]},this)},i.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),he(this.getAxes(),function(e){return e.scale.type===t})},i.prototype.addAxis=function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},i}();const Ul=Xl;var Ze=["x","y"];function ei(i){return i.type==="interval"||i.type==="time"}var Zl=function(i){R(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type="cartesian2d",e.dimensions=Ze,e}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var e=this.getAxis("x").scale,r=this.getAxis("y").scale;if(!(!ei(e)||!ei(r))){var n=e.getExtent(),a=r.getExtent(),o=this.dataToPoint([n[0],a[0]]),s=this.dataToPoint([n[1],a[1]]),l=n[1]-n[0],u=a[1]-a[0];if(!(!l||!u)){var h=(s[0]-o[0])/l,c=(s[1]-o[1])/u,f=o[0]-n[0]*h,v=o[1]-a[0]*c,d=this._transform=[h,0,0,c,f,v];this._invTransform=oo([],d)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(e){var r=this.getAxis("x"),n=this.getAxis("y");return r.contain(r.toLocalCoord(e[0]))&&n.contain(n.toLocalCoord(e[1]))},t.prototype.containData=function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},t.prototype.containZone=function(e,r){var n=this.dataToPoint(e),a=this.dataToPoint(r),o=this.getArea(),s=new ft(n[0],n[1],a[0]-n[0],a[1]-n[1]);return o.intersect(s)},t.prototype.dataToPoint=function(e,r,n){n=n||[];var a=e[0],o=e[1];if(this._transform&&a!=null&&isFinite(a)&&o!=null&&isFinite(o))return Tt(n,e,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return n[0]=s.toGlobalCoord(s.dataToCoord(a,r)),n[1]=l.toGlobalCoord(l.dataToCoord(o,r)),n},t.prototype.clampData=function(e,r){var n=this.getAxis("x").scale,a=this.getAxis("y").scale,o=n.getExtent(),s=a.getExtent(),l=n.parse(e[0]),u=a.parse(e[1]);return r=r||[],r[0]=Math.min(Math.max(Math.min(o[0],o[1]),l),Math.max(o[0],o[1])),r[1]=Math.min(Math.max(Math.min(s[0],s[1]),u),Math.max(s[0],s[1])),r},t.prototype.pointToData=function(e,r){var n=[];if(this._invTransform)return Tt(n,e,this._invTransform);var a=this.getAxis("x"),o=this.getAxis("y");return n[0]=a.coordToData(a.toLocalCoord(e[0]),r),n[1]=o.coordToData(o.toLocalCoord(e[1]),r),n},t.prototype.getOtherAxis=function(e){return this.getAxis(e.dim==="x"?"y":"x")},t.prototype.getArea=function(){var e=this.getAxis("x").getGlobalExtent(),r=this.getAxis("y").getGlobalExtent(),n=Math.min(e[0],e[1]),a=Math.min(r[0],r[1]),o=Math.max(e[0],e[1])-n,s=Math.max(r[0],r[1])-a;return new ft(n,a,o,s)},t}(Ul),Kl=function(i){R(t,i);function t(e,r,n,a,o){var s=i.call(this,e,r,n)||this;return s.index=0,s.type=a||"value",s.position=o||"bottom",s}return t.prototype.isHorizontal=function(){var e=this.position;return e==="top"||e==="bottom"},t.prototype.getGlobalExtent=function(e){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),e&&r[0]>r[1]&&r.reverse(),r},t.prototype.pointToData=function(e,r){return this.coordToData(this.toLocalCoord(e[this.dim==="x"?0:1]),r)},t.prototype.setCategorySortInfo=function(e){if(this.type!=="category")return!1;this.model.option.categorySortInfo=e,this.scale.setSortInfo(e)},t}(ul);const ql=Kl;function Ke(i,t,e){e=e||{};var r=i.coordinateSystem,n=t.axis,a={},o=n.getAxesOnZeroOf()[0],s=n.position,l=o?"onZero":s,u=n.dim,h=r.getRect(),c=[h.x,h.x+h.width,h.y,h.y+h.height],f={left:0,right:1,top:0,bottom:1,onZero:2},v=t.get("offset")||0,d=u==="x"?[c[2]-v,c[3]+v]:[c[0]-v,c[1]+v];if(o){var p=o.toGlobalCoord(o.dataToCoord(0));d[f.onZero]=Math.max(Math.min(p,d[1]),d[0])}a.position=[u==="y"?d[f[l]]:c[0],u==="x"?d[f[l]]:c[3]],a.rotation=Math.PI/2*(u==="x"?0:1);var m={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=m[s],a.labelOffset=o?d[f[s]]-d[f.onZero]:0,t.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),Ft(e.labelInside,t.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var g=t.get(["axisLabel","rotate"]);return a.labelRotate=l==="top"?-g:g,a.z2=1,a}function ri(i){return i.get("coordinateSystem")==="cartesian2d"}function ii(i){var t={xAxisModel:null,yAxisModel:null};return w(t,function(e,r){var n=r.replace(/Model$/,""),a=i.getReferringComponents(n,ct).models[0];t[r]=a}),t}var Ie=Math.log;function jl(i,t,e){var r=Xt.prototype,n=r.getTicks.call(e),a=r.getTicks.call(e,!0),o=n.length-1,s=r.getInterval.call(e),l=Tn(i,t),u=l.extent,h=l.fixMin,c=l.fixMax;if(i.type==="log"){var f=Ie(i.base);u=[Ie(u[0])/f,Ie(u[1])/f]}i.setExtent(u[0],u[1]),i.calcNiceExtent({splitNumber:o,fixMin:h,fixMax:c});var v=r.getExtent.call(i);h&&(u[0]=v[0]),c&&(u[1]=v[1]);var d=r.getInterval.call(i),p=u[0],m=u[1];if(h&&c)d=(m-p)/o;else if(h)for(m=u[0]+d*o;m<u[1]&&isFinite(m)&&isFinite(u[1]);)d=De(d),m=u[0]+d*o;else if(c)for(p=u[1]-d*o;p>u[0]&&isFinite(p)&&isFinite(u[0]);)d=De(d),p=u[1]-d*o;else{var g=i.getTicks().length-1;g>o&&(d=De(d));var y=d*o;m=Math.ceil(u[1]/d)*d,p=V(m-y),p<0&&u[0]>=0?(p=0,m=V(y)):m>0&&u[1]<=0&&(m=0,p=-V(y))}var x=(n[0].value-a[0].value)/s,_=(n[o].value-a[o].value)/s;r.setExtent.call(i,p+d*x,m+d*_),r.setInterval.call(i,d),(x||_)&&r.setNiceExtent.call(i,p+d,m-d)}var Jl=function(){function i(t,e,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=Ze,this._initCartesian(t,e,r),this.model=t}return i.prototype.getRect=function(){return this._rect},i.prototype.update=function(t,e){var r=this._axesMap;this._updateScale(t,this.model);function n(o){var s,l=ge(o),u=l.length;if(u){for(var h=[],c=u-1;c>=0;c--){var f=+l[c],v=o[f],d=v.model,p=v.scale;Xe(p)&&d.get("alignTicks")&&d.get("interval")==null?h.push(v):(Gr(p,d),Xe(p)&&(s=v))}h.length&&(s||(s=h.pop(),Gr(s.scale,s.model)),w(h,function(m){jl(m.scale,m.model,s.scale)}))}}n(r.x),n(r.y);var a={};w(r.x,function(o){ni(r,"y",o,a)}),w(r.y,function(o){ni(r,"x",o,a)}),this.resize(this.model,e)},i.prototype.resize=function(t,e,r){var n=t.getBoxLayoutParams(),a=!r&&t.get("containLabel"),o=Wt(n,{width:e.getWidth(),height:e.getHeight()});this._rect=o;var s=this._axesList;l(),a&&(w(s,function(u){if(!u.model.get(["axisLabel","inside"])){var h=Zs(u);if(h){var c=u.isHorizontal()?"height":"width",f=u.model.get(["axisLabel","margin"]);o[c]-=h[c]+f,u.position==="top"?o.y+=h.height+f:u.position==="left"&&(o.x+=h.width+f)}}}),l()),w(this._coordsList,function(u){u.calcAffineTransform()});function l(){w(s,function(u){var h=u.isHorizontal(),c=h?[0,o.width]:[0,o.height],f=u.inverse?1:0;u.setExtent(c[f],c[1-f]),Ql(u,h?o.x:o.y)})}},i.prototype.getAxis=function(t,e){var r=this._axesMap[t];if(r!=null)return r[e||0]},i.prototype.getAxes=function(){return this._axesList.slice()},i.prototype.getCartesian=function(t,e){if(t!=null&&e!=null){var r="x"+t+"y"+e;return this._coordsMap[r]}Z(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var n=0,a=this._coordsList;n<a.length;n++)if(a[n].getAxis("x").index===t||a[n].getAxis("y").index===e)return a[n]},i.prototype.getCartesians=function(){return this._coordsList.slice()},i.prototype.convertToPixel=function(t,e,r){var n=this._findConvertTarget(e);return n.cartesian?n.cartesian.dataToPoint(r):n.axis?n.axis.toGlobalCoord(n.axis.dataToCoord(r)):null},i.prototype.convertFromPixel=function(t,e,r){var n=this._findConvertTarget(e);return n.cartesian?n.cartesian.pointToData(r):n.axis?n.axis.coordToData(n.axis.toLocalCoord(r)):null},i.prototype._findConvertTarget=function(t){var e=t.seriesModel,r=t.xAxisModel||e&&e.getReferringComponents("xAxis",ct).models[0],n=t.yAxisModel||e&&e.getReferringComponents("yAxis",ct).models[0],a=t.gridModel,o=this._coordsList,s,l;if(e)s=e.coordinateSystem,dt(o,s)<0&&(s=null);else if(r&&n)s=this.getCartesian(r.componentIndex,n.componentIndex);else if(r)l=this.getAxis("x",r.componentIndex);else if(n)l=this.getAxis("y",n.componentIndex);else if(a){var u=a.coordinateSystem;u===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},i.prototype.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},i.prototype._initCartesian=function(t,e,r){var n=this,a=this,o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(e.eachComponent("xAxis",u("x"),this),e.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,w(s.x,function(h,c){w(s.y,function(f,v){var d="x"+c+"y"+v,p=new Zl(d);p.master=n,p.model=t,n._coordsMap[d]=p,n._coordsList.push(p),p.addAxis(h),p.addAxis(f)})});function u(h){return function(c,f){if(Pe(c,t)){var v=c.get("position");h==="x"?v!=="top"&&v!=="bottom"&&(v=o.bottom?"top":"bottom"):v!=="left"&&v!=="right"&&(v=o.left?"right":"left"),o[v]=!0;var d=new ql(h,Xs(c),[0,0],c.get("type"),v),p=d.type==="category";d.onBand=p&&c.get("boundaryGap"),d.inverse=c.get("inverse"),c.axis=d,d.model=c,d.grid=a,d.index=f,a._axesList.push(d),s[h][f]=d,l[h]++}}}},i.prototype._updateScale=function(t,e){w(this._axesList,function(n){if(n.scale.setExtent(1/0,-1/0),n.type==="category"){var a=n.model.get("categorySortInfo");n.scale.setSortInfo(a)}}),t.eachSeries(function(n){if(ri(n)){var a=ii(n),o=a.xAxisModel,s=a.yAxisModel;if(!Pe(o,e)||!Pe(s,e))return;var l=this.getCartesian(o.componentIndex,s.componentIndex),u=n.getData(),h=l.getAxis("x"),c=l.getAxis("y");r(u,h),r(u,c)}},this);function r(n,a){w(qs(n,a.dim),function(o){a.scale.unionExtentFromData(n,o)})}},i.prototype.getTooltipAxes=function(t){var e=[],r=[];return w(this.getCartesians(),function(n){var a=t!=null&&t!=="auto"?n.getAxis(t):n.getBaseAxis(),o=n.getOtherAxis(a);dt(e,a)<0&&e.push(a),dt(r,o)<0&&r.push(o)}),{baseAxes:e,otherAxes:r}},i.create=function(t,e){var r=[];return t.eachComponent("grid",function(n,a){var o=new i(n,t,e);o.name="grid_"+a,o.resize(n,e,!0),n.coordinateSystem=o,r.push(o)}),t.eachSeries(function(n){if(ri(n)){var a=ii(n),o=a.xAxisModel,s=a.yAxisModel,l=o.getCoordSysModel(),u=l.coordinateSystem;n.coordinateSystem=u.getCartesian(o.componentIndex,s.componentIndex)}}),r},i.dimensions=Ze,i}();function Pe(i,t){return i.getCoordSysModel()===t}function ni(i,t,e,r){e.getAxesOnZeroOf=function(){return a?[a]:[]};var n=i[t],a,o=e.model,s=o.get(["axisLine","onZero"]),l=o.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)ai(n[l])&&(a=n[l]);else for(var u in n)if(n.hasOwnProperty(u)&&ai(n[u])&&!r[h(n[u])]){a=n[u];break}a&&(r[h(a)]=!0);function h(c){return c.dim+"_"+c.index}}function ai(i){return i&&i.type!=="category"&&i.type!=="time"&&Us(i)}function Ql(i,t){var e=i.getExtent(),r=e[0]+e[1];i.toGlobalCoord=i.dim==="x"?function(n){return n+t}:function(n){return r-n+t},i.toLocalCoord=i.dim==="x"?function(n){return n-t}:function(n){return r-n+t}}const tu=Jl;var vt=Math.PI,_t=function(){function i(t,e){this.group=new St,this.opt=e,this.axisModel=t,tt(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new St({x:e.position[0],y:e.position[1],rotation:e.rotation});r.updateTransform(),this._transformGroup=r}return i.prototype.hasBuilder=function(t){return!!oi[t]},i.prototype.add=function(t){oi[t](this.opt,this.axisModel,this.group,this._transformGroup)},i.prototype.getGroup=function(){return this.group},i.innerTextLayout=function(t,e,r){var n=tn(e-t),a,o;return de(n)?(o=r>0?"top":"bottom",a="center"):de(n-vt)?(o=r>0?"bottom":"top",a="center"):(o="middle",n>0&&n<vt?a=r>0?"right":"left":a=r>0?"left":"right"),{rotation:n,textAlign:a,textVerticalAlign:o}},i.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},i.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)},i}(),oi={axisLine:function(i,t,e,r){var n=t.get(["axisLine","show"]);if(n==="auto"&&i.handleAutoShown&&(n=i.handleAutoShown("axisLine")),!!n){var a=t.axis.getExtent(),o=r.transform,s=[a[0],0],l=[a[1],0],u=s[0]>l[0];o&&(Tt(s,s,o),Tt(l,l,o));var h=F({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),c=new fe({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:h,strokeContainThreshold:i.strokeContainThreshold||5,silent:!0,z2:1});ve(c.shape,c.style.lineWidth),c.anid="line",e.add(c);var f=t.get(["axisLine","symbol"]);if(f!=null){var v=t.get(["axisLine","symbolSize"]);z(f)&&(f=[f,f]),(z(v)||$t(v))&&(v=[v,v]);var d=so(t.get(["axisLine","symbolOffset"])||0,v),p=v[0],m=v[1];w([{rotate:i.rotation+Math.PI/2,offset:d[0],r:0},{rotate:i.rotation-Math.PI/2,offset:d[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(g,y){if(f[y]!=="none"&&f[y]!=null){var x=ji(f[y],-p/2,-m/2,p,m,h.stroke,!0),_=g.r+g.offset,S=u?l:s;x.attr({rotation:g.rotate,x:S[0]+_*Math.cos(i.rotation),y:S[1]-_*Math.sin(i.rotation),silent:!0,z2:11}),e.add(x)}})}}},axisTickLabel:function(i,t,e,r){var n=iu(e,r,t,i),a=au(e,r,t,i);if(ru(t,a,n),nu(e,r,t,i.tickDirection),t.get(["axisLabel","hideOverlap"])){var o=hl(H(a,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));fl(o)}},axisName:function(i,t,e,r){var n=Ft(i.axisName,t.get("name"));if(n){var a=t.get("nameLocation"),o=i.nameDirection,s=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=t.axis.getExtent(),h=u[0]>u[1]?-1:1,c=[a==="start"?u[0]-h*l:a==="end"?u[1]+h*l:(u[0]+u[1])/2,li(a)?i.labelOffset+o*l:0],f,v=t.get("nameRotate");v!=null&&(v=v*vt/180);var d;li(a)?f=_t.innerTextLayout(i.rotation,v??i.rotation,o):(f=eu(i.rotation,a,v||0,u),d=i.axisNameAvailableWidth,d!=null&&(d=Math.abs(d/Math.sin(f.rotation)),!isFinite(d)&&(d=null)));var p=s.getFont(),m=t.get("nameTruncate",!0)||{},g=m.ellipsis,y=Ft(i.nameTruncateMaxWidth,m.maxWidth,d),x=new ot({x:c[0],y:c[1],rotation:f.rotation,silent:_t.isLabelSilent(t),style:Mt(s,{text:n,font:p,overflow:"truncate",width:y,ellipsis:g,fill:s.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:s.get("align")||f.textAlign,verticalAlign:s.get("verticalAlign")||f.textVerticalAlign}),z2:1});if(Ji({el:x,componentModel:t,itemName:n}),x.__fullText=n,x.anid="name",t.get("triggerEvent")){var _=_t.makeAxisEventDataBase(t);_.targetType="axisName",_.name=n,K(x).eventData=_}r.add(x),x.updateTransform(),e.add(x),x.decomposeTransform()}}};function eu(i,t,e,r){var n=tn(e-i),a,o,s=r[0]>r[1],l=t==="start"&&!s||t!=="start"&&s;return de(n-vt/2)?(o=l?"bottom":"top",a="center"):de(n-vt*1.5)?(o=l?"top":"bottom",a="center"):(o="middle",n<vt*1.5&&n>vt/2?a=l?"left":"right":a=l?"right":"left"),{rotation:n,textAlign:a,textVerticalAlign:o}}function ru(i,t,e){if(!Mn(i.axis)){var r=i.get(["axisLabel","showMinLabel"]),n=i.get(["axisLabel","showMaxLabel"]);t=t||[],e=e||[];var a=t[0],o=t[1],s=t[t.length-1],l=t[t.length-2],u=e[0],h=e[1],c=e[e.length-1],f=e[e.length-2];r===!1?(j(a),j(u)):si(a,o)&&(r?(j(o),j(h)):(j(a),j(u))),n===!1?(j(s),j(c)):si(l,s)&&(n?(j(l),j(f)):(j(s),j(c)))}}function j(i){i&&(i.ignore=!0)}function si(i,t){var e=i&&i.getBoundingRect().clone(),r=t&&t.getBoundingRect().clone();if(!(!e||!r)){var n=lo([]);return Qi(n,n,-i.rotation),e.applyTransform(Ar([],n,i.getLocalTransform())),r.applyTransform(Ar([],n,t.getLocalTransform())),e.intersect(r)}}function li(i){return i==="middle"||i==="center"}function Fn(i,t,e,r,n){for(var a=[],o=[],s=[],l=0;l<i.length;l++){var u=i[l].coord;o[0]=u,o[1]=0,s[0]=u,s[1]=e,t&&(Tt(o,o,t),Tt(s,s,t));var h=new fe({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:r,z2:2,autoBatch:!0,silent:!0});ve(h.shape,h.style.lineWidth),h.anid=n+"_"+i[l].tickValue,a.push(h)}return a}function iu(i,t,e,r){var n=e.axis,a=e.getModel("axisTick"),o=a.get("show");if(o==="auto"&&r.handleAutoShown&&(o=r.handleAutoShown("axisTick")),!(!o||n.scale.isBlank())){for(var s=a.getModel("lineStyle"),l=r.tickDirection*a.get("length"),u=n.getTicksCoords(),h=Fn(u,t.transform,l,tt(s.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}),"ticks"),c=0;c<h.length;c++)i.add(h[c]);return h}}function nu(i,t,e,r){var n=e.axis,a=e.getModel("minorTick");if(!(!a.get("show")||n.scale.isBlank())){var o=n.getMinorTicksCoords();if(o.length)for(var s=a.getModel("lineStyle"),l=r*a.get("length"),u=tt(s.getLineStyle(),tt(e.getModel("axisTick").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})),h=0;h<o.length;h++)for(var c=Fn(o[h],t.transform,l,u,"minorticks_"+h),f=0;f<c.length;f++)i.add(c[f])}}function au(i,t,e,r){var n=e.axis,a=Ft(r.axisLabelShow,e.get(["axisLabel","show"]));if(!(!a||n.scale.isBlank())){var o=e.getModel("axisLabel"),s=o.get("margin"),l=n.getViewLabels(),u=(Ft(r.labelRotate,o.get("rotate"))||0)*vt/180,h=_t.innerTextLayout(r.rotation,u,r.labelDirection),c=e.getCategories&&e.getCategories(!0),f=[],v=_t.isLabelSilent(e),d=e.get("triggerEvent");return w(l,function(p,m){var g=n.scale.type==="ordinal"?n.scale.getRawOrdinalNumber(p.tickValue):p.tickValue,y=p.formattedLabel,x=p.rawLabel,_=o;if(c&&c[g]){var S=c[g];Z(S)&&S.textStyle&&(_=new ht(S.textStyle,o,e.ecModel))}var A=_.getTextColor()||e.get(["axisLine","lineStyle","color"]),C=n.dataToCoord(g),D=new ot({x:C,y:r.labelOffset+r.labelDirection*s,rotation:h.rotation,silent:v,z2:10+(p.level||0),style:Mt(_,{text:y,align:_.getShallow("align",!0)||h.textAlign,verticalAlign:_.getShallow("verticalAlign",!0)||_.getShallow("baseline",!0)||h.textVerticalAlign,fill:W(A)?A(n.type==="category"?x:n.type==="value"?g+"":g,m):A})});if(D.anid="label_"+g,d){var I=_t.makeAxisEventDataBase(e);I.targetType="axisLabel",I.value=x,I.tickIndex=m,n.type==="category"&&(I.dataIndex=g),K(D).eventData=I}t.add(D),D.updateTransform(),f.push(D),i.add(D),D.decomposeTransform()}),f}}const Wn=_t;function ou(i,t){var e={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return su(e,i,t),e.seriesInvolved&&uu(e,i),e}function su(i,t,e){var r=t.getComponent("tooltip"),n=t.getComponent("axisPointer"),a=n.get("link",!0)||[],o=[];w(e.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=Vt(s.model),u=i.coordSysAxesInfo[l]={};i.coordSysMap[l]=s;var h=s.model,c=h.getModel("tooltip",r);if(w(s.getAxes(),$(p,!1,null)),s.getTooltipAxes&&r&&c.get("show")){var f=c.get("trigger")==="axis",v=c.get(["axisPointer","type"])==="cross",d=s.getTooltipAxes(c.get(["axisPointer","axis"]));(f||v)&&w(d.baseAxes,$(p,v?"cross":!0,f)),v&&w(d.otherAxes,$(p,"cross",!1))}function p(m,g,y){var x=y.model.getModel("axisPointer",n),_=x.get("show");if(!(!_||_==="auto"&&!m&&!qe(x))){g==null&&(g=x.get("triggerTooltip")),x=m?lu(y,c,n,t,m,g):x;var S=x.get("snap"),A=x.get("triggerEmphasis"),C=Vt(y.model),D=g||S||y.type==="category",I=i.axesInfo[C]={key:C,axis:y,coordSys:s,axisPointerModel:x,triggerTooltip:g,triggerEmphasis:A,involveSeries:D,snap:S,useHandle:qe(x),seriesModels:[],linkGroup:null};u[C]=I,i.seriesInvolved=i.seriesInvolved||D;var M=hu(a,y);if(M!=null){var b=o[M]||(o[M]={axesInfo:{}});b.axesInfo[C]=I,b.mapper=a[M].mapper,I.linkGroup=b}}}})}function lu(i,t,e,r,n,a){var o=t.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};w(s,function(f){l[f]=Yt(o.get(f))}),l.snap=i.type!=="category"&&!!a,o.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),n==="cross"){var h=o.get(["label","show"]);if(u.show=h??!0,!a){var c=l.lineStyle=o.get("crossStyle");c&&tt(u,c.textStyle)}}return i.model.getModel("axisPointer",new ht(l,e,r))}function uu(i,t){t.eachSeries(function(e){var r=e.coordinateSystem,n=e.get(["tooltip","trigger"],!0),a=e.get(["tooltip","show"],!0);!r||n==="none"||n===!1||n==="item"||a===!1||e.get(["axisPointer","show"],!0)===!1||w(i.coordSysAxesInfo[Vt(r.model)],function(o){var s=o.axis;r.getAxis(s.dim)===s&&(o.seriesModels.push(e),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=e.getData().count())})})}function hu(i,t){for(var e=t.model,r=t.dim,n=0;n<i.length;n++){var a=i[n]||{};if(Oe(a[r+"AxisId"],e.id)||Oe(a[r+"AxisIndex"],e.componentIndex)||Oe(a[r+"AxisName"],e.name))return n}}function Oe(i,t){return i==="all"||N(i)&&dt(i,t)>=0||i===t}function cu(i){var t=dr(i);if(t){var e=t.axisPointerModel,r=t.axis.scale,n=e.option,a=e.get("status"),o=e.get("value");o!=null&&(o=r.parse(o));var s=qe(e);a==null&&(n.status=s?"show":"hide");var l=r.getExtent().slice();l[0]>l[1]&&l.reverse(),(o==null||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),n.value=o,s&&(n.status=t.axis.scale.isBlank()?"hide":"show")}}function dr(i){var t=(i.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[Vt(i)]}function fu(i){var t=dr(i);return t&&t.axisPointerModel}function qe(i){return!!i.get(["handle","show"])}function Vt(i){return i.type+"||"+i.id}var ui={},vu=function(i){R(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,r,n,a){this.axisPointerClass&&cu(e),i.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(e,n,!0)},t.prototype.updateAxisPointer=function(e,r,n,a){this._doUpdateAxisPointerClass(e,n,!1)},t.prototype.remove=function(e,r){var n=this._axisPointer;n&&n.remove(r)},t.prototype.dispose=function(e,r){this._disposeAxisPointer(r),i.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(e,r,n){var a=t.getAxisPointerClass(this.axisPointerClass);if(a){var o=fu(e);o?(this._axisPointer||(this._axisPointer=new a)).render(e,o,r,n):this._disposeAxisPointer(r)}},t.prototype._disposeAxisPointer=function(e){this._axisPointer&&this._axisPointer.dispose(e),this._axisPointer=null},t.registerAxisPointerClass=function(e,r){ui[e]=r},t.getAxisPointerClass=function(e){return e&&ui[e]},t.type="axis",t}(pt);const Hn=vu;var je=Lt();function du(i,t,e,r){var n=e.axis;if(!n.scale.isBlank()){var a=e.getModel("splitArea"),o=a.getModel("areaStyle"),s=o.get("color"),l=r.coordinateSystem.getRect(),u=n.getTicksCoords({tickModel:a,clamp:!0});if(u.length){var h=s.length,c=je(i).splitAreaColors,f=Q(),v=0;if(c)for(var d=0;d<u.length;d++){var p=c.get(u[d].tickValue);if(p!=null){v=(p+(h-1)*d)%h;break}}var m=n.toGlobalCoord(u[0].coord),g=o.getAreaStyle();s=N(s)?s:[s];for(var d=1;d<u.length;d++){var y=n.toGlobalCoord(u[d].coord),x=void 0,_=void 0,S=void 0,A=void 0;n.isHorizontal()?(x=m,_=l.y,S=y-x,A=l.height,m=x+S):(x=l.x,_=m,S=l.width,A=y-_,m=_+A);var C=u[d-1].tickValue;C!=null&&f.set(C,v),t.add(new it({anid:C!=null?"area_"+C:null,shape:{x,y:_,width:S,height:A},style:tt({fill:s[v]},g),autoBatch:!0,silent:!0})),v=(v+1)%h}je(i).splitAreaColors=f}}}function pu(i){je(i).splitAreaColors=null}var gu=["axisLine","axisTickLabel","axisName"],mu=["splitArea","splitLine","minorSplitLine"],Vn=function(i){R(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="CartesianAxisPointer",e}return t.prototype.render=function(e,r,n,a){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new St,this.group.add(this._axisGroup),!!e.get("show")){var s=e.getCoordSysModel(),l=Ke(s,e),u=new Wn(e,F({handleAutoShown:function(c){for(var f=s.coordinateSystem.getCartesians(),v=0;v<f.length;v++)if(Xe(f[v].getOtherAxis(e.axis).scale))return!0;return!1}},l));w(gu,u.add,u),this._axisGroup.add(u.getGroup()),w(mu,function(c){e.get([c,"show"])&&yu[c](this,this._axisGroup,e,s)},this);var h=a&&a.type==="changeAxisOrder"&&a.isInitSort;h||uo(o,this._axisGroup,e),i.prototype.render.call(this,e,r,n,a)}},t.prototype.remove=function(){pu(this)},t.type="cartesianAxis",t}(Hn),yu={splitLine:function(i,t,e,r){var n=e.axis;if(!n.scale.isBlank()){var a=e.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=N(s)?s:[s];for(var l=r.coordinateSystem.getRect(),u=n.isHorizontal(),h=0,c=n.getTicksCoords({tickModel:a}),f=[],v=[],d=o.getLineStyle(),p=0;p<c.length;p++){var m=n.toGlobalCoord(c[p].coord);u?(f[0]=m,f[1]=l.y,v[0]=m,v[1]=l.y+l.height):(f[0]=l.x,f[1]=m,v[0]=l.x+l.width,v[1]=m);var g=h++%s.length,y=c[p].tickValue,x=new fe({anid:y!=null?"line_"+c[p].tickValue:null,autoBatch:!0,shape:{x1:f[0],y1:f[1],x2:v[0],y2:v[1]},style:tt({stroke:s[g]},d),silent:!0});ve(x.shape,d.lineWidth),t.add(x)}}},minorSplitLine:function(i,t,e,r){var n=e.axis,a=e.getModel("minorSplitLine"),o=a.getModel("lineStyle"),s=r.coordinateSystem.getRect(),l=n.isHorizontal(),u=n.getMinorTicksCoords();if(u.length)for(var h=[],c=[],f=o.getLineStyle(),v=0;v<u.length;v++)for(var d=0;d<u[v].length;d++){var p=n.toGlobalCoord(u[v][d].coord);l?(h[0]=p,h[1]=s.y,c[0]=p,c[1]=s.y+s.height):(h[0]=s.x,h[1]=p,c[0]=s.x+s.width,c[1]=p);var m=new fe({anid:"minor_line_"+u[v][d].tickValue,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:c[0],y2:c[1]},style:f,silent:!0});ve(m.shape,f.lineWidth),t.add(m)}},splitArea:function(i,t,e,r){du(i,t,e,r)}},$n=function(i){R(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.type="xAxis",t}(Vn),xu=function(i){R(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=$n.type,e}return t.type="yAxis",t}(Vn),_u=function(i){R(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type="grid",e}return t.prototype.render=function(e,r){this.group.removeAll(),e.get("show")&&this.group.add(new it({shape:e.coordinateSystem.getRect(),style:tt({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(pt),hi={offset:0};function bu(i){i.registerComponentView(_u),i.registerComponentModel(Fl),i.registerCoordinateSystem("cartesian2d",tu),Qr(i,"x",Ue,hi),Qr(i,"y",Ue,hi),i.registerComponentView($n),i.registerComponentView(xu),i.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}var yt=Lt(),ci=Yt,ke=q,Su=function(){function i(){this._dragging=!1,this.animationThreshold=15}return i.prototype.render=function(t,e,r,n){var a=e.get("value"),o=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=r,!(!n&&this._lastValue===a&&this._lastStatus===o)){this._lastValue=a,this._lastStatus=o;var s=this._group,l=this._handle;if(!o||o==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var u={};this.makeElOption(u,a,t,e,r);var h=u.graphicKey;h!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=h;var c=this._moveAnimation=this.determineAnimation(t,e);if(!s)s=this._group=new St,this.createPointerEl(s,u,t,e),this.createLabelEl(s,u,t,e),r.getZr().add(s);else{var f=$(fi,e,c);this.updatePointerEl(s,u,f),this.updateLabelEl(s,u,f,e)}di(s,e,!0),this._renderHandle(a)}},i.prototype.remove=function(t){this.clear(t)},i.prototype.dispose=function(t){this.clear(t)},i.prototype.determineAnimation=function(t,e){var r=e.get("animation"),n=t.axis,a=n.type==="category",o=e.get("snap");if(!o&&!a)return!1;if(r==="auto"||r==null){var s=this.animationThreshold;if(a&&n.getBandWidth()>s)return!0;if(o){var l=dr(t).seriesDataCount,u=n.getExtent();return Math.abs(u[0]-u[1])/l>s}return!1}return r===!0},i.prototype.makeElOption=function(t,e,r,n,a){},i.prototype.createPointerEl=function(t,e,r,n){var a=e.pointer;if(a){var o=yt(t).pointerEl=new ho[a.type](ci(e.pointer));t.add(o)}},i.prototype.createLabelEl=function(t,e,r,n){if(e.label){var a=yt(t).labelEl=new ot(ci(e.label));t.add(a),vi(a,n)}},i.prototype.updatePointerEl=function(t,e,r){var n=yt(t).pointerEl;n&&e.pointer&&(n.setStyle(e.pointer.style),r(n,{shape:e.pointer.shape}))},i.prototype.updateLabelEl=function(t,e,r,n){var a=yt(t).labelEl;a&&(a.setStyle(e.label.style),r(a,{x:e.label.x,y:e.label.y}),vi(a,n))},i.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var e=this._axisPointerModel,r=this._api.getZr(),n=this._handle,a=e.getModel("handle"),o=e.get("status");if(!a.get("show")||!o||o==="hide"){n&&r.remove(n),this._handle=null;return}var s;this._handle||(s=!0,n=this._handle=en(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){co(u.event)},onmousedown:ke(this._onHandleDragMove,this,0,0),drift:ke(this._onHandleDragMove,this),ondragend:ke(this._onHandleDragEnd,this)}),r.add(n)),di(n,e,!1),n.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=a.get("size");N(l)||(l=[l,l]),n.scaleX=l[0]/2,n.scaleY=l[1]/2,rn(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,s)}},i.prototype._moveHandleToValue=function(t,e){fi(this._axisPointerModel,!e&&this._moveAnimation,this._handle,Re(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},i.prototype._onHandleDragMove=function(t,e){var r=this._handle;if(r){this._dragging=!0;var n=this.updateHandleTransform(Re(r),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=n,r.stopAnimation(),r.attr(Re(n)),yt(r).lastProp=null,this._doDispatchAxisPointer()}},i.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var e=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},i.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},i.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),r=this._group,n=this._handle;e&&r&&(this._lastGraphicKey=null,r&&e.remove(r),n&&e.remove(n),this._group=null,this._handle=null,this._payloadInfo=null),Ve(this,"_doDispatchAxisPointer")},i.prototype.doClear=function(){},i.prototype.buildLabel=function(t,e,r){return r=r||0,{x:t[r],y:t[1-r],width:e[r],height:e[1-r]}},i}();function fi(i,t,e,r){Yn(yt(e).lastProp,r)||(yt(e).lastProp=r,t?bt(e,r,i):(e.stopAnimation(),e.attr(r)))}function Yn(i,t){if(Z(i)&&Z(t)){var e=!0;return w(t,function(r,n){e=e&&Yn(i[n],r)}),!!e}else return i===t}function vi(i,t){i[t.get(["label","show"])?"show":"hide"]()}function Re(i){return{x:i.x||0,y:i.y||0,rotation:i.rotation||0}}function di(i,t,e){var r=t.get("z"),n=t.get("zlevel");i&&i.traverse(function(a){a.type!=="group"&&(r!=null&&(a.z=r),n!=null&&(a.zlevel=n),a.silent=e)})}const wu=Su;function Cu(i){var t=i.get("type"),e=i.getModel(t+"Style"),r;return t==="line"?(r=e.getLineStyle(),r.fill=null):t==="shadow"&&(r=e.getAreaStyle(),r.stroke=null),r}function Au(i,t,e,r,n){var a=e.get("value"),o=Xn(a,t.axis,t.ecModel,e.get("seriesDataIndices"),{precision:e.get(["label","precision"]),formatter:e.get(["label","formatter"])}),s=e.getModel("label"),l=sr(s.get("padding")||0),u=s.getFont(),h=Yi(o,u),c=n.position,f=h.width+l[1]+l[3],v=h.height+l[0]+l[2],d=n.align;d==="right"&&(c[0]-=f),d==="center"&&(c[0]-=f/2);var p=n.verticalAlign;p==="bottom"&&(c[1]-=v),p==="middle"&&(c[1]-=v/2),Du(c,f,v,r);var m=s.get("backgroundColor");(!m||m==="auto")&&(m=t.get(["axisLine","lineStyle","color"])),i.label={x:c[0],y:c[1],style:Mt(s,{text:o,font:u,fill:s.getTextColor(),padding:l,backgroundColor:m}),z2:10}}function Du(i,t,e,r){var n=r.getWidth(),a=r.getHeight();i[0]=Math.min(i[0]+t,n)-t,i[1]=Math.min(i[1]+e,a)-e,i[0]=Math.max(i[0],0),i[1]=Math.max(i[1],0)}function Xn(i,t,e,r,n){i=t.scale.parse(i);var a=t.scale.getLabel({value:i},{precision:n.precision}),o=n.formatter;if(o){var s={value:cr(t,{value:i}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};w(r,function(l){var u=e.getSeriesByIndex(l.seriesIndex),h=l.dataIndexInside,c=u&&u.getDataParams(h);c&&s.seriesData.push(c)}),z(o)?a=o.replace("{value}",a):W(o)&&(a=o(s))}return a}function Un(i,t,e){var r=po();return Qi(r,r,e.rotation),fo(r,r,e.position),vo([i.dataToCoord(t),(e.labelOffset||0)+(e.labelDirection||1)*(e.labelMargin||0)],r)}function Tu(i,t,e,r,n,a){var o=Wn.innerTextLayout(e.rotation,0,e.labelDirection);e.labelMargin=n.get(["label","margin"]),Au(t,r,n,a,{position:Un(r.axis,i,e),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function Mu(i,t,e){return e=e||0,{x1:i[e],y1:i[1-e],x2:t[e],y2:t[1-e]}}function Lu(i,t,e){return e=e||0,{x:i[e],y:i[1-e],width:t[e],height:t[1-e]}}var Iu=function(i){R(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.makeElOption=function(e,r,n,a,o){var s=n.axis,l=s.grid,u=a.get("type"),h=pi(l,s).getOtherAxis(s).getGlobalExtent(),c=s.toGlobalCoord(s.dataToCoord(r,!0));if(u&&u!=="none"){var f=Cu(a),v=Pu[u](s,c,h);v.style=f,e.graphicKey=v.type,e.pointer=v}var d=Ke(l.model,n);Tu(r,e,d,n,a,o)},t.prototype.getHandleTransform=function(e,r,n){var a=Ke(r.axis.grid.model,r,{labelInside:!1});a.labelMargin=n.get(["handle","margin"]);var o=Un(r.axis,e,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,r,n,a){var o=n.axis,s=o.grid,l=o.getGlobalExtent(!0),u=pi(s,o).getOtherAxis(o).getGlobalExtent(),h=o.dim==="x"?0:1,c=[e.x,e.y];c[h]+=r[h],c[h]=Math.min(l[1],c[h]),c[h]=Math.max(l[0],c[h]);var f=(u[1]+u[0])/2,v=[f,f];v[h]=c[h];var d=[{verticalAlign:"middle"},{align:"center"}];return{x:c[0],y:c[1],rotation:e.rotation,cursorPoint:v,tooltipOption:d[h]}},t}(wu);function pi(i,t){var e={};return e[t.dim+"AxisIndex"]=t.index,i.getCartesian(e)}var Pu={line:function(i,t,e){var r=Mu([t,e[0]],[t,e[1]],gi(i));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(i,t,e){var r=Math.max(1,i.getBandWidth()),n=e[1]-e[0];return{type:"Rect",shape:Lu([t-r/2,e[0]],[r,n],gi(i))}}};function gi(i){return i.dim==="x"?0:1}const Ou=Iu;var ku=function(i){R(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(at);const Ru=ku;var nt=Lt(),Eu=w;function Zn(i,t,e){if(!U.node){var r=t.getZr();nt(r).records||(nt(r).records={}),Bu(r,t);var n=nt(r).records[i]||(nt(r).records[i]={});n.handler=e}}function Bu(i,t){if(nt(i).initialized)return;nt(i).initialized=!0,e("click",$(mi,"click")),e("mousemove",$(mi,"mousemove")),e("globalout",Gu);function e(r,n){i.on(r,function(a){var o=zu(t);Eu(nt(i).records,function(s){s&&n(s,a,o.dispatchAction)}),Nu(o.pendings,t)})}}function Nu(i,t){var e=i.showTip.length,r=i.hideTip.length,n;e?n=i.showTip[e-1]:r&&(n=i.hideTip[r-1]),n&&(n.dispatchAction=null,t.dispatchAction(n))}function Gu(i,t,e){i.handler("leave",null,e)}function mi(i,t,e,r){t.handler(i,e,r)}function zu(i){var t={showTip:[],hideTip:[]},e=function(r){var n=t[r.type];n?n.push(r):(r.dispatchAction=e,i.dispatchAction(r))};return{dispatchAction:e,pendings:t}}function Je(i,t){if(!U.node){var e=t.getZr(),r=(nt(e).records||{})[i];r&&(nt(e).records[i]=null)}}var Fu=function(i){R(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,r,n){var a=r.getComponent("tooltip"),o=e.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";Zn("axisPointer",n,function(s,l,u){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&u({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(e,r){Je("axisPointer",r)},t.prototype.dispose=function(e,r){Je("axisPointer",r)},t.type="axisPointer",t}(pt);const Wu=Fu;function Kn(i,t){var e=[],r=i.seriesIndex,n;if(r==null||!(n=t.getSeriesByIndex(r)))return{point:[]};var a=n.getData(),o=go(a,i);if(o==null||o<0||N(o))return{point:[]};var s=a.getItemGraphicEl(o),l=n.coordinateSystem;if(n.getTooltipPosition)e=n.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)if(i.isStacked){var u=l.getBaseAxis(),h=l.getOtherAxis(u),c=h.dim,f=u.dim,v=c==="x"||c==="radius"?1:0,d=a.mapDimension(f),p=[];p[v]=a.get(d,o),p[1-v]=a.get(a.getCalculationInfo("stackResultDimension"),o),e=l.dataToPoint(p)||[]}else e=l.dataToPoint(a.getValues(H(l.dimensions,function(g){return a.mapDimension(g)}),o))||[];else if(s){var m=s.getBoundingRect().clone();m.applyTransform(s.transform),e=[m.x+m.width/2,m.y+m.height/2]}return{point:e,el:s}}var yi=Lt();function Hu(i,t,e){var r=i.currTrigger,n=[i.x,i.y],a=i,o=i.dispatchAction||q(e.dispatchAction,e),s=t.getComponent("axisPointer").coordSysAxesInfo;if(s){ue(n)&&(n=Kn({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},t).point);var l=ue(n),u=a.axesInfo,h=s.axesInfo,c=r==="leave"||ue(n),f={},v={},d={list:[],map:{}},p={showPointer:$($u,v),showTooltip:$(Yu,d)};w(s.coordSysMap,function(g,y){var x=l||g.containPoint(n);w(s.coordSysAxesInfo[y],function(_,S){var A=_.axis,C=Ku(u,_);if(!c&&x&&(!u||C)){var D=C&&C.value;D==null&&!l&&(D=A.pointToData(n)),D!=null&&xi(_,D,p,!1,f)}})});var m={};return w(h,function(g,y){var x=g.linkGroup;x&&!v[y]&&w(x.axesInfo,function(_,S){var A=v[S];if(_!==g&&A){var C=A.value;x.mapper&&(C=g.axis.scale.parse(x.mapper(C,_i(_),_i(g)))),m[g.key]=C}})}),w(m,function(g,y){xi(h[y],g,p,!0,f)}),Xu(v,h,f),Uu(d,n,i,o),Zu(h,o,e),f}}function xi(i,t,e,r,n){var a=i.axis;if(!(a.scale.isBlank()||!a.containData(t))){if(!i.involveSeries){e.showPointer(i,t);return}var o=Vu(t,i),s=o.payloadBatch,l=o.snapToValue;s[0]&&n.seriesIndex==null&&F(n,s[0]),!r&&i.snap&&a.containData(l)&&l!=null&&(t=l),e.showPointer(i,t,s),e.showTooltip(i,o,l)}}function Vu(i,t){var e=t.axis,r=e.dim,n=i,a=[],o=Number.MAX_VALUE,s=-1;return w(t.seriesModels,function(l,u){var h=l.getData().mapDimensionsAll(r),c,f;if(l.getAxisTooltipData){var v=l.getAxisTooltipData(h,i,e);f=v.dataIndices,c=v.nestestValue}else{if(f=l.getData().indicesOfNearest(h[0],i,e.type==="category"?.5:null),!f.length)return;c=l.getData().get(h[0],f[0])}if(!(c==null||!isFinite(c))){var d=i-c,p=Math.abs(d);p<=o&&((p<o||d>=0&&s<0)&&(o=p,s=d,n=c,a.length=0),w(f,function(m){a.push({seriesIndex:l.seriesIndex,dataIndexInside:m,dataIndex:l.getData().getRawIndex(m)})}))}}),{payloadBatch:a,snapToValue:n}}function $u(i,t,e,r){i[t.key]={value:e,payloadBatch:r}}function Yu(i,t,e,r){var n=e.payloadBatch,a=t.axis,o=a.model,s=t.axisPointerModel;if(!(!t.triggerTooltip||!n.length)){var l=t.coordSys.model,u=Vt(l),h=i.map[u];h||(h=i.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},i.list.push(h)),h.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:r,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:n.slice()})}}function Xu(i,t,e){var r=e.axesInfo=[];w(t,function(n,a){var o=n.axisPointerModel.option,s=i[a];s?(!n.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!n.useHandle&&(o.status="hide"),o.status==="show"&&r.push({axisDim:n.axis.dim,axisIndex:n.axis.model.componentIndex,value:o.value})})}function Uu(i,t,e,r){if(ue(t)||!i.list.length){r({type:"hideTip"});return}var n=((i.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:e.tooltipOption,position:e.position,dataIndexInside:n.dataIndexInside,dataIndex:n.dataIndex,seriesIndex:n.seriesIndex,dataByCoordSys:i.list})}function Zu(i,t,e){var r=e.getZr(),n="axisPointerLastHighlights",a=yi(r)[n]||{},o=yi(r)[n]={};w(i,function(u,h){var c=u.axisPointerModel.option;c.status==="show"&&u.triggerEmphasis&&w(c.seriesDataIndices,function(f){var v=f.seriesIndex+" | "+f.dataIndex;o[v]=f})});var s=[],l=[];w(a,function(u,h){!o[h]&&l.push(u)}),w(o,function(u,h){!a[h]&&s.push(u)}),l.length&&e.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&e.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function Ku(i,t){for(var e=0;e<(i||[]).length;e++){var r=i[e];if(t.axis.dim===r.axisDim&&t.axis.model.componentIndex===r.axisIndex)return r}}function _i(i){var t=i.axis.model,e={},r=e.axisDim=i.axis.dim;return e.axisIndex=e[r+"AxisIndex"]=t.componentIndex,e.axisName=e[r+"AxisName"]=t.name,e.axisId=e[r+"AxisId"]=t.id,e}function ue(i){return!i||i[0]==null||isNaN(i[0])||i[1]==null||isNaN(i[1])}function qn(i){Hn.registerAxisPointerClass("CartesianAxisPointer",Ou),i.registerComponentModel(Ru),i.registerComponentView(Wu),i.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var e=t.axisPointer.link;e&&!N(e)&&(t.axisPointer.link=[e])}}),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=ou(t,e)}),i.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},Hu)}function Vh(i){wt(bu),wt(qn)}function qu(i,t){var e=sr(t.get("padding")),r=t.getItemStyle(["color","opacity"]);return r.fill=t.get("backgroundColor"),i=new it({shape:{x:i.x-e[3],y:i.y-e[0],width:i.width+e[1]+e[3],height:i.height+e[0]+e[2],r:t.get("borderRadius")},style:r,silent:!0,z2:-1}),i}var ju=function(i){R(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(at);const Ju=ju;function jn(i){var t=i.get("confine");return t!=null?!!t:i.get("renderMode")==="richText"}function Jn(i){if(U.domSupported){for(var t=document.documentElement.style,e=0,r=i.length;e<r;e++)if(i[e]in t)return i[e]}}var Qn=Jn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Qu=Jn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function ta(i,t){if(!i)return t;t=nn(t,!0);var e=i.indexOf(t);return i=e===-1?t:"-"+i.slice(0,e)+"-"+t,i.toLowerCase()}function th(i,t){var e=i.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(i);return e?t?e[t]:e:null}var eh=ta(Qu,"transition"),pr=ta(Qn,"transform"),rh="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(U.transform3dSupported?"will-change:transform;":"");function ih(i){return i=i==="left"?"right":i==="right"?"left":i==="top"?"bottom":"top",i}function nh(i,t,e){if(!z(e)||e==="inside")return"";var r=i.get("backgroundColor"),n=i.get("borderWidth");t=pe(t);var a=ih(e),o=Math.max(Math.round(n)*1.5,6),s="",l=pr+":",u;dt(["left","right"],a)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(u=a==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(u=a==="top"?225:45)+"deg)");var h=u*Math.PI/180,c=o+n,f=c*Math.abs(Math.cos(h))+c*Math.abs(Math.sin(h)),v=Math.round(((f-Math.SQRT2*n)/2+Math.SQRT2*n-(f-c)/2)*100)/100;s+=";"+a+":-"+v+"px";var d=t+" solid "+n+"px;",p=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",s+";"+l+";","border-bottom:"+d,"border-right:"+d,"background-color:"+r+";"];return'<div style="'+p.join("")+'"></div>'}function ah(i,t){var e="cubic-bezier(0.23,1,0.32,1)",r=" "+i/2+"s "+e,n="opacity"+r+",visibility"+r;return t||(r=" "+i+"s "+e,n+=U.transformSupported?","+pr+r:",left"+r+",top"+r),eh+":"+n}function bi(i,t,e){var r=i.toFixed(0)+"px",n=t.toFixed(0)+"px";if(!U.transformSupported)return e?"top:"+n+";left:"+r+";":[["top",n],["left",r]];var a=U.transform3dSupported,o="translate"+(a?"3d":"")+"("+r+","+n+(a?",0":"")+")";return e?"top:0;left:0;"+pr+":"+o+";":[["top",0],["left",0],[Qn,o]]}function oh(i){var t=[],e=i.get("fontSize"),r=i.getTextColor();r&&t.push("color:"+r),t.push("font:"+i.getFont()),e&&t.push("line-height:"+Math.round(e*3/2)+"px");var n=i.get("textShadowColor"),a=i.get("textShadowBlur")||0,o=i.get("textShadowOffsetX")||0,s=i.get("textShadowOffsetY")||0;return n&&a&&t.push("text-shadow:"+o+"px "+s+"px "+a+"px "+n),w(["decoration","align"],function(l){var u=i.get(l);u&&t.push("text-"+l+":"+u)}),t.join(";")}function sh(i,t,e){var r=[],n=i.get("transitionDuration"),a=i.get("backgroundColor"),o=i.get("shadowBlur"),s=i.get("shadowColor"),l=i.get("shadowOffsetX"),u=i.get("shadowOffsetY"),h=i.getModel("textStyle"),c=an(i,"html"),f=l+"px "+u+"px "+o+"px "+s;return r.push("box-shadow:"+f),t&&n&&r.push(ah(n,e)),a&&r.push("background-color:"+a),w(["width","color","radius"],function(v){var d="border-"+v,p=nn(d),m=i.get(p);m!=null&&r.push(d+":"+m+(v==="color"?"":"px"))}),r.push(oh(h)),c!=null&&r.push("padding:"+sr(c).join("px ")+"px"),r.join(";")+";"}function Si(i,t,e,r,n){var a=t&&t.painter;if(e){var o=a&&a.getViewportRoot();o&&xo(i,o,document.body,r,n)}else{i[0]=r,i[1]=n;var s=a&&a.getViewportRootOffset();s&&(i[0]+=s.offsetLeft,i[1]+=s.offsetTop)}i[2]=i[0]/t.getWidth(),i[3]=i[1]/t.getHeight()}var lh=function(){function i(t,e,r){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,U.wxa)return null;var n=document.createElement("div");n.domBelongToZr=!0,this.el=n;var a=this._zr=e.getZr(),o=this._appendToBody=r&&r.appendToBody;Si(this._styleCoord,a,o,e.getWidth()/2,e.getHeight()/2),o?document.body.appendChild(n):t.appendChild(n),this._container=t;var s=this;n.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},n.onmousemove=function(l){if(l=l||window.event,!s._enterable){var u=a.handler,h=a.painter.getViewportRoot();mo(h,l,!0),u.dispatch("mousemove",l)}},n.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return i.prototype.update=function(t){var e=this._container,r=th(e,"position"),n=e.style;n.position!=="absolute"&&r!=="absolute"&&(n.position="relative");var a=t.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a,this.el.className=t.get("className")||""},i.prototype.show=function(t,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,n=r.style,a=this._styleCoord;r.innerHTML?n.cssText=rh+sh(t,!this._firstShow,this._longHide)+bi(a[0],a[1],!0)+("border-color:"+pe(e)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):n.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},i.prototype.setContent=function(t,e,r,n,a){var o=this.el;if(t==null){o.innerHTML="";return}var s="";if(z(a)&&r.get("trigger")==="item"&&!jn(r)&&(s=nh(r,n,a)),z(t))o.innerHTML=t+s;else if(t){o.innerHTML="",N(t)||(t=[t]);for(var l=0;l<t.length;l++)yo(t[l])&&t[l].parentNode!==o&&o.appendChild(t[l]);if(s&&o.childNodes.length){var u=document.createElement("div");u.innerHTML=s,o.appendChild(u)}}},i.prototype.setEnterable=function(t){this._enterable=t},i.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},i.prototype.moveTo=function(t,e){var r=this._styleCoord;if(Si(r,this._zr,this._appendToBody,t,e),r[0]!=null&&r[1]!=null){var n=this.el.style,a=bi(r[0],r[1]);w(a,function(o){n[o[0]]=o[1]})}},i.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},i.prototype.hide=function(){var t=this,e=this.el.style;e.visibility="hidden",e.opacity="0",U.transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},i.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(q(this.hide,this),t)):this.hide())},i.prototype.isShow=function(){return this._show},i.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},i}();const uh=lh;var hh=function(){function i(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),Ci(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return i.prototype.update=function(t){var e=t.get("alwaysShowContent");e&&this._moveIfResized(),this._alwaysShowContent=e},i.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},i.prototype.setContent=function(t,e,r,n,a){var o=this;Z(t)&&_o(""),this.el&&this._zr.remove(this.el);var s=r.getModel("textStyle");this.el=new ot({style:{rich:e.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:n,textShadowColor:s.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:an(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),w(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){o.el.style[u]=r.get(u)}),w(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){o.el.style[u]=s.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},i.prototype.setEnterable=function(t){this._enterable=t},i.prototype.getSize=function(){var t=this.el,e=this.el.getBoundingRect(),r=wi(t.style);return[e.width+r.left+r.right,e.height+r.top+r.bottom]},i.prototype.moveTo=function(t,e){var r=this.el;if(r){var n=this._styleCoord;Ci(n,this._zr,t,e),t=n[0],e=n[1];var a=r.style,o=ut(a.borderWidth||0),s=wi(a);r.x=t+o+s.left,r.y=e+o+s.top,r.markRedraw()}},i.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},i.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},i.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(q(this.hide,this),t)):this.hide())},i.prototype.isShow=function(){return this._show},i.prototype.dispose=function(){this._zr.remove(this.el)},i}();function ut(i){return Math.max(0,i)}function wi(i){var t=ut(i.shadowBlur||0),e=ut(i.shadowOffsetX||0),r=ut(i.shadowOffsetY||0);return{left:ut(t-e),right:ut(t+e),top:ut(t-r),bottom:ut(t+r)}}function Ci(i,t,e,r){i[0]=e,i[1]=r,i[2]=i[0]/t.getWidth(),i[3]=i[1]/t.getHeight()}const ch=hh;var fh=new it({shape:{x:-1,y:-1,width:2,height:2}}),vh=function(i){R(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,r){if(!(U.node||!r.getDom())){var n=e.getComponent("tooltip"),a=this._renderMode=bo(n.get("renderMode"));this._tooltipContent=a==="richText"?new ch(r):new uh(r.getDom(),r,{appendToBody:n.get("appendToBody",!0)})}},t.prototype.render=function(e,r,n){if(!(U.node||!n.getDom())){this.group.removeAll(),this._tooltipModel=e,this._ecModel=r,this._api=n;var a=this._tooltipContent;a.update(e),a.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&e.get("transitionDuration")?rn(this,"_updatePosition",50,"fixRate"):Ve(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var e=this._tooltipModel,r=e.get("triggerOn");Zn("itemTooltip",this._api,q(function(n,a,o){r!=="none"&&(r.indexOf(n)>=0?this._tryShow(a,o):n==="leave"&&this._hide(o))},this))},t.prototype._keepShow=function(){var e=this._tooltipModel,r=this._ecModel,n=this._api,a=e.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!n.isDisposed()&&o.manuallyShowTip(e,r,n,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(e,r,n,a){if(!(a.from===this.uid||U.node||!n.getDom())){var o=Ai(a,n);this._ticket="";var s=a.dataByCoordSys,l=mh(a,r,n);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:a.position,positionDefault:"bottom"},o)}else if(a.tooltip&&a.x!=null&&a.y!=null){var h=fh;h.x=a.x,h.y=a.y,h.update(),K(h).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:h},o)}else if(s)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:s,tooltipOption:a.tooltipOption},o);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(e,r,n,a))return;var c=Kn(a,r),f=c.point[0],v=c.point[1];f!=null&&v!=null&&this._tryShow({offsetX:f,offsetY:v,target:c.el,position:a.position,positionDefault:"bottom"},o)}else a.x!=null&&a.y!=null&&(n.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:n.getZr().findHover(a.x,a.y).target},o))}},t.prototype.manuallyHideTip=function(e,r,n,a){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(Ai(a,n))},t.prototype._manuallyAxisShowTip=function(e,r,n,a){var o=a.seriesIndex,s=a.dataIndex,l=r.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||s==null||l==null)){var u=r.getSeriesByIndex(o);if(u){var h=u.getData(),c=Et([h.getItemModel(s),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(c.get("trigger")==="axis")return n.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:s,position:a.position}),!0}}},t.prototype._tryShow=function(e,r){var n=e.target,a=this._tooltipModel;if(a){this._lastX=e.offsetX,this._lastY=e.offsetY;var o=e.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,e);else if(n){this._lastDataByCoordSys=null;var s,l;So(n,function(u){if(K(u).dataIndex!=null)return s=u,!0;if(K(u).tooltipConfig!=null)return l=u,!0},!0),s?this._showSeriesItemTooltip(e,s,r):l?this._showComponentItemTooltip(e,l,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},t.prototype._showOrMove=function(e,r){var n=e.get("showDelay");r=q(r,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(r,n):r()},t.prototype._showAxisTooltip=function(e,r){var n=this._ecModel,a=this._tooltipModel,o=[r.offsetX,r.offsetY],s=Et([r.tooltipOption],a),l=this._renderMode,u=[],h=Dr("section",{blocks:[],noHeader:!0}),c=[],f=new Se;w(e,function(y){w(y.dataByAxis,function(x){var _=n.getComponent(x.axisDim+"Axis",x.axisIndex),S=x.value;if(!(!_||S==null)){var A=Xn(S,_.axis,n,x.seriesDataIndices,x.valueLabelOpt),C=Dr("section",{header:A,noHeader:!wo(A),sortBlocks:!0,blocks:[]});h.blocks.push(C),w(x.seriesDataIndices,function(D){var I=n.getSeriesByIndex(D.seriesIndex),M=D.dataIndexInside,b=I.getDataParams(M);if(!(b.dataIndex<0)){b.axisDim=x.axisDim,b.axisIndex=x.axisIndex,b.axisType=x.axisType,b.axisId=x.axisId,b.axisValue=cr(_.axis,{value:S}),b.axisValueLabel=A,b.marker=f.makeTooltipMarker("item",pe(b.color),l);var L=Tr(I.formatTooltip(M,!0,null)),T=L.frag;if(T){var k=Et([I],a).get("valueFormatter");C.blocks.push(k?F({valueFormatter:k},T):T)}L.text&&c.push(L.text),u.push(b)}})}})}),h.blocks.reverse(),c.reverse();var v=r.position,d=s.get("order"),p=Mr(h,f,l,d,n.get("useUTC"),s.get("textStyle"));p&&c.unshift(p);var m=l==="richText"?`

`:"<br/>",g=c.join(m);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(e,u)?this._updatePosition(s,v,o[0],o[1],this._tooltipContent,u):this._showTooltipContent(s,g,u,Math.random()+"",o[0],o[1],v,null,f)})},t.prototype._showSeriesItemTooltip=function(e,r,n){var a=this._ecModel,o=K(r),s=o.seriesIndex,l=a.getSeriesByIndex(s),u=o.dataModel||l,h=o.dataIndex,c=o.dataType,f=u.getData(c),v=this._renderMode,d=e.positionDefault,p=Et([f.getItemModel(h),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,d?{position:d}:null),m=p.get("trigger");if(!(m!=null&&m!=="item")){var g=u.getDataParams(h,c),y=new Se;g.marker=y.makeTooltipMarker("item",pe(g.color),v);var x=Tr(u.formatTooltip(h,!1,c)),_=p.get("order"),S=p.get("valueFormatter"),A=x.frag,C=A?Mr(S?F({valueFormatter:S},A):A,y,v,_,a.get("useUTC"),p.get("textStyle")):x.text,D="item_"+u.name+"_"+h;this._showOrMove(p,function(){this._showTooltipContent(p,C,g,D,e.offsetX,e.offsetY,e.position,e.target,y)}),n({type:"showTip",dataIndexInside:h,dataIndex:f.getRawIndex(h),seriesIndex:s,from:this.uid})}},t.prototype._showComponentItemTooltip=function(e,r,n){var a=K(r),o=a.tooltipConfig,s=o.option||{};if(z(s)){var l=s;s={content:l,formatter:l}}var u=[s],h=this._ecModel.getComponent(a.componentMainType,a.componentIndex);h&&u.push(h),u.push({formatter:s.content});var c=e.positionDefault,f=Et(u,this._tooltipModel,c?{position:c}:null),v=f.get("content"),d=Math.random()+"",p=new Se;this._showOrMove(f,function(){var m=Yt(f.get("formatterParams")||{});this._showTooltipContent(f,v,m,d,e.offsetX,e.offsetY,e.position,r,p)}),n({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(e,r,n,a,o,s,l,u,h){if(this._ticket="",!(!e.get("showContent")||!e.get("show"))){var c=this._tooltipContent;c.setEnterable(e.get("enterable"));var f=e.get("formatter");l=l||e.get("position");var v=r,d=this._getNearestPoint([o,s],n,e.get("trigger"),e.get("borderColor")),p=d.color;if(f)if(z(f)){var m=e.ecModel.get("useUTC"),g=N(n)?n[0]:n,y=g&&g.axisType&&g.axisType.indexOf("time")>=0;v=f,y&&(v=Bi(g.axisValue,v,m)),v=Co(v,n,!0)}else if(W(f)){var x=q(function(_,S){_===this._ticket&&(c.setContent(S,h,e,p,l),this._updatePosition(e,l,o,s,c,n,u))},this);this._ticket=a,v=f(n,a,x)}else v=f;c.setContent(v,h,e,p,l),c.show(e,p),this._updatePosition(e,l,o,s,c,n,u)}},t.prototype._getNearestPoint=function(e,r,n,a){if(n==="axis"||N(r))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!N(r))return{color:a||r.color||r.borderColor}},t.prototype._updatePosition=function(e,r,n,a,o,s,l){var u=this._api.getWidth(),h=this._api.getHeight();r=r||e.get("position");var c=o.getSize(),f=e.get("align"),v=e.get("verticalAlign"),d=l&&l.getBoundingRect().clone();if(l&&d.applyTransform(l.transform),W(r)&&(r=r([n,a],s,o.el,d,{viewSize:[u,h],contentSize:c.slice()})),N(r))n=xt(r[0],u),a=xt(r[1],h);else if(Z(r)){var p=r;p.width=c[0],p.height=c[1];var m=Wt(p,{width:u,height:h});n=m.x,a=m.y,f=null,v=null}else if(z(r)&&l){var g=gh(r,d,c,e.get("borderWidth"));n=g[0],a=g[1]}else{var g=dh(n,a,o,u,h,f?null:20,v?null:20);n=g[0],a=g[1]}if(f&&(n-=Di(f)?c[0]/2:f==="right"?c[0]:0),v&&(a-=Di(v)?c[1]/2:v==="bottom"?c[1]:0),jn(e)){var g=ph(n,a,o,u,h);n=g[0],a=g[1]}o.moveTo(n,a)},t.prototype._updateContentNotChangedOnAxis=function(e,r){var n=this._lastDataByCoordSys,a=this._cbParamsList,o=!!n&&n.length===e.length;return o&&w(n,function(s,l){var u=s.dataByAxis||[],h=e[l]||{},c=h.dataByAxis||[];o=o&&u.length===c.length,o&&w(u,function(f,v){var d=c[v]||{},p=f.seriesDataIndices||[],m=d.seriesDataIndices||[];o=o&&f.value===d.value&&f.axisType===d.axisType&&f.axisId===d.axisId&&p.length===m.length,o&&w(p,function(g,y){var x=m[y];o=o&&g.seriesIndex===x.seriesIndex&&g.dataIndex===x.dataIndex}),a&&w(f.seriesDataIndices,function(g){var y=g.seriesIndex,x=r[y],_=a[y];x&&_&&_.data!==x.data&&(o=!1)})})}),this._lastDataByCoordSys=e,this._cbParamsList=r,!!o},t.prototype._hide=function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},t.prototype.dispose=function(e,r){U.node||!r.getDom()||(Ve(this,"_updatePosition"),this._tooltipContent.dispose(),Je("itemTooltip",r))},t.type="tooltip",t}(pt);function Et(i,t,e){var r=t.ecModel,n;e?(n=new ht(e,r,r),n=new ht(t.option,n,r)):n=t;for(var a=i.length-1;a>=0;a--){var o=i[a];o&&(o instanceof ht&&(o=o.get("tooltip",!0)),z(o)&&(o={formatter:o}),o&&(n=new ht(o,n,r)))}return n}function Ai(i,t){return i.dispatchAction||q(t.dispatchAction,t)}function dh(i,t,e,r,n,a,o){var s=e.getSize(),l=s[0],u=s[1];return a!=null&&(i+l+a+2>r?i-=l+a:i+=a),o!=null&&(t+u+o>n?t-=u+o:t+=o),[i,t]}function ph(i,t,e,r,n){var a=e.getSize(),o=a[0],s=a[1];return i=Math.min(i+o,r)-o,t=Math.min(t+s,n)-s,i=Math.max(i,0),t=Math.max(t,0),[i,t]}function gh(i,t,e,r){var n=e[0],a=e[1],o=Math.ceil(Math.SQRT2*r)+8,s=0,l=0,u=t.width,h=t.height;switch(i){case"inside":s=t.x+u/2-n/2,l=t.y+h/2-a/2;break;case"top":s=t.x+u/2-n/2,l=t.y-a-o;break;case"bottom":s=t.x+u/2-n/2,l=t.y+h+o;break;case"left":s=t.x-n-o,l=t.y+h/2-a/2;break;case"right":s=t.x+u+o,l=t.y+h/2-a/2}return[s,l]}function Di(i){return i==="center"||i==="middle"}function mh(i,t,e){var r=Ao(i).queryOptionMap,n=r.keys()[0];if(!(!n||n==="series")){var a=Do(t,n,r.get(n),{useDefault:!1,enableAll:!1,enableNone:!1}),o=a.models[0];if(o){var s=e.getViewOfComponentModel(o),l;if(s.group.traverse(function(u){var h=K(u).tooltipConfig;if(h&&h.name===i.name)return l=u,!0}),l)return{componentMainType:n,componentIndex:o.componentIndex,el:l}}}}const yh=vh;function $h(i){wt(qn),i.registerComponentModel(Ju),i.registerComponentView(yh),i.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Lr),i.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Lr)}var xh=function(i){R(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e.layoutMode={type:"box",ignoreSize:!0},e}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(at),_h=function(i){R(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,r,n){if(this.group.removeAll(),!!e.get("show")){var a=this.group,o=e.getModel("textStyle"),s=e.getModel("subtextStyle"),l=e.get("textAlign"),u=ir(e.get("textBaseline"),e.get("textVerticalAlign")),h=new ot({style:Mt(o,{text:e.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),c=h.getBoundingRect(),f=e.get("subtext"),v=new ot({style:Mt(s,{text:f,fill:s.getTextColor(),y:c.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),d=e.get("link"),p=e.get("sublink"),m=e.get("triggerEvent",!0);h.silent=!d&&!m,v.silent=!p&&!m,d&&h.on("click",function(){Ir(d,"_"+e.get("target"))}),p&&v.on("click",function(){Ir(p,"_"+e.get("subtarget"))}),K(h).eventData=K(v).eventData=m?{componentType:"title",componentIndex:e.componentIndex}:null,a.add(h),f&&a.add(v);var g=a.getBoundingRect(),y=e.getBoxLayoutParams();y.width=g.width,y.height=g.height;var x=Wt(y,{width:n.getWidth(),height:n.getHeight()},e.get("padding"));l||(l=e.get("left")||e.get("right"),l==="middle"&&(l="center"),l==="right"?x.x+=x.width:l==="center"&&(x.x+=x.width/2)),u||(u=e.get("top")||e.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?x.y+=x.height:u==="middle"&&(x.y+=x.height/2),u=u||"top"),a.x=x.x,a.y=x.y,a.markRedraw();var _={align:l,verticalAlign:u};h.setStyle(_),v.setStyle(_),g=a.getBoundingRect();var S=x.margin,A=e.getItemStyle(["color","opacity"]);A.fill=e.get("backgroundColor");var C=new it({shape:{x:g.x-S[3],y:g.y-S[0],width:g.width+S[1]+S[3],height:g.height+S[0]+S[2],r:e.get("borderRadius")},style:A,subPixelOptimize:!0,silent:!0});a.add(C)}},t.type="title",t}(pt);function Yh(i){i.registerComponentModel(xh),i.registerComponentView(_h)}var bh=function(i,t){if(t==="all")return{type:"all",title:i.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:i.getLocaleModel().get(["legend","selector","inverse"])}},Sh=function(i){R(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e.layoutMode={type:"box",ignoreSize:!0},e}return t.prototype.init=function(e,r,n){this.mergeDefaultAndTheme(e,n),e.selected=e.selected||{},this._updateSelector(e)},t.prototype.mergeOption=function(e,r){i.prototype.mergeOption.call(this,e,r),this._updateSelector(e)},t.prototype._updateSelector=function(e){var r=e.selector,n=this.ecModel;r===!0&&(r=e.selector=["all","inverse"]),N(r)&&w(r,function(a,o){z(a)&&(a={type:a}),r[o]=J(a,bh(n,a.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&this.get("selectedMode")==="single"){for(var r=!1,n=0;n<e.length;n++){var a=e[n].get("name");if(this.isSelected(a)){this.select(a),r=!0;break}}!r&&this.select(e[0].get("name"))}},t.prototype._updateData=function(e){var r=[],n=[];e.eachRawSeries(function(l){var u=l.name;n.push(u);var h;if(l.legendVisualProvider){var c=l.legendVisualProvider,f=c.getAllNames();e.isSeriesFiltered(l)||(n=n.concat(f)),f.length?r=r.concat(f):h=!0}else h=!0;h&&To(l)&&r.push(l.name)}),this._availableNames=n;var a=this.get("data")||r,o=Q(),s=H(a,function(l){return(z(l)||$t(l))&&(l={name:l}),o.get(l.name)?null:(o.set(l.name,!0),new ht(l,this,this.ecModel))},this);this._data=he(s,function(l){return!!l})},t.prototype.getData=function(){return this._data},t.prototype.select=function(e){var r=this.option.selected,n=this.get("selectedMode");if(n==="single"){var a=this._data;w(a,function(o){r[o.get("name")]=!1})}r[e]=!0},t.prototype.unSelect=function(e){this.get("selectedMode")!=="single"&&(this.option.selected[e]=!1)},t.prototype.toggleSelected=function(e){var r=this.option.selected;r.hasOwnProperty(e)||(r[e]=!0),this[r[e]?"unSelect":"select"](e)},t.prototype.allSelect=function(){var e=this._data,r=this.option.selected;w(e,function(n){r[n.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var e=this._data,r=this.option.selected;w(e,function(n){var a=n.get("name",!0);r.hasOwnProperty(a)||(r[a]=!0),r[a]=!r[a]})},t.prototype.isSelected=function(e){var r=this.option.selected;return!(r.hasOwnProperty(e)&&!r[e])&&dt(this._availableNames,e)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(at);const Qe=Sh;var At=$,tr=w,ae=St,wh=function(i){R(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e.newlineDisabled=!1,e}return t.prototype.init=function(){this.group.add(this._contentGroup=new ae),this.group.add(this._selectorGroup=new ae),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(e,r,n){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!e.get("show",!0)){var o=e.get("align"),s=e.get("orient");(!o||o==="auto")&&(o=e.get("left")==="right"&&s==="vertical"?"right":"left");var l=e.get("selector",!0),u=e.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=s==="horizontal"?"end":"start"),this.renderInner(o,e,r,n,l,s,u);var h=e.getBoxLayoutParams(),c={width:n.getWidth(),height:n.getHeight()},f=e.get("padding"),v=Wt(h,c,f),d=this.layoutInner(e,o,v,a,l,u),p=Wt(tt({width:d.width,height:d.height},h),c,f);this.group.x=p.x-d.x,this.group.y=p.y-d.y,this.group.markRedraw(),this.group.add(this._backgroundEl=qu(d,e))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(e,r,n,a,o,s,l){var u=this.getContentGroup(),h=Q(),c=r.get("selectedMode"),f=[];n.eachRawSeries(function(v){!v.get("legendHoverLink")&&f.push(v.id)}),tr(r.getData(),function(v,d){var p=v.get("name");if(!this.newlineDisabled&&(p===""||p===`
`)){var m=new ae;m.newline=!0,u.add(m);return}var g=n.getSeriesByName(p)[0];if(!h.get(p))if(g){var y=g.getData(),x=y.getVisual("legendLineStyle")||{},_=y.getVisual("legendIcon"),S=y.getVisual("style"),A=this._createItem(g,p,d,v,r,e,x,S,_,c,a);A.on("click",At(Ti,p,null,a,f)).on("mouseover",At(er,g.name,null,a,f)).on("mouseout",At(rr,g.name,null,a,f)),h.set(p,!0)}else n.eachRawSeries(function(C){if(!h.get(p)&&C.legendVisualProvider){var D=C.legendVisualProvider;if(!D.containName(p))return;var I=D.indexOfName(p),M=D.getItemVisual(I,"style"),b=D.getItemVisual(I,"legendIcon"),L=Mo(M.fill);L&&L[3]===0&&(L[3]=.2,M=F(F({},M),{fill:Lo(L,"rgba")}));var T=this._createItem(C,p,d,v,r,e,{},M,b,c,a);T.on("click",At(Ti,null,p,a,f)).on("mouseover",At(er,null,p,a,f)).on("mouseout",At(rr,null,p,a,f)),h.set(p,!0)}},this)},this),o&&this._createSelector(o,r,a,s,l)},t.prototype._createSelector=function(e,r,n,a,o){var s=this.getSelectorGroup();tr(e,function(u){var h=u.type,c=new ot({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:h==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(c);var f=r.getModel("selectorLabel"),v=r.getModel(["emphasis","selectorLabel"]);Zi(c,{normal:f,emphasis:v},{defaultText:u.title}),Pr(c)})},t.prototype._createItem=function(e,r,n,a,o,s,l,u,h,c,f){var v=e.visualDrawType,d=o.get("itemWidth"),p=o.get("itemHeight"),m=o.isSelected(r),g=a.get("symbolRotate"),y=a.get("symbolKeepAspect"),x=a.get("icon");h=x||h||"roundRect";var _=Ch(h,a,l,u,v,m,f),S=new ae,A=a.getModel("textStyle");if(W(e.getLegendIcon)&&(!x||x==="inherit"))S.add(e.getLegendIcon({itemWidth:d,itemHeight:p,icon:h,iconRotate:g,itemStyle:_.itemStyle,lineStyle:_.lineStyle,symbolKeepAspect:y}));else{var C=x==="inherit"&&e.getData().getVisual("symbol")?g==="inherit"?e.getData().getVisual("symbolRotate"):g:0;S.add(Ah({itemWidth:d,itemHeight:p,icon:h,iconRotate:C,itemStyle:_.itemStyle,lineStyle:_.lineStyle,symbolKeepAspect:y}))}var D=s==="left"?d+5:-5,I=s,M=o.get("formatter"),b=r;z(M)&&M?b=M.replace("{name}",r??""):W(M)&&(b=M(r));var L=m?A.getTextColor():a.get("inactiveColor");S.add(new ot({style:Mt(A,{text:b,x:D,y:p/2,fill:L,align:I,verticalAlign:"middle"},{inheritColor:L})}));var T=new it({shape:S.getBoundingRect(),invisible:!0}),k=a.getModel("tooltip");return k.get("show")&&Ji({el:T,componentModel:o,itemName:r,itemTooltipOption:k.option}),S.add(T),S.eachChild(function(P){P.silent=!0}),T.silent=!c,this.getContentGroup().add(S),Pr(S),S.__legendDataIndex=n,S},t.prototype.layoutInner=function(e,r,n,a,o,s){var l=this.getContentGroup(),u=this.getSelectorGroup();Gt(e.get("orient"),l,e.get("itemGap"),n.width,n.height);var h=l.getBoundingRect(),c=[-h.x,-h.y];if(u.markRedraw(),l.markRedraw(),o){Gt("horizontal",u,e.get("selectorItemGap",!0));var f=u.getBoundingRect(),v=[-f.x,-f.y],d=e.get("selectorButtonGap",!0),p=e.getOrient().index,m=p===0?"width":"height",g=p===0?"height":"width",y=p===0?"y":"x";s==="end"?v[p]+=h[m]+d:c[p]+=f[m]+d,v[1-p]+=h[g]/2-f[g]/2,u.x=v[0],u.y=v[1],l.x=c[0],l.y=c[1];var x={x:0,y:0};return x[m]=h[m]+d+f[m],x[g]=Math.max(h[g],f[g]),x[y]=Math.min(0,f[y]+v[1-p]),x}else return l.x=c[0],l.y=c[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(pt);function Ch(i,t,e,r,n,a,o){function s(m,g){m.lineWidth==="auto"&&(m.lineWidth=g.lineWidth>0?2:0),tr(m,function(y,x){m[x]==="inherit"&&(m[x]=g[x])})}var l=t.getModel("itemStyle"),u=l.getItemStyle(),h=i.lastIndexOf("empty",0)===0?"fill":"stroke",c=l.getShallow("decal");u.decal=!c||c==="inherit"?r.decal:Io(c,o),u.fill==="inherit"&&(u.fill=r[n]),u.stroke==="inherit"&&(u.stroke=r[h]),u.opacity==="inherit"&&(u.opacity=(n==="fill"?r:e).opacity),s(u,r);var f=t.getModel("lineStyle"),v=f.getLineStyle();if(s(v,e),u.fill==="auto"&&(u.fill=r.fill),u.stroke==="auto"&&(u.stroke=r.fill),v.stroke==="auto"&&(v.stroke=r.fill),!a){var d=t.get("inactiveBorderWidth"),p=u[h];u.lineWidth=d==="auto"?r.lineWidth>0&&p?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),v.stroke=f.get("inactiveColor"),v.lineWidth=f.get("inactiveWidth")}return{itemStyle:u,lineStyle:v}}function Ah(i){var t=i.icon||"roundRect",e=ji(t,0,0,i.itemWidth,i.itemHeight,i.itemStyle.fill,i.symbolKeepAspect);return e.setStyle(i.itemStyle),e.rotation=(i.iconRotate||0)*Math.PI/180,e.setOrigin([i.itemWidth/2,i.itemHeight/2]),t.indexOf("empty")>-1&&(e.style.stroke=e.style.fill,e.style.fill="#fff",e.style.lineWidth=2),e}function Ti(i,t,e,r){rr(i,t,e,r),e.dispatchAction({type:"legendToggleSelect",name:i??t}),er(i,t,e,r)}function ea(i){for(var t=i.getZr().storage.getDisplayList(),e,r=0,n=t.length;r<n&&!(e=t[r].states.emphasis);)r++;return e&&e.hoverLayer}function er(i,t,e,r){ea(e)||e.dispatchAction({type:"highlight",seriesName:i,name:t,excludeSeriesId:r})}function rr(i,t,e,r){ea(e)||e.dispatchAction({type:"downplay",seriesName:i,name:t,excludeSeriesId:r})}const ra=wh;function Dh(i){var t=i.findComponents({mainType:"legend"});t&&t.length&&i.filterSeries(function(e){for(var r=0;r<t.length;r++)if(!t[r].isSelected(e.name))return!1;return!0})}function Bt(i,t,e){var r={},n=i==="toggleSelected",a;return e.eachComponent("legend",function(o){n&&a!=null?o[a?"select":"unSelect"](t.name):i==="allSelect"||i==="inverseSelect"?o[i]():(o[i](t.name),a=o.isSelected(t.name));var s=o.getData();w(s,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var h=o.isSelected(u);r.hasOwnProperty(u)?r[u]=r[u]&&h:r[u]=h}})}),i==="allSelect"||i==="inverseSelect"?{selected:r}:{name:t.name,selected:r}}function Th(i){i.registerAction("legendToggleSelect","legendselectchanged",$(Bt,"toggleSelected")),i.registerAction("legendAllSelect","legendselectall",$(Bt,"allSelect")),i.registerAction("legendInverseSelect","legendinverseselect",$(Bt,"inverseSelect")),i.registerAction("legendSelect","legendselected",$(Bt,"select")),i.registerAction("legendUnSelect","legendunselected",$(Bt,"unSelect"))}function ia(i){i.registerComponentModel(Qe),i.registerComponentView(ra),i.registerProcessor(i.PRIORITY.PROCESSOR.SERIES_FILTER,Dh),i.registerSubTypeDefaulter("legend",function(){return"plain"}),Th(i)}var Mh=function(i){R(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},t.prototype.init=function(e,r,n){var a=Ki(e);i.prototype.init.call(this,e,r,n),Mi(this,e,a)},t.prototype.mergeOption=function(e,r){i.prototype.mergeOption.call(this,e,r),Mi(this,this.option,e)},t.type="legend.scroll",t.defaultOption=Xi(Qe.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(Qe);function Mi(i,t,e){var r=i.getOrient(),n=[1,1];n[r.index]=0,qi(t,e,{type:"box",ignoreSize:!!n})}const Lh=Mh;var Li=St,Ee=["width","height"],Be=["x","y"],Ih=function(i){R(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e.newlineDisabled=!0,e._currentIndex=0,e}return t.prototype.init=function(){i.prototype.init.call(this),this.group.add(this._containerGroup=new Li),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Li)},t.prototype.resetInner=function(){i.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(e,r,n,a,o,s,l){var u=this;i.prototype.renderInner.call(this,e,r,n,a,o,s,l);var h=this._controllerGroup,c=r.get("pageIconSize",!0),f=N(c)?c:[c,c];d("pagePrev",0);var v=r.getModel("pageTextStyle");h.add(new ot({name:"pageText",style:{text:"xx/xx",fill:v.getTextColor(),font:v.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),d("pageNext",1);function d(p,m){var g=p+"DataIndex",y=en(r.get("pageIcons",!0)[r.getOrient().name][m],{onclick:q(u._pageGo,u,g,r,a)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});y.name=p,h.add(y)}},t.prototype.layoutInner=function(e,r,n,a,o,s){var l=this.getSelectorGroup(),u=e.getOrient().index,h=Ee[u],c=Be[u],f=Ee[1-u],v=Be[1-u];o&&Gt("horizontal",l,e.get("selectorItemGap",!0));var d=e.get("selectorButtonGap",!0),p=l.getBoundingRect(),m=[-p.x,-p.y],g=Yt(n);o&&(g[h]=n[h]-p[h]-d);var y=this._layoutContentAndController(e,a,g,u,h,f,v,c);if(o){if(s==="end")m[u]+=y[h]+d;else{var x=p[h]+d;m[u]-=x,y[c]-=x}y[h]+=p[h]+d,m[1-u]+=y[v]+y[f]/2-p[f]/2,y[f]=Math.max(y[f],p[f]),y[v]=Math.min(y[v],p[v]+m[1-u]),l.x=m[0],l.y=m[1],l.markRedraw()}return y},t.prototype._layoutContentAndController=function(e,r,n,a,o,s,l,u){var h=this.getContentGroup(),c=this._containerGroup,f=this._controllerGroup;Gt(e.get("orient"),h,e.get("itemGap"),a?n.width:null,a?null:n.height),Gt("horizontal",f,e.get("pageButtonItemGap",!0));var v=h.getBoundingRect(),d=f.getBoundingRect(),p=this._showController=v[o]>n[o],m=[-v.x,-v.y];r||(m[a]=h[u]);var g=[0,0],y=[-d.x,-d.y],x=ir(e.get("pageButtonGap",!0),e.get("itemGap",!0));if(p){var _=e.get("pageButtonPosition",!0);_==="end"?y[a]+=n[o]-d[o]:g[a]+=d[o]+x}y[1-a]+=v[s]/2-d[s]/2,h.setPosition(m),c.setPosition(g),f.setPosition(y);var S={x:0,y:0};if(S[o]=p?n[o]:v[o],S[s]=Math.max(v[s],d[s]),S[l]=Math.min(0,d[l]+y[1-a]),c.__rectSize=n[o],p){var A={x:0,y:0};A[o]=Math.max(n[o]-d[o]-x,0),A[s]=S[s],c.setClipPath(new it({shape:A})),c.__rectSize=A[o]}else f.eachChild(function(D){D.attr({invisible:!0,silent:!0})});var C=this._getPageInfo(e);return C.pageIndex!=null&&bt(h,{x:C.contentPosition[0],y:C.contentPosition[1]},p?e:null),this._updatePageInfoView(e,C),S},t.prototype._pageGo=function(e,r,n){var a=this._getPageInfo(r)[e];a!=null&&n.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:r.id})},t.prototype._updatePageInfoView=function(e,r){var n=this._controllerGroup;w(["pagePrev","pageNext"],function(h){var c=h+"DataIndex",f=r[c]!=null,v=n.childOfName(h);v&&(v.setStyle("fill",f?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),v.cursor=f?"pointer":"default")});var a=n.childOfName("pageText"),o=e.get("pageFormatter"),s=r.pageIndex,l=s!=null?s+1:0,u=r.pageCount;a&&o&&a.setStyle("text",z(o)?o.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):o({current:l,total:u}))},t.prototype._getPageInfo=function(e){var r=e.get("scrollDataIndex",!0),n=this.getContentGroup(),a=this._containerGroup.__rectSize,o=e.getOrient().index,s=Ee[o],l=Be[o],u=this._findTargetItemIndex(r),h=n.children(),c=h[u],f=h.length,v=f?1:0,d={contentPosition:[n.x,n.y],pageCount:v,pageIndex:v-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!c)return d;var p=_(c);d.contentPosition[o]=-p.s;for(var m=u+1,g=p,y=p,x=null;m<=f;++m)x=_(h[m]),(!x&&y.e>g.s+a||x&&!S(x,g.s))&&(y.i>g.i?g=y:g=x,g&&(d.pageNextDataIndex==null&&(d.pageNextDataIndex=g.i),++d.pageCount)),y=x;for(var m=u-1,g=p,y=p,x=null;m>=-1;--m)x=_(h[m]),(!x||!S(y,x.s))&&g.i<y.i&&(y=g,d.pagePrevDataIndex==null&&(d.pagePrevDataIndex=g.i),++d.pageCount,++d.pageIndex),g=x;return d;function _(A){if(A){var C=A.getBoundingRect(),D=C[l]+A[l];return{s:D,e:D+C[s],i:A.__legendDataIndex}}}function S(A,C){return A.e>=C&&A.s<=C+a}},t.prototype._findTargetItemIndex=function(e){if(!this._showController)return 0;var r,n=this.getContentGroup(),a;return n.eachChild(function(o,s){var l=o.__legendDataIndex;a==null&&l!=null&&(a=s),l===e&&(r=s)}),r??a},t.type="legend.scroll",t}(ra);const Ph=Ih;function Oh(i){i.registerAction("legendScroll","legendscroll",function(t,e){var r=t.scrollDataIndex;r!=null&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},function(n){n.setScrollDataIndex(r)})})}function kh(i){wt(ia),i.registerComponentModel(Lh),i.registerComponentView(Ph),Oh(i)}function Xh(i){wt(ia),wt(kh)}function Ii(i,t,e){var r=Oo.createCanvas(),n=t.getWidth(),a=t.getHeight(),o=r.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=n+"px",o.height=a+"px",r.setAttribute("data-zr-dom-id",i)),r.width=n*e,r.height=a*e,r}var Rh=function(i){R(t,i);function t(e,r,n){var a=i.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null;var o;n=n||sn,typeof e=="string"?o=Ii(e,r,n):Z(e)&&(o=e,e=o.id),a.id=e,a.dom=o;var s=o.style;return s&&(on(o),o.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),a.painter=r,a.dpr=n,a}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var e=this.dpr;this.domBack=Ii("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),e!==1&&this.ctxBack.scale(e,e)},t.prototype.createRepaintRects=function(e,r,n,a){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o=[],s=this.maxRepaintRectCount,l=!1,u=new ft(0,0,0,0);function h(y){if(!(!y.isFinite()||y.isZero()))if(o.length===0){var x=new ft(0,0,0,0);x.copy(y),o.push(x)}else{for(var _=!1,S=1/0,A=0,C=0;C<o.length;++C){var D=o[C];if(D.intersect(y)){var I=new ft(0,0,0,0);I.copy(D),I.union(y),o[C]=I,_=!0;break}else if(l){u.copy(y),u.union(D);var M=y.width*y.height,b=D.width*D.height,L=u.width*u.height,T=L-M-b;T<S&&(S=T,A=C)}}if(l&&(o[A].union(y),_=!0),!_){var x=new ft(0,0,0,0);x.copy(y),o.push(x)}l||(l=o.length>=s)}}for(var c=this.__startIndex;c<this.__endIndex;++c){var f=e[c];if(f){var v=f.shouldBePainted(n,a,!0,!0),d=f.__isRendered&&(f.__dirty&$e||!v)?f.getPrevPaintRect():null;d&&h(d);var p=v&&(f.__dirty&$e||!f.__isRendered)?f.getPaintRect():null;p&&h(p)}}for(var c=this.__prevStartIndex;c<this.__prevEndIndex;++c){var f=r[c],v=f.shouldBePainted(n,a,!0,!0);if(f&&(!v||!f.__zr)&&f.__isRendered){var d=f.getPrevPaintRect();d&&h(d)}}var m;do{m=!1;for(var c=0;c<o.length;){if(o[c].isZero()){o.splice(c,1);continue}for(var g=c+1;g<o.length;)o[c].intersect(o[g])?(m=!0,o[c].union(o[g]),o.splice(g,1)):g++;c++}}while(m);return this._paintRects=o,o},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(e,r){var n=this.dpr,a=this.dom,o=a.style,s=this.domBack;o&&(o.width=e+"px",o.height=r+"px"),a.width=e*n,a.height=r*n,s&&(s.width=e*n,s.height=r*n,n!==1&&this.ctxBack.scale(n,n))},t.prototype.clear=function(e,r,n){var a=this.dom,o=this.ctx,s=a.width,l=a.height;r=r||this.clearColor;var u=this.motionBlur&&!e,h=this.lastFrameAlpha,c=this.dpr,f=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,s/c,l/c));var v=this.domBack;function d(p,m,g,y){if(o.clearRect(p,m,g,y),r&&r!=="transparent"){var x=void 0;if(ko(r)){var _=r.global||r.__width===g&&r.__height===y;x=_&&r.__canvasGradient||Ro(o,r,{x:0,y:0,width:g,height:y}),r.__canvasGradient=x,r.__width=g,r.__height=y}else Eo(r)&&(r.scaleX=r.scaleX||c,r.scaleY=r.scaleY||c,x=Bo(o,r,{dirty:function(){f.setUnpainted(),f.__painter.refresh()}}));o.save(),o.fillStyle=x||r,o.fillRect(p,m,g,y),o.restore()}u&&(o.save(),o.globalAlpha=h,o.drawImage(v,p,m,g,y),o.restore())}!n||u?d(0,0,s,l):n.length&&w(n,function(p){d(p.x*c,p.y*c,p.width*c,p.height*c)})},t}(Po);const Ne=Rh;var Pi=1e5,mt=314159,oe=.01,Eh=.001;function Bh(i){return i?i.__builtin__?!0:!(typeof i.resize!="function"||typeof i.refresh!="function"):!1}function Nh(i,t){var e=document.createElement("div");return e.style.cssText=["position:relative","width:"+i+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",e}var Gh=function(){function i(t,e,r,n){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=r=F({},r||{}),this.dpr=r.devicePixelRatio||sn,this._singleCanvas=a,this.root=t;var o=t.style;o&&(on(t),t.innerHTML=""),this.storage=e;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(a){var h=t,c=h.width,f=h.height;r.width!=null&&(c=r.width),r.height!=null&&(f=r.height),this.dpr=r.devicePixelRatio||1,h.width=c*this.dpr,h.height=f*this.dpr,this._width=c,this._height=f;var v=new Ne(h,this,this.dpr);v.__builtin__=!0,v.initContext(),l[mt]=v,v.zlevel=mt,s.push(mt),this._domRoot=t}else{this._width=Zt(t,0,r),this._height=Zt(t,1,r);var u=this._domRoot=Nh(this._width,this._height);t.appendChild(u)}}return i.prototype.getType=function(){return"canvas"},i.prototype.isSingleCanvas=function(){return this._singleCanvas},i.prototype.getViewportRoot=function(){return this._domRoot},i.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},i.prototype.refresh=function(t){var e=this.storage.getDisplayList(!0),r=this._prevDisplayList,n=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,r,t,this._redrawId);for(var a=0;a<n.length;a++){var o=n[a],s=this._layers[o];if(!s.__builtin__&&s.refresh){var l=a===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=e.slice()),this},i.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},i.prototype._paintHoverList=function(t){var e=t.length,r=this._hoverlayer;if(r&&r.clear(),!!e){for(var n={inHover:!0,viewWidth:this._width,viewHeight:this._height},a,o=0;o<e;o++){var s=t[o];s.__inHover&&(r||(r=this._hoverlayer=this.getLayer(Pi)),a||(a=r.ctx,a.save()),Kt(a,s,n,o===e-1))}a&&a.restore()}},i.prototype.getHoverLayer=function(){return this.getLayer(Pi)},i.prototype.paintOne=function(t,e){No(t,e)},i.prototype._paintList=function(t,e,r,n){if(this._redrawId===n){r=r||!1,this._updateLayerStatus(t);var a=this._doPaintList(t,e,r),o=a.finished,s=a.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(t),o)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;Go(function(){l._paintList(t,e,r,n)})}}},i.prototype._compositeManually=function(){var t=this.getLayer(mt).ctx,e=this._domRoot.width,r=this._domRoot.height;t.clearRect(0,0,e,r),this.eachBuiltinLayer(function(n){n.virtual&&t.drawImage(n.dom,0,0,e,r)})},i.prototype._doPaintList=function(t,e,r){for(var n=this,a=[],o=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||r)&&a.push(u)}for(var h=!0,c=!1,f=function(p){var m=a[p],g=m.ctx,y=o&&m.createRepaintRects(t,e,v._width,v._height),x=r?m.__startIndex:m.__drawIndex,_=!r&&m.incremental&&Date.now,S=_&&Date.now(),A=m.zlevel===v._zlevelList[0]?v._backgroundColor:null;if(m.__startIndex===m.__endIndex)m.clear(!1,A,y);else if(x===m.__startIndex){var C=t[x];(!C.incremental||!C.notClear||r)&&m.clear(!1,A,y)}x===-1&&(console.error("For some unknown reason. drawIndex is -1"),x=m.__startIndex);var D,I=function(T){var k={inHover:!1,allClipped:!1,prevEl:null,viewWidth:n._width,viewHeight:n._height};for(D=x;D<m.__endIndex;D++){var P=t[D];if(P.__inHover&&(c=!0),n._doPaintEl(P,m,o,T,k,D===m.__endIndex-1),_){var G=Date.now()-S;if(G>15)break}}k.prevElClipPaths&&g.restore()};if(y)if(y.length===0)D=m.__endIndex;else for(var M=v.dpr,b=0;b<y.length;++b){var L=y[b];g.save(),g.beginPath(),g.rect(L.x*M,L.y*M,L.width*M,L.height*M),g.clip(),I(L),g.restore()}else g.save(),I(),g.restore();m.__drawIndex=D,m.__drawIndex<m.__endIndex&&(h=!1)},v=this,d=0;d<a.length;d++)f(d);return U.wxa&&w(this._layers,function(p){p&&p.ctx&&p.ctx.draw&&p.ctx.draw()}),{finished:h,needsRefreshHover:c}},i.prototype._doPaintEl=function(t,e,r,n,a,o){var s=e.ctx;if(r){var l=t.getPaintRect();(!n||l&&l.intersect(n))&&(Kt(s,t,a,o),t.setPrevPaintRect(l))}else Kt(s,t,a,o)},i.prototype.getLayer=function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=mt);var r=this._layers[t];return r||(r=new Ne("zr_"+t,this,this.dpr),r.zlevel=t,r.__builtin__=!0,this._layerConfig[t]?J(r,this._layerConfig[t],!0):this._layerConfig[t-oe]&&J(r,this._layerConfig[t-oe],!0),e&&(r.virtual=e),this.insertLayer(t,r),r.initContext()),r},i.prototype.insertLayer=function(t,e){var r=this._layers,n=this._zlevelList,a=n.length,o=this._domRoot,s=null,l=-1;if(!r[t]&&Bh(e)){if(a>0&&t>n[0]){for(l=0;l<a-1&&!(n[l]<t&&n[l+1]>t);l++);s=r[n[l]]}if(n.splice(l+1,0,t),r[t]=e,!e.virtual)if(s){var u=s.dom;u.nextSibling?o.insertBefore(e.dom,u.nextSibling):o.appendChild(e.dom)}else o.firstChild?o.insertBefore(e.dom,o.firstChild):o.appendChild(e.dom);e.__painter=this}},i.prototype.eachLayer=function(t,e){for(var r=this._zlevelList,n=0;n<r.length;n++){var a=r[n];t.call(e,this._layers[a],a)}},i.prototype.eachBuiltinLayer=function(t,e){for(var r=this._zlevelList,n=0;n<r.length;n++){var a=r[n],o=this._layers[a];o.__builtin__&&t.call(e,o,a)}},i.prototype.eachOtherLayer=function(t,e){for(var r=this._zlevelList,n=0;n<r.length;n++){var a=r[n],o=this._layers[a];o.__builtin__||t.call(e,o,a)}},i.prototype.getLayers=function(){return this._layers},i.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(c,f){c.__dirty=c.__used=!1});function e(c){a&&(a.__endIndex!==c&&(a.__dirty=!0),a.__endIndex=c)}if(this._singleCanvas)for(var r=1;r<t.length;r++){var n=t[r];if(n.zlevel!==t[r-1].zlevel||n.incremental){this._needsManuallyCompositing=!0;break}}var a=null,o=0,s,l;for(l=0;l<t.length;l++){var n=t[l],u=n.zlevel,h=void 0;s!==u&&(s=u,o=0),n.incremental?(h=this.getLayer(u+Eh,this._needsManuallyCompositing),h.incremental=!0,o=1):h=this.getLayer(u+(o>0?oe:0),this._needsManuallyCompositing),h.__builtin__||zo("ZLevel "+u+" has been used by unkown layer "+h.id),h!==a&&(h.__used=!0,h.__startIndex!==l&&(h.__dirty=!0),h.__startIndex=l,h.incremental?h.__drawIndex=-1:h.__drawIndex=l,e(l),a=h),n.__dirty&$e&&!n.__inHover&&(h.__dirty=!0,h.incremental&&h.__drawIndex<0&&(h.__drawIndex=l))}e(l),this.eachBuiltinLayer(function(c,f){!c.__used&&c.getElementCount()>0&&(c.__dirty=!0,c.__startIndex=c.__endIndex=c.__drawIndex=0),c.__dirty&&c.__drawIndex<0&&(c.__drawIndex=c.__startIndex)})},i.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},i.prototype._clearLayer=function(t){t.clear()},i.prototype.setBackgroundColor=function(t){this._backgroundColor=t,w(this._layers,function(e){e.setUnpainted()})},i.prototype.configLayer=function(t,e){if(e){var r=this._layerConfig;r[t]?J(r[t],e,!0):r[t]=e;for(var n=0;n<this._zlevelList.length;n++){var a=this._zlevelList[n];if(a===t||a===t+oe){var o=this._layers[a];J(o,r[t],!0)}}}},i.prototype.delLayer=function(t){var e=this._layers,r=this._zlevelList,n=e[t];n&&(n.dom.parentNode.removeChild(n.dom),delete e[t],r.splice(dt(r,t),1))},i.prototype.resize=function(t,e){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var n=this._opts,a=this.root;if(t!=null&&(n.width=t),e!=null&&(n.height=e),t=Zt(a,0,n),e=Zt(a,1,n),r.style.display="",this._width!==t||e!==this._height){r.style.width=t+"px",r.style.height=e+"px";for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(t,e);this.refresh(!0)}this._width=t,this._height=e}else{if(t==null||e==null)return;this._width=t,this._height=e,this.getLayer(mt).resize(t,e)}return this},i.prototype.clearLayer=function(t){var e=this._layers[t];e&&e.clear()},i.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},i.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[mt].dom;var e=new Ne("image",this,t.pixelRatio||this.dpr);e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor);var r=e.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var n=e.dom.width,a=e.dom.height;this.eachLayer(function(c){c.__builtin__?r.drawImage(c.dom,0,0,n,a):c.renderToCanvas&&(r.save(),c.renderToCanvas(r),r.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,u=s.length;l<u;l++){var h=s[l];Kt(r,h,o,l===u-1)}return e.dom},i.prototype.getWidth=function(){return this._width},i.prototype.getHeight=function(){return this._height},i}();const zh=Gh;function Uh(i){i.registerPainter("canvas",zh)}export{ts as S,Hh as a,Uh as b,Yh as c,Xh as d,$h as e,Tl as g,Vh as i,es as p,Wh as s,wt as u};
