import{d as w,r as v,v as _,o as j,Y as $,a1 as f,a as r,u as c,l as p,w as h,b as N,R as I,cf as S,cd as A,Z as L,x as M,ab as O,al as U,am as D}from"./index-49d75a97.js";import{f as G,a as Z}from"./mock-4469a8b1.js";import{r as k}from"./requests-facbabb5.js";import{u as C,b as z,c as F,d as T,e as E,f as R,a as V}from"./installCanvasRenderer-d0ebbdb6.js";import{i as P}from"./installMarkArea-6a8e9cc9.js";import{i as Y}from"./install-741cd9bd.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";const q=a=>{const e=a.techRateList.reduce((i,u)=>i+u.rate,0);return a.techRateList.forEach(i=>i.rate/=e),a},J=a=>(a.forEach(e=>q(e)),a),K=a=>k({method:"GET",url:"/data_analysis/tech/initial_choice",params:a}).then(e=>q(e)),Q=a=>k({method:"GET",url:"/data_analysis/tech/compare_job",params:a}).then(e=>J(e)),W=a=>k({method:"GET",url:"/data_analysis/tech/compare_region",params:a}).then(e=>J(e)),X=f("h2",{class:"text-xl font-bold"},"同一城市不同岗位对比",-1),ee={class:"flex mb-4"},te=w({__name:"same-city-diff-jobs-top10",props:{job:{},jobs:{},city:{},cities:{},data:{}},setup(a){const e=a;C([z,F,T,E,R,P,V]);const i=v([]),u=v([]),d=10,m=_(()=>e.jobs.filter(o=>o!==e.job).map(o=>({value:o,label:o}))),b=()=>Q({city:e.city,jobName:e.job,choiceList:i.value}).then(o=>u.value=o),y=_(()=>{const o=e.data?[e.data,...u.value]:[];return{legend:{},xAxis:{type:"value",axisLabel:{formatter:n=>`${n*100}%`},min:0,max:1},yAxis:{type:"category"},tooltip:{trigger:"item",axisPointer:{type:"shadow"}},series:Array.from({length:d}).map((n,t)=>({type:"bar",stack:"total",data:o.map(({jobName:s,techRateList:l})=>{const{techName:x,rate:g}=l[t];return{name:x,value:[g,s],label:{show:g>.07,formatter:`${x}`,color:"#F7FAFF"}}}),markArea:{itemStyle:{color:"#e5e9f07f"},data:[[{yAxis:e.job},{yAxis:e.job}]]},tooltip:{formatter:({name:s,value:l})=>`${s}: ${(l[0]*100).toFixed(2)}%`}}))}});return(o,n)=>(j(),$(L,null,[X,f("div",ee,[r(c(p.NSelect),{value:i.value,"onUpdate:value":n[0]||(n[0]=t=>i.value=t),options:m.value,class:"w-96 m-2",placeholder:"对比岗位",multiple:""},null,8,["value","options"]),r(c(p.NButton),{class:"inline m-2",onClick:b},{default:h(()=>[N("确认")]),_:1})]),r(c(A),{option:y.value,style:I(`height: ${i.value.length*2+12}rem`),autoresize:"",onMousedown:n[1]||(n[1]=({name:t})=>c(S)(t))},null,8,["option","style"])],64))}}),ae=f("h2",{class:"text-xl font-bold"},"同一职位不同城市对比",-1),oe={class:"flex mb-4"},se=w({__name:"same-job-diff-cities-top10",props:{job:{},jobs:{},city:{},cities:{},data:{}},setup(a){const e=a;C([z,F,T,E,R,P,V]);const i=v([]),u=v([]),d=10,m=_(()=>e.cities.filter(o=>o!==e.city).map(o=>({value:o,label:o}))),b=()=>W({city:e.city,jobName:e.job,choiceList:i.value}).then(o=>u.value=o),y=_(()=>{const o=e.data?[e.data,...u.value]:[];return{legend:{},xAxis:{type:"value",axisLabel:{formatter:n=>`${n*100}%`},min:0,max:1},yAxis:{type:"category"},tooltip:{trigger:"item",axisPointer:{type:"shadow"}},series:Array.from({length:d}).map((n,t)=>({type:"bar",stack:"total",data:o.map(({region:s,techRateList:l})=>{const{techName:x,rate:g}=l[t];return{name:x,value:[g,s],label:{show:g>.06,formatter:`${x}`,color:"#F7FAFF"}}}),markArea:{itemStyle:{color:"#e5e9f07f"},data:[[{yAxis:e.job},{yAxis:e.job}]]},tooltip:{formatter:({name:s,value:l})=>`${s}: ${(l[0]*100).toFixed(2)}%`}}))}});return(o,n)=>(j(),$(L,null,[ae,f("div",oe,[r(c(p.NSelect),{value:i.value,"onUpdate:value":n[0]||(n[0]=t=>i.value=t),options:m.value,class:"w-96 m-2",placeholder:"对比岗位",multiple:""},null,8,["value","options"]),r(c(p.NButton),{class:"inline m-2",onClick:b},{default:h(()=>[N("确认")]),_:1})]),r(c(A),{option:y.value,style:I(`height: ${i.value.length*2+12}rem`),autoresize:"",onMousedown:n[1]||(n[1]=({name:t})=>c(S)(t))},null,8,["option","style"])],64))}}),B=a=>(U("data-v-3a0ef00a"),a=a(),D(),a),le={class:"sm:p-2 grow flex flex-col"},ie={class:"w-full h-full flex flex-col"},ne=B(()=>f("h2",{class:"text-2xl font-bold"},"技能需求",-1)),ce=B(()=>f("span",{class:"text-lg"},"筛选",-1)),re={class:"flex"},ue={key:0,class:"p-2"},pe=B(()=>f("h2",{class:"text-xl font-bold"},"比较",-1)),de=w({__name:"skill-require-view",setup(a){C([T,R,E,Y,F]);const e=v([]),i=v([]),u=v("java"),d=v("杭州"),m=v(),b=_(()=>i.value.map(t=>({label:t,value:t}))),y=_(()=>e.value.map(t=>({label:t,value:t}))),o=_(()=>{var t;return{tooltip:{trigger:"item"},legend:{},series:{type:"pie",radius:[20,140],center:["50%","75%"],roseType:"radius",itemStyle:{borderRadius:5},label:{show:!0,color:"#4c566a",formatter:({name:s,value:l})=>`${s} ${(l*100).toFixed(2)}%`},tooltip:{formatter:({name:s,value:l})=>`${s} ${(l*100).toFixed(2)}%`},data:(t=m.value)==null?void 0:t.techRateList.map(({techName:s,rate:l})=>({value:l,name:s}))}}}),n=()=>K({city:d.value,jobName:u.value}).then(t=>m.value=t);return M(()=>{G().then(t=>i.value=t),Z().then(t=>e.value=t),n()}),(t,s)=>(j(),$("div",le,[r(c(p.NCard),{class:"grow shadow-lg rounded-none sm:rounded-md"},{default:h(()=>[f("div",ie,[ne,ce,f("div",re,[r(c(p.NSelect),{value:u.value,"onUpdate:value":s[0]||(s[0]=l=>u.value=l),options:y.value,class:"inline w-24 p-2",placeholder:"职位"},null,8,["value","options"]),r(c(p.NSelect),{value:d.value,"onUpdate:value":s[1]||(s[1]=l=>d.value=l),options:b.value,class:"inline w-24 p-2",placeholder:"城市"},null,8,["value","options"]),r(c(p.NButton),{class:"inline m-2",onClick:n},{default:h(()=>[N("确认")]),_:1})]),m.value!==void 0?(j(),$("div",ue,[r(c(A),{option:o.value,style:{height:"24rem"},autoresize:"",onMousedown:s[2]||(s[2]=({name:l})=>c(S)(l))},null,8,["option"])])):O("",!0),pe,r(c(p.NTabs),{"default-value":""},{default:h(()=>[r(c(p.NTabPane),{name:"相同职位不同城市"},{default:h(()=>[r(se,{job:u.value,jobs:e.value,city:d.value,cities:i.value,data:m.value},null,8,["job","jobs","city","cities","data"])]),_:1}),r(c(p.NTabPane),{name:"相同城市不同职位"},{default:h(()=>[r(te,{job:u.value,jobs:e.value,city:d.value,cities:i.value,data:m.value},null,8,["job","jobs","city","cities","data"])]),_:1})]),_:1})])]),_:1})]))}});const xe=H(de,[["__scopeId","data-v-3a0ef00a"]]);export{xe as default};
