import{d as S,r as v,v as f,o as g,Y as $,a1 as u,a as n,u as l,l as c,w as m,b as k,R as z,ck as A,ci as F,Z as V,x as D,a5 as G,ae as J,af as Z}from"./index-04563116.js";import{c as w,j as N}from"./mock-a39acf81.js";import{r as C}from"./requests-2cd61ad6.js";import{u as T,i as E,a as R,b as B}from"./installCanvasRenderer-6a7f74d9.js";import{b as P,c as I,a as q}from"./install-a6a45fe7.js";import{i as M}from"./installMarkArea-cb11cc6a.js";import{i as Y}from"./install-bf85017b.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";import"./LegendVisualProvider-14686d82.js";const O=s=>{const e=s.techRateList.reduce((i,r)=>i+r.rate,0);return s.techRateList.forEach(i=>i.rate/=e),s},U=s=>(s.forEach(e=>O(e)),s),K=s=>C({method:"GET",url:"/data_analysis/tech/initial_choice",params:s}).then(e=>O(e)),Q=s=>C({method:"GET",url:"/data_analysis/tech/compare_job",params:s}).then(e=>U(e)),W=s=>C({method:"GET",url:"/data_analysis/tech/compare_region",params:s}).then(e=>U(e)),X=u("h2",{class:"text-xl font-bold"},"同一城市不同岗位对比",-1),ee={class:"flex mb-4"},te=S({__name:"same-city-diff-jobs-top10",props:{job:{},jobs:{},city:{},cities:{},data:{}},setup(s){const e=s;T([P,E,R,B,I,M,q]);const i=v([]),r=v([]),h=10,b=f(()=>e.jobs.filter(t=>t!==e.job).map(t=>({value:t,label:t}))),y=()=>Q({city:e.city,jobName:e.job,choiceList:i.value}).then(t=>r.value=t),_=f(()=>{const t=e.data?[e.data,...r.value]:[];return{legend:{},xAxis:{type:"value",axisLabel:{formatter:a=>`${a*100}%`},min:0,max:1},yAxis:{type:"category"},tooltip:{trigger:"item",axisPointer:{type:"shadow"}},series:Array.from({length:h}).map((a,o)=>({type:"bar",stack:"total",data:t.map(({jobName:d,techRateList:p})=>{const{techName:x,rate:j}=p[o];return{name:x,value:[j,d],label:{show:j>.07,formatter:`${x}`,color:"#F7FAFF"}}}),markArea:{itemStyle:{color:"#e5e9f07f"},data:[[{yAxis:e.job},{yAxis:e.job}]]},tooltip:{formatter:({name:d,value:p})=>`${d}: ${(p[0]*100).toFixed(2)}%`}}))}});return(t,a)=>(g(),$(V,null,[X,u("div",ee,[n(l(c.NSelect),{value:i.value,"onUpdate:value":a[0]||(a[0]=o=>i.value=o),options:b.value,class:"w-96 m-2",placeholder:"对比岗位",multiple:""},null,8,["value","options"]),n(l(c.NButton),{class:"inline m-2",onClick:y},{default:m(()=>[k("确认")]),_:1})]),n(l(F),{option:_.value,style:z(`height: ${i.value.length*2+12}rem`),autoresize:"",onMousedown:a[1]||(a[1]=({name:o})=>l(A)(o))},null,8,["option","style"])],64))}}),ae=u("h2",{class:"text-xl font-bold"},"同一职位不同城市对比",-1),oe={class:"flex mb-4"},se=S({__name:"same-job-diff-cities-top10",props:{job:{},jobs:{},city:{},cities:{},data:{}},setup(s){const e=s;T([P,E,R,B,I,M,q]);const i=v([]),r=v([]),h=10,b=f(()=>e.cities.filter(t=>t!==e.city).map(t=>({value:t,label:t}))),y=()=>W({city:e.city,jobName:e.job,choiceList:i.value}).then(t=>r.value=t),_=f(()=>{const t=e.data?[e.data,...r.value]:[];return{legend:{},xAxis:{type:"value",axisLabel:{formatter:a=>`${a*100}%`},min:0,max:1},yAxis:{type:"category"},tooltip:{trigger:"item",axisPointer:{type:"shadow"}},series:Array.from({length:h}).map((a,o)=>({type:"bar",stack:"total",data:t.map(({region:d,techRateList:p})=>{const{techName:x,rate:j}=p[o];return{name:x,value:[j,d],label:{show:j>.06,formatter:`${x}`,color:"#F7FAFF"}}}),markArea:{itemStyle:{color:"#e5e9f07f"},data:[[{yAxis:e.job},{yAxis:e.job}]]},tooltip:{formatter:({name:d,value:p})=>`${d}: ${(p[0]*100).toFixed(2)}%`}}))}});return(t,a)=>(g(),$(V,null,[ae,u("div",oe,[n(l(c.NSelect),{value:i.value,"onUpdate:value":a[0]||(a[0]=o=>i.value=o),options:b.value,class:"w-96 m-2",placeholder:"对比岗位",multiple:""},null,8,["value","options"]),n(l(c.NButton),{class:"inline m-2",onClick:y},{default:m(()=>[k("确认")]),_:1})]),n(l(F),{option:_.value,style:z(`height: ${i.value.length*2+12}rem`),autoresize:"",onMousedown:a[1]||(a[1]=({name:o})=>l(A)(o))},null,8,["option","style"])],64))}}),L=s=>(J("data-v-d94ed518"),s=s(),Z(),s),le={class:"sm:p-2 grow flex flex-col"},ie={class:"w-full h-full flex flex-col"},ne=L(()=>u("h2",{class:"text-2xl font-bold"},"技能需求",-1)),re=L(()=>u("span",{class:"text-lg"},"筛选",-1)),ce={class:"flex"},ue={key:0,class:"p-2"},de=L(()=>u("h2",{class:"text-xl font-bold"},"比较",-1)),pe=S({__name:"skill-require-view",setup(s){T([R,I,B,Y,E]);const e=v("java"),i=v("杭州"),r=v(),h=f(()=>w.map(t=>({label:t,value:t}))),b=f(()=>N.map(t=>({label:t,value:t}))),y=f(()=>{var t;return{tooltip:{trigger:"item"},legend:{},series:{type:"pie",radius:[20,140],center:["50%","75%"],roseType:"radius",itemStyle:{borderRadius:5},label:{show:!0,color:"#4c566a",formatter:({name:a,value:o})=>`${a} ${(o*100).toFixed(2)}%`},tooltip:{formatter:({name:a,value:o})=>`${a} ${(o*100).toFixed(2)}%`},data:(t=r.value)==null?void 0:t.techRateList.map(({techName:a,rate:o})=>({value:o,name:a}))}}}),_=()=>K({city:i.value,jobName:e.value}).then(t=>r.value=t);return D(()=>{_()}),(t,a)=>(g(),$("div",le,[n(l(c.NCard),{class:"grow shadow-lg rounded-none sm:rounded-md"},{default:m(()=>[u("div",ie,[ne,re,u("div",ce,[n(l(c.NSelect),{value:e.value,"onUpdate:value":a[0]||(a[0]=o=>e.value=o),options:b.value,class:"inline w-24 p-2",placeholder:"职位"},null,8,["value","options"]),n(l(c.NSelect),{value:i.value,"onUpdate:value":a[1]||(a[1]=o=>i.value=o),options:h.value,class:"inline w-24 p-2",placeholder:"城市"},null,8,["value","options"]),n(l(c.NButton),{class:"inline m-2",onClick:_},{default:m(()=>[k("确认")]),_:1})]),r.value!==void 0?(g(),$("div",ue,[n(l(F),{option:y.value,style:{height:"24rem"},autoresize:"",onMousedown:a[2]||(a[2]=({name:o})=>l(A)(o))},null,8,["option"])])):G("",!0),de,n(l(c.NTabs),{"default-value":""},{default:m(()=>[n(l(c.NTabPane),{name:"相同职位不同城市"},{default:m(()=>[n(se,{job:e.value,jobs:l(N),city:i.value,cities:l(w),data:r.value},null,8,["job","jobs","city","cities","data"])]),_:1}),n(l(c.NTabPane),{name:"相同城市不同职位"},{default:m(()=>[n(te,{job:e.value,jobs:l(N),city:i.value,cities:l(w),data:r.value},null,8,["job","jobs","city","cities","data"])]),_:1})]),_:1})])]),_:1})]))}});const ge=H(pe,[["__scopeId","data-v-d94ed518"]]);export{ge as default};
