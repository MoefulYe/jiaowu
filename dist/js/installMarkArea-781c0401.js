import{bb as E,bs as B,b1 as G,bC as ie,b5 as U,bp as L,bD as H,bE as oe,bF as se,bG as le,bH as ue,bq as k,bu as fe,bI as V,bJ as C,bK as pe,bL as ve,bM as ce,bN as me,bO as ge,bo as A,bg as ye,bP as _,bm as he,bQ as K,bR as R,bS as W,b6 as de,b9 as be,b7 as xe,bT as ke,bc as Ae,bl as De,br as Me,bt as D,bU as Se,bx as z}from"./index-007a92d3.js";import{h as Ie,S as X,i as j}from"./installCanvasRenderer-cb9bce88.js";function Ne(r,e){if(!r)return!1;for(var a=E(r)?r:[r],t=0;t<a.length;t++)if(a[t]&&a[t][e])return!0;return!1}function M(r){ue(r,"label",["show"])}var S=B(),ee=function(r){G(e,r);function e(){var a=r!==null&&r.apply(this,arguments)||this;return a.type=e.type,a.createdBySelf=!1,a}return e.prototype.init=function(a,t,n){this.mergeDefaultAndTheme(a,n),this._mergeOption(a,n,!1,!0)},e.prototype.isAnimationEnabled=function(){if(ie.node)return!1;var a=this.__hostSeries;return this.getShallow("animation")&&a&&a.isAnimationEnabled()},e.prototype.mergeOption=function(a,t){this._mergeOption(a,t,!1,!1)},e.prototype._mergeOption=function(a,t,n,i){var l=this.mainType;n||t.eachSeries(function(o){var f=o.get(this.mainType,!0),p=S(o)[l];if(!f||!f.data){S(o)[l]=null;return}p?p._mergeOption(f,t,!0):(i&&M(f),U(f.data,function(s){s instanceof Array?(M(s[0]),M(s[1])):M(s)}),p=this.createMarkerModelFromSeries(f,this,t),L(p,{mainType:this.mainType,seriesIndex:o.seriesIndex,name:o.name,createdBySelf:!0}),p.__hostSeries=o),S(o)[l]=p},this)},e.prototype.formatTooltip=function(a,t,n){var i=this.getData(),l=this.getRawValue(a),o=i.getName(a);return H("section",{header:this.name,blocks:[H("nameValue",{name:o,value:l,noName:!o,noValue:l==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(a){this._data=a},e.getMarkerModelFromSeries=function(a,t){return S(a)[t]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(oe);se(ee,le.prototype);const w=ee;function P(r){return!(isNaN(parseFloat(r.x))&&isNaN(parseFloat(r.y)))}function Ee(r){return!isNaN(parseFloat(r.x))&&!isNaN(parseFloat(r.y))}function I(r,e,a,t,n,i){var l=[],o=Ie(e,t),f=o?e.getCalculationInfo("stackResultDimension"):t,p=ae(e,f,r),s=e.indicesOfNearest(f,p)[0];l[n]=e.get(a,s),l[i]=e.get(f,s);var v=e.get(t,s),u=pe(e.get(t,s));return u=Math.min(u,20),u>=0&&(l[i]=+l[i].toFixed(u)),[l,v]}var T={min:k(I,"min"),max:k(I,"max"),average:k(I,"average"),median:k(I,"median")};function Y(r,e){if(e){var a=r.getData(),t=r.coordinateSystem,n=t&&t.dimensions;if(!Ee(e)&&!E(e.coord)&&E(n)){var i=Ce(e,a,t,r);if(e=fe(e),e.type&&T[e.type]&&i.baseAxis&&i.valueAxis){var l=V(n,i.baseAxis.dim),o=V(n,i.valueAxis.dim),f=T[e.type](a,i.baseDataDim,i.valueDataDim,l,o);e.coord=f[0],e.value=f[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!E(n))e.coord=[];else for(var p=e.coord,s=0;s<2;s++)T[p[s]]&&(p[s]=ae(a,a.mapDimension(n[s]),p[s]));return e}}function Ce(r,e,a,t){var n={};return r.valueIndex!=null||r.valueDim!=null?(n.valueDataDim=r.valueIndex!=null?e.getDimension(r.valueIndex):r.valueDim,n.valueAxis=a.getAxis(we(t,n.valueDataDim)),n.baseAxis=a.getOtherAxis(n.valueAxis),n.baseDataDim=e.mapDimension(n.baseAxis.dim)):(n.baseAxis=t.getBaseAxis(),n.valueAxis=a.getOtherAxis(n.baseAxis),n.baseDataDim=e.mapDimension(n.baseAxis.dim),n.valueDataDim=e.mapDimension(n.valueAxis.dim)),n}function we(r,e){var a=r.getData().getDimensionInfo(e);return a&&a.coordDim}function Z(r,e){return r&&r.containData&&e.coord&&!P(e)?r.containData(e.coord):!0}function Fe(r,e,a){return r&&r.containZone&&e.coord&&a.coord&&!P(e)&&!P(a)?r.containZone(e.coord,a.coord):!0}function Re(r,e){return r?function(a,t,n,i){var l=i<2?a.coord&&a.coord[i]:a.value;return C(l,e[i])}:function(a,t,n,i){return C(a.value,e[i])}}function ae(r,e,a){if(a==="average"){var t=0,n=0;return r.each(e,function(i,l){isNaN(i)||(t+=i,n++)}),t/n}else return a==="median"?r.getMedian(e):r.getDataExtent(e)[a==="max"?1:0]}var O=B(),Ge=function(r){G(e,r);function e(){var a=r!==null&&r.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.init=function(){this.markerGroupMap=ve()},e.prototype.render=function(a,t,n){var i=this,l=this.markerGroupMap;l.each(function(o){O(o).keep=!1}),t.eachSeries(function(o){var f=w.getMarkerModelFromSeries(o,i.type);f&&i.renderSeries(o,f,t,n)}),l.each(function(o){!O(o).keep&&i.group.remove(o.group)})},e.prototype.markKeep=function(a){O(a).keep=!0},e.prototype.toggleBlurSeries=function(a,t){var n=this;U(a,function(i){var l=w.getMarkerModelFromSeries(i,n.type);if(l){var o=l.getData();o.eachItemGraphicEl(function(f){f&&(t?ce(f):me(f))})}})},e.type="marker",e}(ge);const Te=Ge;var Oe=function(r){G(e,r);function e(){var a=r!==null&&r.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.createMarkerModelFromSeries=function(a,t,n){return new e(a,t,n)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e}(w);const Le=Oe;var N=B(),Pe=function(r,e,a,t){var n=t[0],i=t[1];if(!(!n||!i)){var l=Y(r,n),o=Y(r,i),f=l.coord,p=o.coord;f[0]=D(f[0],-1/0),f[1]=D(f[1],-1/0),p[0]=D(p[0],1/0),p[1]=D(p[1],1/0);var s=Se([{},l,o]);return s.coord=[l.coord,o.coord],s.x0=l.x,s.y0=l.y,s.x1=o.x,s.y1=o.y,s}};function F(r){return!isNaN(r)&&!isFinite(r)}function q(r,e,a,t){var n=1-r;return F(e[n])&&F(a[n])}function Be(r,e){var a=e.coord[0],t=e.coord[1],n={coord:a,x:e.x0,y:e.y0},i={coord:t,x:e.x1,y:e.y1};return j(r,"cartesian2d")?a&&t&&(q(1,a,t)||q(0,a,t))?!0:Fe(r,n,i):Z(r,n)||Z(r,i)}function J(r,e,a,t,n){var i=t.coordinateSystem,l=r.getItemModel(e),o,f=z(l.get(a[0]),n.getWidth()),p=z(l.get(a[1]),n.getHeight());if(!isNaN(f)&&!isNaN(p))o=[f,p];else{if(t.getMarkerPosition){var s=r.getValues(["x0","y0"],e),v=r.getValues(["x1","y1"],e),u=i.clampData(s),m=i.clampData(v),c=[];a[0]==="x0"?c[0]=u[0]>m[0]?v[0]:s[0]:c[0]=u[0]>m[0]?s[0]:v[0],a[1]==="y0"?c[1]=u[1]>m[1]?v[1]:s[1]:c[1]=u[1]>m[1]?s[1]:v[1],o=t.getMarkerPosition(c,a,!0)}else{var g=r.get(a[0],e),h=r.get(a[1],e),d=[g,h];i.clampData&&i.clampData(d,d),o=i.dataToPoint(d,!0)}if(j(i,"cartesian2d")){var b=i.getAxis("x"),x=i.getAxis("y"),g=r.get(a[0],e),h=r.get(a[1],e);F(g)?o[0]=b.toGlobalCoord(b.getExtent()[a[0]==="x0"?0:1]):F(h)&&(o[1]=x.toGlobalCoord(x.getExtent()[a[1]==="y0"?0:1]))}isNaN(f)||(o[0]=f),isNaN(p)||(o[1]=p)}return o}var Q=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],$e=function(r){G(e,r);function e(){var a=r!==null&&r.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.updateTransform=function(a,t,n){t.eachSeries(function(i){var l=w.getMarkerModelFromSeries(i,"markArea");if(l){var o=l.getData();o.each(function(f){var p=A(Q,function(v){return J(o,f,v,i,n)});o.setItemLayout(f,p);var s=o.getItemGraphicEl(f);s.setShape("points",p)})}},this)},e.prototype.renderSeries=function(a,t,n,i){var l=a.coordinateSystem,o=a.id,f=a.getData(),p=this.markerGroupMap,s=p.get(o)||p.set(o,{group:new ye});this.group.add(s.group),this.markKeep(s);var v=He(l,a,t);t.setData(v),v.each(function(u){var m=A(Q,function(ne){return J(v,u,ne,a,i)}),c=l.getAxis("x").scale,g=l.getAxis("y").scale,h=c.getExtent(),d=g.getExtent(),b=[c.parse(v.get("x0",u)),c.parse(v.get("x1",u))],x=[g.parse(v.get("y0",u)),g.parse(v.get("y1",u))];_(b),_(x);var re=!(h[0]>b[1]||h[1]<b[0]||d[0]>x[1]||d[1]<x[0]),te=!re;v.setItemLayout(u,{points:m,allClipped:te});var y=v.getItemModel(u).getModel("itemStyle").getItemStyle(),$=he(f,"color");y.fill||(y.fill=$,K(y.fill)&&(y.fill=R(y.fill,.4))),y.stroke||(y.stroke=$),v.setItemVisual(u,"style",y)}),v.diff(N(s).data).add(function(u){var m=v.getItemLayout(u);if(!m.allClipped){var c=new W({shape:{points:m.points}});v.setItemGraphicEl(u,c),s.group.add(c)}}).update(function(u,m){var c=N(s).data.getItemGraphicEl(m),g=v.getItemLayout(u);g.allClipped?c&&s.group.remove(c):(c?de(c,{shape:{points:g.points}},t,u):c=new W({shape:{points:g.points}}),v.setItemGraphicEl(u,c),s.group.add(c))}).remove(function(u){var m=N(s).data.getItemGraphicEl(u);s.group.remove(m)}).execute(),v.eachItemGraphicEl(function(u,m){var c=v.getItemModel(m),g=v.getItemVisual(m,"style");u.useStyle(v.getItemVisual(m,"style")),be(u,xe(c),{labelFetcher:t,labelDataIndex:m,defaultText:v.getName(m)||"",inheritColor:K(g.fill)?R(g.fill,1):"#000"}),ke(u,c),Ae(u,null,null,c.get(["emphasis","disabled"])),De(u).dataModel=t}),N(s).data=v,s.group.silent=t.get("silent")||a.get("silent")},e.type="markArea",e}(Te);function He(r,e,a){var t,n,i=["x0","y0","x1","y1"];if(r){var l=A(r&&r.dimensions,function(p){var s=e.getData(),v=s.getDimensionInfo(s.mapDimension(p))||{};return L(L({},v),{name:p,ordinalMeta:null})});n=A(i,function(p,s){return{name:p,type:l[s%2].type}}),t=new X(n,a)}else n=[{name:"value",type:"float"}],t=new X(n,a);var o=A(a.get("data"),k(Pe,e,r,a));r&&(o=Me(o,k(Be,r)));var f=r?function(p,s,v,u){var m=p.coord[Math.floor(u/2)][u%2];return C(m,n[u])}:function(p,s,v,u){return C(p.value,n[u])};return t.initData(o,null,f),t.hasItemOption=!0,t}const Ve=$e;function We(r){r.registerComponentModel(Le),r.registerComponentView(Ve),r.registerPreprocessor(function(e){Ne(e.series,"markArea")&&(e.markArea=e.markArea||{})})}export{w as M,Te as a,Z as b,Re as c,Y as d,Ne as e,Ce as g,We as i,ae as n};
